<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="[TOC] eclipse启动后会选择工作目录 如果把一些视图关闭了可以从 windows+show View: t 里打开 “project Explorer”,”outline”,”console”,”problems”;  建立项目：命名为Myproject  项目创建完成后会产生两个目录：  src : 保存所有的原代码目录  bin : 保存所有的生成的 *.class 目录；   这个">
<meta property="og:type" content="article">
<meta property="og:title" content="java高级编程上">
<meta property="og:url" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/index.html">
<meta property="og:site_name" content="zenner&#39;s Blog">
<meta property="og:description" content="[TOC] eclipse启动后会选择工作目录 如果把一些视图关闭了可以从 windows+show View: t 里打开 “project Explorer”,”outline”,”console”,”problems”;  建立项目：命名为Myproject  项目创建完成后会产生两个目录：  src : 保存所有的原代码目录  bin : 保存所有的生成的 *.class 目录；   这个">
<meta property="og:locale" content="zh">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200620094308218.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200620100005420.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200620100058934.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200620155851949.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621114310743.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621114547669.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621120942170.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621121407749.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621121547031.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621122311938.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621124716729.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621180328764.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621180930045.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621181501789.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621184205832.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621212319879.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621213423162.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621214512575.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621220421505.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200622091300923.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200622094842671.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200622101408070.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200622101611992.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200622110829449.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200622125513284.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200622174935708.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200623094532493.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200623102242087.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200623104048946.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200623155100322.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200623172221564.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200623185632111.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200624130022432.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200624185030139.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200625151325238.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200628103908525.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200628105010956.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200628110527647.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200628110845248.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200628113338547.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200628231249732.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200702155322434.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200702162340499.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200702165622679.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200702175100493.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200702175311288.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200702175415864.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200702175751215.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703091438511.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703091729898.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703092903184.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703092957642.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703093842704.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703100930114.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703101420358.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703101536770.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703101944620.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703102522310.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703102542488.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703102609251.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703103056376.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703103245195.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703103510803.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703103715408.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703103826585.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703104218170.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703104122403.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703104415382.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703104503801.png">
<meta property="og:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703104604553.png">
<meta property="article:published_time" content="2020-05-11T12:22:50.000Z">
<meta property="article:modified_time" content="2020-07-14T02:14:17.583Z">
<meta property="article:tag" content="dive into">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200620094308218.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/05/11/java高级编程/"/>





  <title>java高级编程上 | zenner's Blog</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">zenner's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">巨饼的技术博</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            Schedule
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zenner's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">java高级编程上</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-05-11T20:22:50+08:00">
                2020-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>[TOC]</p>
<h1 id="eclipse"><a href="#eclipse" class="headerlink" title="eclipse"></a>eclipse</h1><p>启动后会选择工作目录</p>
<p>如果把一些视图关闭了可以从 windows+show View:</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200620094308218.png" alt="image-20200620094308218">t</p>
<p>里打开 “project Explorer”,”outline”,”console”,”problems”;</p>
<ul>
<li>建立项目：命名为Myproject</li>
</ul>
<p>项目创建完成后会产生两个目录：</p>
<ul>
<li><p>src : 保存所有的原代码目录</p>
</li>
<li><p>bin : 保存所有的生成的 *.class 目录；</p>
</li>
</ul>
<p>这个视图会和原来不一样，可以在右上角切换；</p>
<ul>
<li>字体大小通过Ctrl + ++放大字体，通过 windows+preference也可以调整</li>
</ul>
<blockquote>
<p>范例：编写程序</p>
</blockquote>
<ul>
<li>输入main,然后ALt+”/“可补充完成</li>
<li>系统输出：sysout，ALT+/</li>
</ul>
<p>代码生成功能可以生成一些类方法：</p>
<blockquote>
<p>范例生成类方法：</p>
</blockquote>
<ul>
<li>光标放在这里：</li>
</ul>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200620100005420.png" alt="image-20200620100005420"></p>
<ul>
<li>状态栏【source】</li>
</ul>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200620100058934.png" alt="image-20200620100058934"></p>
<ul>
<li>里面可选 生成 setter，getter；有参构造，无参构造；</li>
</ul>
<blockquote>
<p>快捷键：</p>
</blockquote>
<ul>
<li>Alt+/:代码编写提示</li>
<li>Ctr + 1：代码纠正；</li>
<li>CTRL + SHIFT + O :开发包的自动导入</li>
<li>CTRL  + / ：注释代码</li>
<li>CTRL + SHIFT + / ：注释多行</li>
<li>CTRL + SHIFT + F ：格式化代码</li>
<li>CTRL + SHIFT + L : 快捷键列表；</li>
<li>文档注释：<code>/**</code>+回车</li>
</ul>
<p>项目导入导出：</p>
<ul>
<li>导出：【file】+【export】;</li>
<li>导入：【项目】右键+【properties】+【java build path】+【library】+【classpath】+【Add External JARs】</li>
</ul>
<p>带参数的项目运行</p>
<a id="more"></a>
<h2 id="3-debug操作"><a href="#3-debug操作" class="headerlink" title="3. debug操作"></a>3. debug操作</h2><blockquote>
<p>范例</p>
</blockquote>
<p>类方法代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.jubingyi.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMath</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">		temp = x + y;</span><br><span class="line">		<span class="keyword">return</span> temp;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.jubingyi.Demo;</span><br><span class="line"><span class="keyword">import</span> cn.jubingyi.util.MyMath;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMath</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> result = MyMath.add(<span class="number">10</span>, <span class="number">20</span>);	<span class="comment">//将此处设置为断点：在行头双击，出现蓝点；</span></span><br><span class="line">		System.out.println(<span class="string">"加法结果 "</span>+ result);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>随后就可以以debug模式进行操作，</p>
<p>调试的几种形式：</p>
<ul>
<li>单步跳入【F5】：进入到代码之中观察，进入到内部；</li>
<li>单步跳过【F6】：不进入到代码中观察，只观察代码表面</li>
<li>单步返回【F7】：后面的代码不再调试，返回到进入处</li>
<li>恢复执行【F8】：程序直接正常执行完毕</li>
</ul>
<h2 id="4-Junit测试工具"><a href="#4-Junit测试工具" class="headerlink" title="4. Junit测试工具"></a>4. Junit测试工具</h2><p>junit是一种用例测试工具；</p>
<blockquote>
<p>测试用例</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.jubingyi.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMath</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">		temp = x + y;</span><br><span class="line">		<span class="keyword">return</span> temp;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>选中要测试的例，继续选择新建；</li>
<li>java-junit</li>
<li>junit属于第三方程序包，需要额外的配置；</li>
<li>导入包后再import还报错了，删除项目自带的那个module什么文件；</li>
<li>Junit测试有两个返回结果：<ul>
<li>GREEN BAR：测试通过</li>
<li>RED BAR：测试失败；</li>
</ul>
</li>
</ol>
<h1 id="java新特性"><a href="#java新特性" class="headerlink" title="java新特性"></a>java新特性</h1><h2 id="1-可变参数"><a href="#1-可变参数" class="headerlink" title="1.可变参数"></a>1.可变参数</h2><p>设计一个方法，用于计算任意个数的整数的相加结果；</p>
<blockquote>
<p>最开始用数组实现</p>
</blockquote>
<p>现在可以用的方法定义形式是这样的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法模板</span></span><br><span class="line"><span class="keyword">public</span> [<span class="keyword">static</span>] [<span class="keyword">final</span>] 返回值 方法名称(参数类型 ... 参数名称)&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>参数上的 …就明确描述了数组得的结构；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		System.out.println(add(<span class="number">1</span>,<span class="number">23</span>,<span class="number">124</span>));	<span class="comment">// 多个参数是可以的</span></span><br><span class="line">		System.out.println(add(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>&#125;));	<span class="comment">// 用数组也是可以的</span></span><br><span class="line">	&#125;	</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 实现任意个整数的相加</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> data 要进行相加的整数</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> 返回多个整数相加结果</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span>... data)</span> </span>&#123; <span class="comment">// 描述的是一个数组</span></span><br><span class="line">		<span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; data.length; x++) &#123;</span><br><span class="line">			sum += data[x];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> sum;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：传递多个参数，可变参数写在最后</p>
<h2 id="2-foreach-循环（增加for）"><a href="#2-foreach-循环（增加for）" class="headerlink" title="2. foreach 循环（增加for）"></a>2. foreach 循环（增加for）</h2><p>原始数组：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; data.length; x++) &#123;</span><br><span class="line">    sum += data[x];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新特性：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模板</span></span><br><span class="line"><span class="keyword">for</span>(数据类型 临时变量：数组)&#123;</span><br><span class="line">    <span class="comment">//循环次数为数组长度，每一次循环都会取出一个数组元素给临时变量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>增强型的for循环：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> data[] = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i:data) &#123;</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>避免角标问题，避免越界问题；</p>
<h2 id="3-静态导入"><a href="#3-静态导入" class="headerlink" title="3.静态导入"></a>3.静态导入</h2><p>定义一个类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMath</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">		temp = x + y;</span><br><span class="line">		<span class="keyword">return</span> temp;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">sub</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> x - y;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最开始肯定是先导入MyMath类，然后再用MyMath类来使用类中的static方法</p>
<blockquote>
<p> 范例：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.jubingyi.Demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.jubingyi.util.MyMath;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMath</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		System.out.println(MyMath.add(<span class="number">10</span>,<span class="number">20</span>));</span><br><span class="line">		System.out.println(MaMath.sub(<span class="number">20</span>,<span class="number">10</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>静态导入的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.jubingyi.util.MyMath.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMath</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		System.out.println(add(<span class="number">10</span>,<span class="number">20</span>));</span><br><span class="line">		System.out.println(sub(<span class="number">20</span>,<span class="number">10</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h1><p>可以解决程序的参数转换问题</p>
<h2 id="1-泛型问题引出"><a href="#1-泛型问题引出" class="headerlink" title="1. 泛型问题引出"></a>1. 泛型问题引出</h2><p>假设定义一个描述坐标的类Point; 类中有两个属性x，y;</p>
<ul>
<li>参数可能有如下的选择：<ul>
<li>x = 10 、y = 20</li>
<li>x = 10.1, y = 20.2</li>
<li>x = 东经70° y = 北纬20°</li>
</ul>
</li>
</ul>
<p>首先要解决的就是Point类属性x，y类型问题，那么此时需要保存的有int，double，String类型；再Java里只有一种类型Object可以保存所有的类型；</p>
<ul>
<li>int 自动装箱 Integer，在自动转型到Object</li>
<li>double 自动装箱 Double，Double自动向上到Object</li>
<li>String 向上转型Object；</li>
</ul>
<blockquote>
<p>范例：定义Point类</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Object x;</span><br><span class="line">	<span class="keyword">private</span> Object y;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">getX</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> x;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setX</span><span class="params">(Object x)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.x = x;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">getY</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> y;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setY</span><span class="params">(Object y)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.y = y;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>范例：设置整形数据</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Point p = <span class="keyword">new</span> Point();</span><br><span class="line">    p.setX(<span class="number">10</span>);</span><br><span class="line">    p.setY(<span class="number">20</span>);</span><br><span class="line">    <span class="keyword">int</span> x = (Integer) p.getX();</span><br><span class="line">    <span class="keyword">int</span> y = (Integer) p.getY();</span><br><span class="line">    System.out.println(<span class="string">"x = "</span> + x + <span class="string">"、 y="</span> + y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>范例设置字符串：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Point p = <span class="keyword">new</span> Point();</span><br><span class="line">    p.setX(<span class="string">"东经70°"</span>);</span><br><span class="line">    p.setY(<span class="string">"北纬20°"</span>);</span><br><span class="line">    String x = (String) p.getX();</span><br><span class="line">    String y = (String) p.getY();</span><br><span class="line">    System.out.println(<span class="string">"x = "</span> + x + <span class="string">"、 y="</span> + y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但设置就可以随意设置，但接收时总要确定的类型来接收；</p>
<h2 id="2-泛型基本定义"><a href="#2-泛型基本定义" class="headerlink" title="2. 泛型基本定义"></a>2. 泛型基本定义</h2><p> 泛型就是类在定义时候不会设置类中的属性或方法中的参数的具体类型，在类使用的时候才进行定义</p>
<p>如果想要进行这种泛型的操作，就必须进行一个类型标记的声明</p>
<blockquote>
<p>范例：Point类</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在Point类定义的时候完全不知道属性的类型，完全由使用者来决定</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &lt;<span class="title">T</span>&gt;</span>&#123; <span class="comment">// T表示参数，是一个占位标记</span></span><br><span class="line">	<span class="keyword">private</span> T x;</span><br><span class="line">	<span class="keyword">private</span> T y;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getX</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> x;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setX</span><span class="params">(T x)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.x = x;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getY</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> y;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setY</span><span class="params">(T y)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.y = y;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Point&lt;String&gt; p = <span class="keyword">new</span> Point&lt;String&gt;();</span><br><span class="line">		p.setX(<span class="string">"东经70°"</span>);</span><br><span class="line">		p.setY(<span class="string">"北纬20°"</span>);</span><br><span class="line">		String x = p.getX();	<span class="comment">// 避免了向下转型</span></span><br><span class="line">		String y = p.getY();</span><br><span class="line">		System.out.println(<span class="string">"x = "</span> + x + <span class="string">"、 y="</span> + y);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-通配符（重点）"><a href="#3-通配符（重点）" class="headerlink" title="3. 通配符（重点）"></a>3. 通配符（重点）</h2><p>增加了泛型解决了不同类型的定义问题，但又有了统一参数的问题</p>
<blockquote>
<p>范例</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span> &lt;<span class="title">T</span>&gt;</span>&#123; </span><br><span class="line">	<span class="keyword">private</span> T note;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getNote</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> note;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNote</span><span class="params">(T note)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.note = note;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Message&lt;String&gt; message = <span class="keyword">new</span> Message &lt;String&gt;();</span><br><span class="line">		message.setNote(<span class="string">"巨饼很帅气"</span>);</span><br><span class="line">		fun(message);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">(Message&lt;String&gt; temp)</span> </span>&#123;</span><br><span class="line">		System.out.println(temp.getNote());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在的问题是在于使用时类型使用的不是String那么其他的就不能使用fun函数了；也就是说还得写其他的重载方法；但写了所谓的重载方法也是错的：因为方法在程序看来都是<code>Message&lt;T&gt;</code>类型的，而不是你想要的，<code>Message&lt;String&gt;</code>，<code>Message&lt;Integer&gt;</code>之类的；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200620155851949.png" alt="image-20200620155851949"></p>
<p>我们想要的就是可以接受所有的类型，又不想让用户随意修改我们使用的类型；</p>
<hr>
<p><strong>这里使用“？”来处理</strong> ：能接收一切，但不能修改</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Message&lt;Integer&gt; message = <span class="keyword">new</span> Message &lt;Integer&gt;();</span><br><span class="line">		message.setNote(<span class="number">99</span>);</span><br><span class="line">		fun(message);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 此时使用的通配符“？”描述的是他可以接受任意类型，但由于不确定类型，而无法修改</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">(Message&lt;?&gt; temp)</span> </span>&#123;</span><br><span class="line">		temp.setNote(<span class="string">"句柄很帅"</span>);	<span class="comment">// 这时就报错了，这是不能修改的；</span></span><br><span class="line">        temp.setNote(<span class="number">87</span>);	<span class="comment">// 这种自身传进来的修改也不可以；</span></span><br><span class="line">		System.out.println(temp.getNote());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>而在“？”的基础上产生了两个子通配符</p>
<ul>
<li><code>？ extends 类</code> ： 设置泛型上限：<ul>
<li>例如 <code>？ extends Number</code>，只能设置Number 或其子类，Integer，Double之类的</li>
</ul>
</li>
<li>? super 类： 设置泛型下限：<ul>
<li>例如 <code>？ super String</code> ,表示只能够设置String或其父类：Object；</li>
</ul>
</li>
</ul>
<blockquote>
<p>范例：泛型上限</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.jubingyi.Demo;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span> &lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Number</span>&gt;</span>&#123; <span class="comment">// 设置泛型上限 ，表示只接收Number及其子类</span></span><br><span class="line">	<span class="keyword">private</span> T note;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getNote</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> note;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNote</span><span class="params">(T note)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.note = note;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Message&lt;Integer&gt; message = <span class="keyword">new</span> Message &lt;Integer&gt;();</span><br><span class="line">		message.setNote(<span class="number">99</span>);</span><br><span class="line">		fun(message);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">(Message&lt;? extends Number&gt; temp)</span> </span>&#123;	<span class="comment">// 只接收Number及其子类</span></span><br><span class="line">		System.out.println(temp.getNote());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>泛型：泛型下限</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.jubingyi.Demo;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span> &lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> T note;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getNote</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> note;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNote</span><span class="params">(T note)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.note = note;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Message&lt;String&gt; message = <span class="keyword">new</span> Message &lt;String&gt;();</span><br><span class="line">		message.setNote(<span class="string">"Hello world"</span>);</span><br><span class="line">		fun(message);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">(Message&lt;? <span class="keyword">super</span> String&gt; temp)</span> </span>&#123;	<span class="comment">// 只在这里使用</span></span><br><span class="line">		System.out.println(temp.getNote());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-泛型接口"><a href="#4-泛型接口" class="headerlink" title="4. 泛型接口"></a>4. 泛型接口</h2><blockquote>
<p>范例：泛型接口</p>
<ul>
<li>第一种类实现接口也泛型</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IMessage</span>&lt;<span class="title">T</span>&gt;</span>&#123;	<span class="comment">// 在接口上定义了泛型</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(T t)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageImpl</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">IMessage</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">		System.out.println(t);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		IMessage&lt;String&gt; msg = <span class="keyword">new</span> MessageImpl&lt;String&gt;();</span><br><span class="line">		msg.print(<span class="string">"Hello world!!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>第二种：在子类实现接口的时候明确给出具体类型；</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IMessage</span>&lt;<span class="title">T</span>&gt;</span>&#123;	<span class="comment">// 在接口上定义了泛型</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(T t)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageImpl</span> <span class="keyword">implements</span> <span class="title">IMessage</span>&lt;<span class="title">String</span>&gt;</span>&#123;	<span class="comment">// 明确了类型是String</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(String t)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(t);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		IMessage&lt;String&gt; msg = <span class="keyword">new</span> MessageImpl();</span><br><span class="line">		msg.print(<span class="string">"Hello world!!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="5-泛型方法"><a href="#5-泛型方法" class="headerlink" title="5. 泛型方法"></a>5. 泛型方法</h2><p>在类或接口里的方法就是泛型方法，但这些方法不一定非要在类或接口里</p>
<blockquote>
<p>范例：定义泛型方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Integer [] data = fun(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> temp:data) &#123;</span><br><span class="line">			System.out.println(temp);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// &lt;T&gt;描述的是泛型标记的声明</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T[] fun(T ... args) &#123;	</span><br><span class="line">		<span class="keyword">return</span> args;</span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h1><p>枚举功能比较玩出现，所以一定程度上来说，可以不会；</p>
<h2 id="1-多例与枚举"><a href="#1-多例与枚举" class="headerlink" title="1. 多例与枚举"></a>1. 多例与枚举</h2><p>多例设计模式：构造方法私有化，而后类内部需要提供有若干个实例化对象，后面通过static方法返回</p>
<blockquote>
<p>范例：定义一个描述颜色基色的多例设计类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Color RED = <span class="keyword">new</span> Color(<span class="string">"RED"</span>);</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Color GREEN = <span class="keyword">new</span> Color(<span class="string">"GREEN"</span>);</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Color BLUE = <span class="keyword">new</span> Color(<span class="string">"BLUE"</span>);</span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Color</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Color <span class="title">getInstance</span><span class="params">(<span class="keyword">int</span> ch)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (ch) &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">			<span class="keyword">return</span> RED;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			<span class="keyword">return</span> GREEN;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			<span class="keyword">return</span> BLUE;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.title;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		System.out.println(Color.getInstance(<span class="number">2</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>限制本类实例化个数</p>
</blockquote>
<p>所谓枚举就是一种高级的多例设计模式</p>
<blockquote>
<p>范例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color&#123;</span><br><span class="line">	RED,GREEN,BLUE</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		System.out.println(Color.RED);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="2-Enum类"><a href="#2-Enum类" class="headerlink" title="2. Enum类"></a>2. Enum类</h2><p>enum是对一种类型的包装：使用enum定义的枚举类本质上就相当于一个class定义的类继承了<code>java.lang.Enum</code>父类；</p>
<p>在Enum类里面有以下的方法：</p>
<ul>
<li><p>构造方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="title">Enum</span><span class="params">(String name, <span class="keyword">int</span> ordinal)</span></span></span><br></pre></td></tr></table></figure>
<p>当定义枚举类中对象的时候会自动设置序号和名字；</p>
</li>
<li><p>取得枚举名字：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">name</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>取得枚举序号</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">ordinal</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>范例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color&#123;</span><br><span class="line">	RED,GREEN,BLUE</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		System.out.println(Color.RED.name()+<span class="string">" : "</span>+Color.RED.ordinal());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//RED : 0</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>在枚举操作里还有一个方法可以取得所有的枚举数据：values()返回的是一个枚举的对象数组</p>
<blockquote>
<p>范例：取得所有的枚举数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color &#123;</span><br><span class="line">	RED, GREEN, BLUE</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (Color temp : Color.values()) &#123;</span><br><span class="line">			System.out.println(temp.name() + <span class="string">" : "</span> + temp.ordinal());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">RED : 0</span></span><br><span class="line"><span class="comment">GREEN : 1</span></span><br><span class="line"><span class="comment">BLUE : 2</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>面试题</strong>：请解释enum和Enum的区别</p>
<ul>
<li>enum是一个关键字，用enum定义的枚举类本质上就相当于一个类继承了Enum这个抽象类；</li>
</ul>
<h2 id="3-枚举中定义其他结构"><a href="#3-枚举中定义其他结构" class="headerlink" title="3. 枚举中定义其他结构"></a>3. 枚举中定义其他结构</h2><p>多例设计是在一个类中产生的，所以在这个类中就可以定义更多的属性和方法。</p>
<p>而枚举依靠以上额概念只能够说产生了若干个对象，但并不能扩充方法定义更多的结构。</p>
<p>所以设计枚举：定义属性，方法，或者实现接口</p>
<blockquote>
<p>范例：在枚举中定义更多的结构</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color &#123;</span><br><span class="line">	RED(<span class="string">"红色"</span>), GREEN(<span class="string">"绿色"</span>), BLUE(<span class="string">"蓝色"</span>);	<span class="comment">//定义有其他内容，枚举对象定义在第一行；</span></span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Color</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.title;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (Color temp : Color.values()) &#123;</span><br><span class="line">			System.out.println(temp);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">红色</span></span><br><span class="line"><span class="comment">绿色</span></span><br><span class="line"><span class="comment">蓝色</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>枚举还可以实现接口</p>
<blockquote>
<p>范例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IColor</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getColor</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> Color implements IColor&#123;	<span class="comment">// 实现了接口！！！	</span></span><br><span class="line">	RED(<span class="string">"红色"</span>), GREEN(<span class="string">"绿色"</span>), BLUE(<span class="string">"蓝色"</span>);	<span class="comment">//定义有其他内容，枚举对象定义在第一行；</span></span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Color</span><span class="params">(String title)</span> </span>&#123;	<span class="comment">// 构造方法不能用public</span></span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.title;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		IColor ic = Color.RED;</span><br><span class="line">		System.out.println(ic.getColor());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">红色</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="4-枚举应用"><a href="#4-枚举应用" class="headerlink" title="4. 枚举应用"></a>4. 枚举应用</h2><p>实现一个表示性别的对象</p>
<blockquote>
<p>范例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> Sex sex;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">People</span><span class="params">(String name, <span class="keyword">int</span> age, Sex sex)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">		<span class="keyword">this</span>.sex = sex;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Person [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">", sex="</span> + sex + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> Sex&#123;</span><br><span class="line">	MALE(<span class="string">"男"</span>),FEMALE(<span class="string">"女"</span>);</span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Sex</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.title;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		People per = <span class="keyword">new</span> People(<span class="string">"张三"</span>,<span class="number">20</span>,Sex.MALE);</span><br><span class="line">		System.out.println(per);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>枚举还支持switch判断</p>
<blockquote>
<p>范例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Sex&#123;</span><br><span class="line">	MALE(<span class="string">"男"</span>),FEMALE(<span class="string">"女"</span>);</span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Sex</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.title;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (Sex.MALE) &#123;</span><br><span class="line">		<span class="keyword">case</span> MALE:</span><br><span class="line">			System.out.println(<span class="string">"是男人"</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> FEMALE:</span><br><span class="line">			System.out.println(<span class="string">"是女人"</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="Annotation"><a href="#Annotation" class="headerlink" title="Annotation"></a>Annotation</h1><h2 id="代码开发逻辑"><a href="#代码开发逻辑" class="headerlink" title="代码开发逻辑"></a>代码开发逻辑</h2><ol>
<li>项目开发：把所有地址信息写在程序里</li>
</ol>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621114310743.png" alt="image-20200621114310743"></p>
<p>​    如果地址换了，则需要修改程序，</p>
<ol>
<li>使用一个配置文件，程序运行时要通过文件读取相关的配置操作</li>
</ol>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621114547669.png" alt="image-20200621114547669"></p>
<p>如果此时要更改一些配置，只需要更改配置文件即可（可以不修改源代码）</p>
<p>当使用配置文件后，</p>
<p>代码维护方便了，但开发还不是很方便；配置文件很难去修改，并且会造成一个项目的配置文件非常多；</p>
<p>JDK提供了一种做法把配置写进代码里，但用注解来控制；这样可以减少配置文件；</p>
<p>主要关注三个JDK内置的注解：<code>@override</code>,<code>@Deprecated</code>,<code>@SuppressWarnnings</code></p>
<h2 id="1-准确覆写-override"><a href="#1-准确覆写-override" class="headerlink" title="1. 准确覆写  @override"></a>1. 准确覆写  <code>@override</code></h2><p>覆写：子类定义了与父类方法名称相同、参数类型及个数、返回值类型相同的方法的时候叫做覆写；被覆写方法不能拥有比父类更为严格的访问控制权限</p>
<blockquote>
<p>范例：观察问题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">写了一个类里的toString写错成：tostring；导致没有报错；</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="comment">// 写了一个类里的toString写错成：tostring；导致没有报错；</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">tostring</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"是个人"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="keyword">new</span> Person());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>现在为了保证覆写方法严格，可以使用一个注解（<code>@override</code>）来检测是否覆写成功</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">tostring</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"是个人"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>报错：The method tostring() of type Person must override or implement a supertype method</p>
</blockquote>
<h2 id="2-过期声明-Deprecated"><a href="#2-过期声明-Deprecated" class="headerlink" title="2. 过期声明  @Deprecated"></a>2. 过期声明  <code>@Deprecated</code></h2><p>如果一个程序类废止了，不能直接删除，加一个过期注解；</p>
<blockquote>
<p>范例：<del>观察过期操作</del></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">	<span class="meta">@Deprecated</span>	<span class="comment">// 表明该方法过期了，但用了也没事；</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Person person = <span class="keyword">new</span> Person();	<span class="comment">//明确表示出过期</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621120942170.png" alt="image-20200621120942170"></p>
</blockquote>
<p>仅仅警告不建议在使用；</p>
<h2 id="3-压制警告-SuppressWarnnings"><a href="#3-压制警告-SuppressWarnnings" class="headerlink" title="3. 压制警告  @SuppressWarnnings"></a>3. 压制警告  <code>@SuppressWarnnings</code></h2><p>调用某些操作会出现警告信息。警告不代表有错误；但用压制警告可以不再提示警告</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621121407749.png" alt="image-20200621121407749"></p>
<p>这里可以给主方法main加l也可以给person加；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621121547031.png" alt="image-20200621121547031"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="meta">@SuppressWarnings</span>(&#123; <span class="string">"rawtypes"</span>, <span class="string">"unused"</span> &#125;)	<span class="comment">//	压制警告</span></span><br><span class="line">		Person person = <span class="keyword">new</span> Person();	<span class="comment">//明确表示出过期</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="接口定义加强"><a href="#接口定义加强" class="headerlink" title="接口定义加强"></a>接口定义加强</h1><p>分析实际问题：</p>
<blockquote>
<p>接口使用问题</p>
</blockquote>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621122311938.png" alt="image-20200621122311938"></p>
<p>造成此种情况就在于接口只是个方法的声明，而没有具体方法实现；</p>
<ul>
<li>使用default来定义普通方法，通过对象调用</li>
<li>使用static来定义静态方法，通过接口名来使用</li>
</ul>
<blockquote>
<p>范例：定义普通方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">default</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span> </span>&#123;	<span class="comment">//	追加了普通方法体</span></span><br><span class="line">		System.out.println(<span class="string">"Hello world!!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span> <span class="keyword">implements</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">"你开门一直可以的"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		IMessage msg = <span class="keyword">new</span> Message();</span><br><span class="line">		msg.print();</span><br><span class="line">		msg.fun();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>范例：追加静态方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">default</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span> </span>&#123;	<span class="comment">//	追加了普通方法体</span></span><br><span class="line">		System.out.println(<span class="string">"Hello world!!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 可以由类名称直接调用</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> IMessage <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Message();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span> <span class="keyword">implements</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">"你开门一直可以的"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		IMessage msg = <span class="keyword">new</span> Message();</span><br><span class="line">		msg.print();</span><br><span class="line">		msg.fun();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</blockquote>
<p>更像抽象类了。但可以多继承；这是一种挽救设计</p>
<h1 id="函数式编程"><a href="#函数式编程" class="headerlink" title="函数式编程"></a>函数式编程</h1><h2 id="1-lambda表达式"><a href="#1-lambda表达式" class="headerlink" title="1. lambda表达式"></a>1. lambda表达式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		IMessage msg = <span class="keyword">new</span> IMessage() &#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				System.out.println(<span class="string">"Hello world!!"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		msg.print();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>面对对象方法太完整了；使用时需要写的太多了。而使用lambda表达式就可以写出一个简单的救急函数；</p>
<p>函数式编程模型,同样的效果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		IMessage msg = ()-&gt;System.out.println(<span class="string">"hello world!"</span>);</span><br><span class="line">		msg.print();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>面对对象的要求在于结构必须非常完整</p>
<p>但是要想使用函数式编程，接口方法只能有一个；</p>
<p>所以可以加一个注解：<code>@FunctionalInterface</code>，加上这个注解的接口的方法就不能是两个及两个以上；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IMessage</span></span>&#123;	<span class="comment">//报错</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Invalid '@FunctionalInterface' annotation; IMessage is not a functional interface</span></span><br></pre></td></tr></table></figure>
<p><code>()-&gt;</code>括号里写参数</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621124716729.png" alt="image-20200621124716729"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">IMessage msg1 = ()-&gt;System.out.println(<span class="string">"hello world!"</span>);	<span class="comment">//	单行语句</span></span><br><span class="line">IMessage msg2 = ()-&gt;&#123;	<span class="comment">// 多行语句</span></span><br><span class="line">    System.out.println(<span class="string">"hello world!"</span>);</span><br><span class="line">    System.out.println(<span class="string">"hello world!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果是返回，可以不写<code>return</code>直接写结果即可；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IMath</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		IMath msg = (x,y)-&gt;x+y;</span><br><span class="line">		System.out.println(msg.add(<span class="number">10</span>, <span class="number">20</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-方法引用"><a href="#2-方法引用" class="headerlink" title="2.方法引用"></a>2.方法引用</h2><p>数组、类有引用；</p>
<p>方法引用也就是别名；</p>
<ul>
<li>引用静态方法：<code>类名称 :: static方法名称</code></li>
<li>引用某个对象方法：<code>实例化对象 :: 普通方法</code></li>
<li>引用某个特定类的方法：<code>类名称 :: 普通方法</code></li>
</ul>
<blockquote>
<p>范例：引用静态方法：</p>
</blockquote>
<ul>
<li>在String类中有一个valueof()</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IUtil</span>&lt;<span class="title">P</span>,<span class="title">R</span>&gt;</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> R <span class="title">transfor</span><span class="params">(P p)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		IUtil&lt;Integer,String&gt; iu = String::valueOf;	<span class="comment">// 进行方法引用</span></span><br><span class="line">		String str = iu.transfor(<span class="number">1000</span>);</span><br><span class="line">		System.out.println(str.length());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>给函数起了个别名</p>
<blockquote>
<p>范例：引用某一个对象中的方法</p>
<ul>
<li>使用大写转换</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IUtil</span>&lt;<span class="title">R</span>&gt;</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> R <span class="title">transfor</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		IUtil&lt;String&gt; iu = <span class="string">"hello"</span>::toUpperCase;	<span class="comment">// 进行方法引用</span></span><br><span class="line">		System.out.println(iu.transfor());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*HELLO*/</span></span><br></pre></td></tr></table></figure>
<p>范例：引用类中的普通方法</p>
<ul>
<li>String类有一个compareTo</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IUtil</span>&lt;<span class="title">R</span>,<span class="title">P</span>&gt;</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> R <span class="title">transfor</span><span class="params">(P p1,P p2)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		IUtil&lt;Integer,String&gt; iu = String::compareTo;	<span class="comment">// 进行方法引用</span></span><br><span class="line">		System.out.println(iu.transfor(<span class="string">"H"</span>,<span class="string">"h"</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">-32</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p> 范例:引用构造方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Person [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IUtil</span>&lt;<span class="title">R</span>,<span class="title">FP</span>,<span class="title">SP</span>&gt;</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> R <span class="title">transfor</span><span class="params">(FP p1,SP p2)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		IUtil&lt;Person,String,Integer&gt; iu = Person::<span class="keyword">new</span>;	<span class="comment">// 进行方法引用</span></span><br><span class="line">		System.out.println(iu.transfor(<span class="string">"张三"</span>,<span class="number">20</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Person [name=张三, age=20]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="3-内建函数式接口"><a href="#3-内建函数式接口" class="headerlink" title="3. 内建函数式接口"></a>3. 内建函数式接口</h2><p>lambda的核心在于函数式接口；函数式接口的核心在于只有一个方法；在函数式编程里面只需要有四类接口（<code>java.util.function</code>）</p>
<ul>
<li><p>功能型的函数式接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Function</span>&lt;<span class="title">T</span>,<span class="title">R</span>&gt; </span>&#123;<span class="function"><span class="keyword">public</span> R <span class="title">apply</span><span class="params">(T t)</span></span>;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>供给型函数式接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Supplier</span>&lt;<span class="title">T</span>&gt; </span>&#123;<span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">()</span></span>;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>消费型函数式接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Consumer</span>&lt;<span class="title">T</span>&gt; </span>&#123;<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(T t)</span></span>;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>断言型函数式接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Predicate</span>&lt;<span class="title">T</span>&gt; </span>&#123;<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">test</span><span class="params">(T t)</span></span>;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>范例：功能型的函数式接口</p>
<ul>
<li>String.valueOf</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.function.Function;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Function&lt;Integer,String&gt; fun = String::valueOf;</span><br><span class="line">		System.out.println(fun.apply(<span class="number">1000</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>输入一个数据对数据处理后再进行输出；</p>
<p>如果知道输入的是 <code>Integer</code> 可以用 <code>IntFunction&lt;R&gt;</code>泛型仅表示一个返回值；</p>
<blockquote>
<p>范例：扩展的Function接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.function.IntFunction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		IntFunction&lt;String&gt; fun = String::valueOf;</span><br><span class="line">		System.out.println(fun.apply(<span class="number">1000</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>范例：使用供给型函数式接口</p>
<ul>
<li>“hello”.toUpperCase()</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.function.Supplier;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Supplier&lt;String&gt; sup = <span class="string">"Hello"</span>::toUpperCase;</span><br><span class="line">		System.out.println(sup.get());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>范例：消费型函数式接口</p>
<ul>
<li>System.out.println</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.function.Consumer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Consumer&lt;String&gt; fun = System.out::println;</span><br><span class="line">		System.out.println(fun.accept(<span class="string">"Hello world"</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>范例：断言型函数式接口</p>
<ul>
<li>isempty()</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.function.Predicate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Predicate&lt;String&gt; pre = <span class="string">"hello"</span>::startsWith;</span><br><span class="line">		System.out.println(pre.test(<span class="string">"he"</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="多线程编程"><a href="#多线程编程" class="headerlink" title="多线程编程"></a>多线程编程</h1><p>java的多线程编程是最大的特色</p>
<h2 id="1-进程与线程"><a href="#1-进程与线程" class="headerlink" title="1. 进程与线程"></a>1. 进程与线程</h2><p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621180328764.png" alt="image-20200621180328764"></p>
<p>线程启动所花费的时间一定是短的；进程一定要比线程慢；</p>
<p><strong>思考</strong>：那里体现了多线程的应用</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621180930045.png" alt="image-20200621180930045"></p>
<p>所谓的高并发指的就是访问的线程量暴高；高并发最直白的问题是：服务器的内存不够用了，无法处理过多的线程（用户）</p>
<p>线程实在进程基础上的一个划分。没有进程就没有线程；进程消失了，线程也就消失了；</p>
<h2 id="2-继承Thread类实现多线程"><a href="#2-继承Thread类实现多线程" class="headerlink" title="2. 继承Thread类实现多线程"></a>2. 继承Thread类实现多线程</h2><p>实现多线程的前提是：在一个执行主类里；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621181501789.png" alt="image-20200621181501789"></p>
<p>有两种途径实现多线程主类：</p>
<ul>
<li>继承Thread类</li>
<li>【推荐】实现Runnable、Callable接口</li>
</ul>
<p><code>java.lang.Thread</code>是核心类； 若想定义一个线程的主类，直接的方法就是继承Thread类，而后覆写其中的<code>run()</code>方法（相当于线程中的主方法）。</p>
<blockquote>
<p>范例：定义线程主体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;	<span class="comment">//线程主体类</span></span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyThread</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;	<span class="comment">//	所有的线程从此处开始执行；</span></span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">super</span>.run();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x=<span class="number">0</span>;x&lt;<span class="number">10</span>;x++) &#123;</span><br><span class="line">			System.out.println(<span class="keyword">this</span>.title+<span class="string">", x = "</span>+x);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>一般认为有了主题类就产生对象，执行run方法；但这里不能直接调用run方法；</p>
<blockquote>
<p>范例：观察直接调用run方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyThread mt1 = <span class="keyword">new</span> MyThread(<span class="string">"线程A"</span>);</span><br><span class="line">		MyThread mt2 = <span class="keyword">new</span> MyThread(<span class="string">"线程B"</span>);</span><br><span class="line">		MyThread mt3 = <span class="keyword">new</span> MyThread(<span class="string">"线程C"</span>);</span><br><span class="line">		mt1.run();</span><br><span class="line">		mt2.run();</span><br><span class="line">		mt3.run();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">线程A, x = 0</span></span><br><span class="line"><span class="comment">线程A, x = 1</span></span><br><span class="line"><span class="comment">线程B, x = 0</span></span><br><span class="line"><span class="comment">线程B, x = 1</span></span><br><span class="line"><span class="comment">线程C, x = 0</span></span><br><span class="line"><span class="comment">线程C, x = 1</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>仅做了一个顺序打印，和多线程没有关系；多线程也是交替执行，不是各自执行各自的；</p>
</blockquote>
<p>正确启动多线程的方式是Thread类中的start方法</p>
<ul>
<li>启动多线程：<code>public void start()</code></li>
</ul>
<blockquote>
<p>范例：正确启动多线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyThread mt1 = <span class="keyword">new</span> MyThread(<span class="string">"线程A"</span>);</span><br><span class="line">		MyThread mt2 = <span class="keyword">new</span> MyThread(<span class="string">"线程B"</span>);</span><br><span class="line">		MyThread mt3 = <span class="keyword">new</span> MyThread(<span class="string">"线程C"</span>);</span><br><span class="line">		mt1.start();</span><br><span class="line">		mt2.start();</span><br><span class="line">		mt3.start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">线程B, x = 0</span></span><br><span class="line"><span class="comment">线程B, x = 1</span></span><br><span class="line"><span class="comment">线程C, x = 0</span></span><br><span class="line"><span class="comment">线程C, x = 1</span></span><br><span class="line"><span class="comment">线程C, x = 2</span></span><br><span class="line"><span class="comment">线程A, x = 0</span></span><br><span class="line"><span class="comment">线程B, x = 2</span></span><br><span class="line"><span class="comment">线程A, x = 1</span></span><br><span class="line"><span class="comment">线程A, x = 2</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>此时执行代码发现所有的线程对象变为了交替执行；</p>
</blockquote>
<p>为什么要这样做而不是直接执行start？</p>
<p>​    这里它查看了源代码：</p>
<ul>
<li>每一个线程只能启动一次</li>
</ul>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621184205832.png" alt="image-20200621184205832"></p>
<h2 id="3-使用Runable接口实现多线程"><a href="#3-使用Runable接口实现多线程" class="headerlink" title="3. 使用Runable接口实现多线程"></a>3. 使用Runable接口实现多线程</h2><p>Thread类的核心功能是进行线程启动，但是如果一个类直接继承Thread类所造成的问题就是单继承局限；</p>
<p>另一种实现模式：Runnable接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同时也存在一个run方法和Thread一样得</p>
<blockquote>
<p>范例：利用Runnable定义线程主体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyThread</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x&lt;<span class="number">10</span>;x++) &#123;</span><br><span class="line">			System.out.println(<span class="keyword">this</span>.title + <span class="string">", x="</span>+x);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>但是此时没有了start类，解决方法是Thread类里有一个构造方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Thread</span><span class="params">(Runnable target)</span></span></span><br></pre></td></tr></table></figure>
<p>可以接收Runnable的接口对象，也就是可以通过Thread去启动它；</p>
<blockquote>
<p>范例：启动多线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyThread mt1 = <span class="keyword">new</span> MyThread(<span class="string">"线程A"</span>);</span><br><span class="line">		MyThread mt2 = <span class="keyword">new</span> MyThread(<span class="string">"线程B"</span>);</span><br><span class="line">		MyThread mt3 = <span class="keyword">new</span> MyThread(<span class="string">"线程C"</span>);</span><br><span class="line">		<span class="keyword">new</span> Thread(mt1).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt2).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt3).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">线程A, x=0</span></span><br><span class="line"><span class="comment">线程C, x=0</span></span><br><span class="line"><span class="comment">线程B, x=0</span></span><br><span class="line"><span class="comment">线程C, x=1</span></span><br><span class="line"><span class="comment">线程C, x=2</span></span><br><span class="line"><span class="comment">线程B, x=1</span></span><br><span class="line"><span class="comment">线程A, x=1</span></span><br><span class="line"><span class="comment">线程B, x=2</span></span><br><span class="line"><span class="comment">线程C, x=3</span></span><br><span class="line"><span class="comment">线程B, x=3</span></span><br><span class="line"><span class="comment">线程A, x=2</span></span><br><span class="line"><span class="comment">线程A, x=3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>这时就启动了多线程，多线程的启动永远都是THread类里的start方法；</p>
<p>也可以启动多个：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyThread mt1 = <span class="keyword">new</span> MyThread(<span class="string">"线程A"</span>);</span><br><span class="line">		MyThread mt2 = <span class="keyword">new</span> MyThread(<span class="string">"线程B"</span>);</span><br><span class="line">		MyThread mt3 = <span class="keyword">new</span> MyThread(<span class="string">"线程C"</span>);</span><br><span class="line">		<span class="keyword">new</span> Thread(mt1).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt1).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">线程A, x=0</span></span><br><span class="line"><span class="comment">线程A, x=0</span></span><br><span class="line"><span class="comment">线程A, x=1</span></span><br><span class="line"><span class="comment">线程A, x=2</span></span><br><span class="line"><span class="comment">线程A, x=1</span></span><br><span class="line"><span class="comment">线程A, x=3</span></span><br><span class="line"><span class="comment">线程A, x=2</span></span><br><span class="line"><span class="comment">线程A, x=3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>此时的Runnable接口对象也可以采用匿名内部类或lambda表达式来定义</p>
<blockquote>
<p>范例：通过匿名内部类定义操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">				System.out.println(<span class="string">"Hello world!!"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>范例：使用lambda</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">new</span> Thread(()-&gt;System.out.println(<span class="string">"Hello world"</span>)).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="4-Thread和Runnable的区别"><a href="#4-Thread和Runnable的区别" class="headerlink" title="4. Thread和Runnable的区别"></a>4. Thread和Runnable的区别</h2><p>使用形式上来说Runable可以实现多继承；</p>
<p>但这两个都有一定的联系；</p>
<p>首先观察Thread类的继承定义形式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread</span> <span class="keyword">extends</span> <span class="title">Object</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></span><br></pre></td></tr></table></figure>
<p>翻开源代码看到Thread实现了Runnable中的<code>run()</code>方法，他写的是：如果targe不为空就运行这个target</p>
<p>这个target在Thread类的构造时赋值进来的。Thread初始化时把它作为属性保存了起来；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621212319879.png" alt="image-20200621212319879"></p>
<p>所以在多线程的处理上使用的就是代理设计模式；</p>
<p>实际上开发过程中Runnable还有一个特点：使用Runnable实现的多线程的程序类可以更好地描述出数据的共享的概念；（并不是说Thread不能）</p>
<p>目标只是希望产生若干个线程进行同一数据的处理操作</p>
<blockquote>
<p>范例：使用Thread实现数据操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> ticket = <span class="number">10</span>;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">10</span>; x++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">this</span>.ticket&gt;<span class="number">0</span>) &#123;</span><br><span class="line">				System.out.println(<span class="string">"卖票，票剩 = "</span>+ <span class="keyword">this</span>.ticket--);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">new</span> MyThread().start();</span><br><span class="line">		<span class="keyword">new</span> MyThread().start();</span><br><span class="line">		<span class="keyword">new</span> MyThread().start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">卖票，票剩 = 10</span></span><br><span class="line"><span class="comment">卖票，票剩 = 9</span></span><br><span class="line"><span class="comment">卖票，票剩 = 8</span></span><br><span class="line"><span class="comment">卖票，票剩 = 7</span></span><br><span class="line"><span class="comment">卖票，票剩 = 6</span></span><br><span class="line"><span class="comment">卖票，票剩 = 5</span></span><br><span class="line"><span class="comment">卖票，票剩 = 4</span></span><br><span class="line"><span class="comment">卖票，票剩 = 3</span></span><br><span class="line"><span class="comment">卖票，票剩 = 2</span></span><br><span class="line"><span class="comment">卖票，票剩 = 1</span></span><br><span class="line"><span class="comment">卖票，票剩 = 10</span></span><br><span class="line"><span class="comment">卖票，票剩 = 10</span></span><br><span class="line"><span class="comment">卖票，票剩 = 9</span></span><br><span class="line"><span class="comment">卖票，票剩 = 9</span></span><br><span class="line"><span class="comment">卖票，票剩 = 8</span></span><br><span class="line"><span class="comment">卖票，票剩 = 8</span></span><br><span class="line"><span class="comment">卖票，票剩 = 7</span></span><br><span class="line"><span class="comment">卖票，票剩 = 7</span></span><br><span class="line"><span class="comment">卖票，票剩 = 6</span></span><br><span class="line"><span class="comment">卖票，票剩 = 5</span></span><br><span class="line"><span class="comment">卖票，票剩 = 6</span></span><br><span class="line"><span class="comment">卖票，票剩 = 4</span></span><br><span class="line"><span class="comment">卖票，票剩 = 5</span></span><br><span class="line"><span class="comment">卖票，票剩 = 3</span></span><br><span class="line"><span class="comment">卖票，票剩 = 2</span></span><br><span class="line"><span class="comment">卖票，票剩 = 1</span></span><br><span class="line"><span class="comment">卖票，票剩 = 4</span></span><br><span class="line"><span class="comment">卖票，票剩 = 3</span></span><br><span class="line"><span class="comment">卖票，票剩 = 2</span></span><br><span class="line"><span class="comment">卖票，票剩 = 1</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>各自卖各自的10张票</p>
<p>范例：用Thraed实现数据共享</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyThread mt = <span class="keyword">new</span> MyThread();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">卖票，票剩 = 10</span></span><br><span class="line"><span class="comment">卖票，票剩 = 9</span></span><br><span class="line"><span class="comment">卖票，票剩 = 7</span></span><br><span class="line"><span class="comment">卖票，票剩 = 8</span></span><br><span class="line"><span class="comment">卖票，票剩 = 5</span></span><br><span class="line"><span class="comment">卖票，票剩 = 6</span></span><br><span class="line"><span class="comment">卖票，票剩 = 3</span></span><br><span class="line"><span class="comment">卖票，票剩 = 4</span></span><br><span class="line"><span class="comment">卖票，票剩 = 1</span></span><br><span class="line"><span class="comment">卖票，票剩 = 2</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>它把同一堆内存空间（MyThread对象）传给了一个新的Thread对象让其各自start；但是这样有点多此一举，因为MyThread也有继承自Thread里的start方法；它用了别人的</p>
</blockquote>
<p>此时的MyThread对象各自有各自的空间就像图中上面的这个；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621213423162.png" alt="image-20200621213423162"></p>
<blockquote>
<p>范例：实现Runnable实现数据共享</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> ticket = <span class="number">10</span>;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">10</span>; x++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">this</span>.ticket&gt;<span class="number">0</span>) &#123;</span><br><span class="line">				System.out.println(<span class="string">"卖票，票剩 = "</span>+ <span class="keyword">this</span>.ticket--);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyThread mt = <span class="keyword">new</span> MyThread();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">卖票，票剩 = 10</span></span><br><span class="line"><span class="comment">卖票，票剩 = 8</span></span><br><span class="line"><span class="comment">卖票，票剩 = 7</span></span><br><span class="line"><span class="comment">卖票，票剩 = 6</span></span><br><span class="line"><span class="comment">卖票，票剩 = 5</span></span><br><span class="line"><span class="comment">卖票，票剩 = 4</span></span><br><span class="line"><span class="comment">卖票，票剩 = 3</span></span><br><span class="line"><span class="comment">卖票，票剩 = 2</span></span><br><span class="line"><span class="comment">卖票，票剩 = 1</span></span><br><span class="line"><span class="comment">卖票，票剩 = 9</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>此时Runnable是没有<code>start()</code>方法的它传给<code>Thread</code>类是合适的</p>
</blockquote>
<h2 id="5-线程运行状态"><a href="#5-线程运行状态" class="headerlink" title="5. 线程运行状态"></a>5. 线程运行状态</h2><p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621214512575.png" alt="image-20200621214512575"></p>
<p>调用了start不是立即执行，而是就绪，等待资源分配给了线程后才进入运行资源；</p>
<h2 id="6-通过Callable实现多线程"><a href="#6-通过Callable实现多线程" class="headerlink" title="6. 通过Callable实现多线程"></a>6. 通过Callable实现多线程</h2><p>JDK1.5加入了一个新的开发包：<code>java.util.concurrent</code>,主要进行高性能开发使用的，提供高并发操作才会用到的类。在这个包里面定义有一个新接口<code>Callable</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Callable</span>&lt;<span class="title">V</span>&gt;</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> V <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Runnable虽也是线程主方法，但是它么有返回值；很多时候需要返回值时就可以用Callable</p>
<blockquote>
<p>范例：使用Callable定义线程主体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">String</span>&gt;</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">10</span>; x++) &#123;</span><br><span class="line">			System.out.println(<span class="string">"卖票，x = "</span>+ x);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"票卖完了"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>Thread貌似与Callable没啥关系但通过分析得出以下的关系图</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200621220421505.png" alt="image-20200621220421505"></p>
<blockquote>
<p>范例：启动Callable多线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException </span>&#123;</span><br><span class="line">		FutureTask&lt;String&gt; task = <span class="keyword">new</span> FutureTask&lt;String&gt;(<span class="keyword">new</span> MyThread());</span><br><span class="line">		<span class="keyword">new</span> Thread(task).start();</span><br><span class="line">		System.out.println(task.get());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">卖票，x = 0</span></span><br><span class="line"><span class="comment">卖票，x = 1</span></span><br><span class="line"><span class="comment">卖票，x = 2</span></span><br><span class="line"><span class="comment">卖票，x = 3</span></span><br><span class="line"><span class="comment">卖票，x = 4</span></span><br><span class="line"><span class="comment">卖票，x = 5</span></span><br><span class="line"><span class="comment">卖票，x = 6</span></span><br><span class="line"><span class="comment">卖票，x = 7</span></span><br><span class="line"><span class="comment">卖票，x = 8</span></span><br><span class="line"><span class="comment">卖票，x = 9</span></span><br><span class="line"><span class="comment">票卖完了</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="多线程常用操作方法"><a href="#多线程常用操作方法" class="headerlink" title="多线程常用操作方法"></a>多线程常用操作方法</h1><p>多线程的主要操作方法都在Thread里面。重点掌握核心几个方法就可以了；</p>
<h2 id="1-线程的命名及取得"><a href="#1-线程的命名及取得" class="headerlink" title="1. 线程的命名及取得"></a>1. 线程的命名及取得</h2><p>Thread类里提供了如下的名称操作方法；</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:center">方法</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center"><code>public Thread(Runnable target, String name)</code></td>
<td style="text-align:center">构造</td>
<td style="text-align:center">创建线程对象时设置好名字</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center"><code>public final void setName(String name)</code></td>
<td style="text-align:center">普通</td>
<td style="text-align:center">设置线程名字</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center"><code>public final String getName()</code></td>
<td style="text-align:center">普通</td>
<td style="text-align:center">取得线程名字</td>
</tr>
</tbody>
</table>
</div>
<p>如果想要取得线程的对象，在Thread类有一个方法：</p>
<ul>
<li>取得当前线程对象：<code>public static Thread currentThread()</code>；</li>
</ul>
<blockquote>
<p>范例：观察线程名称的取得</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">4</span>; x++) &#123;</span><br><span class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">",x = "</span>+x);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyThread mt = <span class="keyword">new</span> MyThread();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt,<span class="string">"有名线程"</span>).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Thread-0,x = 0</span></span><br><span class="line"><span class="comment">Thread-0,x = 1</span></span><br><span class="line"><span class="comment">有名线程,x = 0</span></span><br><span class="line"><span class="comment">Thread-1,x = 0</span></span><br><span class="line"><span class="comment">有名线程,x = 1</span></span><br><span class="line"><span class="comment">Thread-0,x = 2</span></span><br><span class="line"><span class="comment">有名线程,x = 2</span></span><br><span class="line"><span class="comment">Thread-1,x = 1</span></span><br><span class="line"><span class="comment">Thread-1,x = 2</span></span><br><span class="line"><span class="comment">Thread-1,x = 3</span></span><br><span class="line"><span class="comment">有名线程,x = 3</span></span><br><span class="line"><span class="comment">Thread-0,x = 3</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>没有设置线程名字会自动分配一个；</p>
<p>范例：观察线程执行结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(Thread.currentThread().getName());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyThread mt = <span class="keyword">new</span> MyThread();</span><br><span class="line">		mt.run();	<span class="comment">// 通过对象调用run方法	main</span></span><br><span class="line">		<span class="keyword">new</span> Thread(mt).start();	<span class="comment">//没有名字通过线程调用	Thread-0</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">main</span></span><br><span class="line"><span class="comment">Thread-0</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>主方法就是一个线程；其他线程就是由主线程创建的</p>
</blockquote>
<h2 id="2-线程休眠"><a href="#2-线程休眠" class="headerlink" title="2. 线程休眠"></a>2. 线程休眠</h2><p>用来模拟延迟操作；</p>
<p>指的是让线程暂缓执行，等到了一定的时间再运行；</p>
<ul>
<li><p>方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sleep</span><span class="params">(<span class="keyword">long</span> millis)</span> <span class="keyword">throws</span> InterruptedException</span></span><br></pre></td></tr></table></figure>
<ul>
<li>休眠实现使用毫秒为单位</li>
</ul>
</li>
</ul>
<blockquote>
<p>范例：休眠操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">20</span>; x++) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">",x = "</span>+x);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>进入代码的顺序有差异，但他们的执行基本是并发执行</p>
</blockquote>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200622091300923.png" alt="image-20200622091300923"></p>
<h2 id="3-线程中断"><a href="#3-线程中断" class="headerlink" title="3. 线程中断"></a>3. 线程中断</h2><p>线程被打断一定是由其他线程完成的；Thread类里提供的中断执行处理方法：</p>
<ul>
<li>判断线程是否被中断：<code>public boolean isInterrupted()</code></li>
<li>中断线程执行：<code>public void interrupt()</code>;</li>
</ul>
<blockquote>
<p>范例：观察线程中断处理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Thread thread = <span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">			System.out.println(<span class="string">"我想睡觉"</span>);</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">10000</span>);</span><br><span class="line">				System.out.println(<span class="string">"睡够了！！"</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				System.out.println(<span class="string">"谁把我弄醒了"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		thread.start();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (!thread.isInterrupted()) &#123;</span><br><span class="line">			System.out.println(<span class="string">"打扰你睡眠"</span>);</span><br><span class="line">			thread.interrupt();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所有执行的线程都是可以被中断的；</p>
</blockquote>
<h2 id="4-线程强制执行"><a href="#4-线程强制执行" class="headerlink" title="4. 线程强制执行"></a>4. 线程强制执行</h2><p>线程强制执行是指当满足某些条件之后，某一线程对象将可以一直独占资源，一直到程序执行结束；</p>
<blockquote>
<p>范例：没有强制执行的程序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Thread thread = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">20</span>; x++) &#123;</span><br><span class="line">				System.out.println(Thread.currentThread().getName() + <span class="string">",x = "</span> + x);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;, <span class="string">"正常的线程"</span>);</span><br><span class="line">		thread.start();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">20</span>; x++) &#123;</span><br><span class="line">			System.out.println(<span class="string">"[霸道的Main线程] Number = "</span> + x);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 0</span></span><br><span class="line"><span class="comment">正常的线程,x = 0</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 1</span></span><br><span class="line"><span class="comment">正常的线程,x = 1</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 2</span></span><br><span class="line"><span class="comment">正常的线程,x = 2</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 3</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 4</span></span><br><span class="line"><span class="comment">正常的线程,x = 3</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 5</span></span><br><span class="line"><span class="comment">正常的线程,x = 4</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 6</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 7</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 8</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 9</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 10</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 11</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 12</span></span><br><span class="line"><span class="comment">正常的线程,x = 5</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 13</span></span><br><span class="line"><span class="comment">正常的线程,x = 6</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 14</span></span><br><span class="line"><span class="comment">正常的线程,x = 7</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 15</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 16</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 17</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 18</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 19</span></span><br><span class="line"><span class="comment">正常的线程,x = 8</span></span><br><span class="line"><span class="comment">正常的线程,x = 9</span></span><br><span class="line"><span class="comment">正常的线程,x = 10</span></span><br><span class="line"><span class="comment">正常的线程,x = 11</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>强制执行的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">join</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>范例：强制执行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Thread MainThread = Thread.currentThread();	<span class="comment">// 获得主线程</span></span><br><span class="line">		Thread thread = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">20</span>; x++) &#123;</span><br><span class="line">				<span class="keyword">if</span> (x&gt;<span class="number">3</span>) &#123;</span><br><span class="line">					<span class="keyword">try</span> &#123;</span><br><span class="line">						MainThread.join();	<span class="comment">//	霸道线程独占！</span></span><br><span class="line">					&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">						<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(Thread.currentThread().getName() + <span class="string">",x = "</span> + x);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;, <span class="string">"正常的线程"</span>);</span><br><span class="line">		thread.start();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">20</span>; x++) &#123;</span><br><span class="line">			System.out.println(<span class="string">"[霸道的Main线程] Number = "</span> + x);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 0</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 1</span></span><br><span class="line"><span class="comment">正常的线程,x = 0</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 2</span></span><br><span class="line"><span class="comment">正常的线程,x = 1</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 3</span></span><br><span class="line"><span class="comment">正常的线程,x = 2</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 4</span></span><br><span class="line"><span class="comment">正常的线程,x = 3</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 5</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 6</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 7</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 8</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 9</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 10</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 11</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 12</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 13</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 14</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 15</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 16</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 17</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 18</span></span><br><span class="line"><span class="comment">[霸道的Main线程] Number = 19</span></span><br><span class="line"><span class="comment">正常的线程,x = 4</span></span><br><span class="line"><span class="comment">正常的线程,x = 5</span></span><br><span class="line"><span class="comment">正常的线程,x = 6</span></span><br><span class="line"><span class="comment">正常的线程,x = 7</span></span><br><span class="line"><span class="comment">正常的线程,x = 8</span></span><br><span class="line"><span class="comment">正常的线程,x = 9</span></span><br><span class="line"><span class="comment">正常的线程,x = 10</span></span><br><span class="line"><span class="comment">正常的线程,x = 11</span></span><br><span class="line"><span class="comment">正常的线程,x = 12</span></span><br><span class="line"><span class="comment">正常的线程,x = 13</span></span><br><span class="line"><span class="comment">正常的线程,x = 14</span></span><br><span class="line"><span class="comment">正常的线程,x = 15</span></span><br><span class="line"><span class="comment">正常的线程,x = 16</span></span><br><span class="line"><span class="comment">正常的线程,x = 17</span></span><br><span class="line"><span class="comment">正常的线程,x = 18</span></span><br><span class="line"><span class="comment">正常的线程,x = 19</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="5-线程礼让"><a href="#5-线程礼让" class="headerlink" title="5.线程礼让"></a>5.线程礼让</h2><p>先将资源让出去，让别的线程先完成；用Thread中的方法：</p>
<ul>
<li>礼让：<code>public static void yield()</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Thread MainThread = Thread.currentThread();	<span class="comment">// 获得主线程</span></span><br><span class="line">		Thread thread = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">20</span>; x++) &#123;</span><br><span class="line">				<span class="keyword">if</span> (x%<span class="number">3</span>==<span class="number">0</span>) &#123;</span><br><span class="line">					Thread.yield();</span><br><span class="line">					System.out.println(<span class="string">"#####子线程礼让执行"</span>);</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(Thread.currentThread().getName() + <span class="string">",x = "</span> + x);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;, <span class="string">"正常的线程"</span>);</span><br><span class="line">		thread.start();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">20</span>; x++) &#123;</span><br><span class="line">			System.out.println(<span class="string">"[霸道的Main线程] Number = "</span> + x);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>每一次礼让只会礼让当前一次的资源；可能就是一次程序轮转的机会；</p>
<h2 id="6-线程优先级"><a href="#6-线程优先级" class="headerlink" title="6. 线程优先级"></a>6. 线程优先级</h2><p>优先级越高越有可能先执行</p>
<p>Thread类里有以下优先级操作：</p>
<ul>
<li>设置优先级：<code>public final void setPriority(int newPriority)</code></li>
<li>取得优先级：<code>public final int getPriority()</code></li>
</ul>
<p>对于优先级设置的内容可以通过Thread类的几个常量来决定；</p>
<ul>
<li>最高优先级：<code>public static final int MAX_PRIORITY</code></li>
<li>中等优先级：<code>public static final int NORM_PRIORITY</code></li>
<li>最低优先级：<code>public static final int MIN_PRIORITY</code></li>
</ul>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200622094842671.png" alt="image-20200622094842671"></p>
<blockquote>
<p>范例：设置优先级</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">20</span>; x++) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(Thread.currentThread().getName() + <span class="string">",x = "</span> + x);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyThread mt = <span class="keyword">new</span> MyThread();</span><br><span class="line">		Thread t1 = <span class="keyword">new</span> Thread(mt,<span class="string">"线程A"</span>);</span><br><span class="line">		Thread t2 = <span class="keyword">new</span> Thread(mt,<span class="string">"线程B"</span>);</span><br><span class="line">		Thread t3 = <span class="keyword">new</span> Thread(mt,<span class="string">"线程C"</span>);</span><br><span class="line">		t1.setPriority(Thread.MAX_PRIORITY);</span><br><span class="line">		t2.setPriority(Thread.MIN_PRIORITY);</span><br><span class="line">		t3.setPriority(Thread.NORM_PRIORITY);</span><br><span class="line">		t1.start();</span><br><span class="line">		t2.start();</span><br><span class="line">		t3.start();</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>主方法是一个线程，那么主线程的优先级可以这么得到：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		System.out.println(Thread.currentThread().getPriority());</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 5	中等优先级</span></span><br></pre></td></tr></table></figure>
<h1 id="线程的同步与死锁"><a href="#线程的同步与死锁" class="headerlink" title="线程的同步与死锁"></a>线程的同步与死锁</h1><h2 id="1-同步问题的引出"><a href="#1-同步问题的引出" class="headerlink" title="1.同步问题的引出"></a>1.同步问题的引出</h2><p>编写一个卖票操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> ticket = <span class="number">10</span>;	<span class="comment">//总票数</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">this</span>.ticket&gt;<span class="number">0</span>) &#123;</span><br><span class="line">				System.out.println(Thread.currentThread().getName()+<span class="string">",剩余票数"</span>+<span class="keyword">this</span>.ticket--);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				System.out.println(<span class="string">"**票卖光了**"</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyThread mt = <span class="keyword">new</span> MyThread();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt,<span class="string">"票贩子A"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt,<span class="string">"票贩子B"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt,<span class="string">"票贩子C"</span>).start();</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>三个票贩子卖十张票；看似没有问题，但这是有问题的，加入延迟操作来查看一下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> ticket = <span class="number">10</span>;	<span class="comment">//总票数</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">this</span>.ticket&gt;<span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					Thread.sleep(<span class="number">100</span>);	<span class="comment">//	模拟网络延迟</span></span><br><span class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(Thread.currentThread().getName()+<span class="string">",剩余票数"</span>+<span class="keyword">this</span>.ticket--);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				System.out.println(<span class="string">"**票卖光了**"</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyThread mt = <span class="keyword">new</span> MyThread();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt,<span class="string">"票贩子A"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt,<span class="string">"票贩子B"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt,<span class="string">"票贩子C"</span>).start();</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">票贩子C,剩余票数10</span></span><br><span class="line"><span class="comment">票贩子B,剩余票数9</span></span><br><span class="line"><span class="comment">票贩子A,剩余票数8</span></span><br><span class="line"><span class="comment">票贩子C,剩余票数7</span></span><br><span class="line"><span class="comment">票贩子B,剩余票数6</span></span><br><span class="line"><span class="comment">票贩子A,剩余票数5</span></span><br><span class="line"><span class="comment">票贩子C,剩余票数4</span></span><br><span class="line"><span class="comment">票贩子B,剩余票数3</span></span><br><span class="line"><span class="comment">票贩子A,剩余票数2</span></span><br><span class="line"><span class="comment">票贩子C,剩余票数1</span></span><br><span class="line"><span class="comment">**票卖光了**</span></span><br><span class="line"><span class="comment">票贩子B,剩余票数0</span></span><br><span class="line"><span class="comment">**票卖光了**</span></span><br><span class="line"><span class="comment">票贩子A,剩余票数-1</span></span><br><span class="line"><span class="comment">**票卖光了**</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200622101408070.png" alt="image-20200622101408070"></p>
<h2 id="2-线程同步处理"><a href="#2-线程同步处理" class="headerlink" title="2. 线程同步处理"></a>2. 线程同步处理</h2><p>同步问题的解决关键是锁：当一个线程执行操作的时候，其他线程外边等着；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200622101611992.png" alt="image-20200622101611992"></p>
<p>要实现这把锁的功能，就要用<code>synchronized</code>关键字来实现，利用此关键字可以定义同步方法或者同步代码块；在同步代码块里只允许一个线程执行；</p>
<ol>
<li>利用同步代码块来执行</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(同步对象)&#123;</span><br><span class="line">	同步代码操作；    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>​    一般进行同步对象，处理的时候采用当前对象this进行同步；</p>
<blockquote>
<p>范例：利用同步代码块解决数据同步访问问题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> ticket = <span class="number">10</span>;	<span class="comment">//总票数</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">			<span class="keyword">synchronized</span>(<span class="keyword">this</span>) &#123;	<span class="comment">//	每一次只允许一个线程进行访问</span></span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">this</span>.ticket&gt;<span class="number">0</span>) &#123;</span><br><span class="line">					<span class="keyword">try</span> &#123;</span><br><span class="line">						Thread.sleep(<span class="number">50</span>);	<span class="comment">//	模拟网络延迟</span></span><br><span class="line">					&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">						<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">					System.out.println(Thread.currentThread().getName()+<span class="string">",剩余票数"</span>+<span class="keyword">this</span>.ticket--);</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					System.out.println(<span class="string">"**票卖光了**"</span>);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyThread mt = <span class="keyword">new</span> MyThread();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt,<span class="string">"票贩子A"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt,<span class="string">"票贩子B"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt,<span class="string">"票贩子C"</span>).start();</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>加入同步解决了上述的问题，但是一个线程运行的时间太长了；同步实际上造成了性能的降低；</p>
</blockquote>
<ol>
<li>利用同步方法解决：只需要在方法定义上使用<code>synchronized</code>;</li>
</ol>
<blockquote>
<p>范例：同步方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> ticket = <span class="number">10</span>;	<span class="comment">//总票数</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">boolean</span> <span class="title">sale</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.ticket&gt;<span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">50</span>);	<span class="comment">//	模拟网络延迟</span></span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">",剩余票数"</span>+<span class="keyword">this</span>.ticket--);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">"**票卖光了**"</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">while</span> (<span class="keyword">this</span>.sale()) &#123;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyThread mt = <span class="keyword">new</span> MyThread();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt,<span class="string">"票贩子A"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt,<span class="string">"票贩子B"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(mt,<span class="string">"票贩子C"</span>).start();</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>同步会造成性能的下降</p>
<h2 id="3-线程死锁"><a href="#3-线程死锁" class="headerlink" title="3. 线程死锁"></a>3. 线程死锁</h2><p>死锁是在进行多线程同步处理之中有可能产生的一种问题，所谓的死锁指的是若干个线程彼此等待对方释放资源的过程；</p>
<blockquote>
<p>范例：死锁展示</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wang</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">say</span><span class="params">(Li l)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"【王】要想过路先交钱！！"</span>);</span><br><span class="line">		l.get();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"【王】拿到钱了！！你过吧"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Li</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">say</span><span class="params">(Wang w)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"【李】先过路再交钱！！"</span>);</span><br><span class="line">		w.get();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"【李】过来了，还是先跑吧"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeadLock</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Wang w = <span class="keyword">new</span> Wang();</span><br><span class="line">	<span class="keyword">private</span> Li l = <span class="keyword">new</span> Li();</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">DeadLock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">new</span> Thread(<span class="keyword">this</span>).start();</span><br><span class="line">		l.say(w);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		w.say(l);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">new</span> DeadLock();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="综合实战：”生产者-消费者“模型"><a href="#综合实战：”生产者-消费者“模型" class="headerlink" title="综合实战：”生产者-消费者“模型"></a>综合实战：”生产者-消费者“模型</h1><p>流程如下：</p>
<ul>
<li>生产者负责信息内容的生产</li>
<li>每当生产者生产完一项完整的信息之后消费者要从这里取走信息；</li>
<li>如果生产者没有生产则消费者要等待他生产完成；</li>
<li>如果消费者没有及时对信息进行消费，则生产者应该等待消费完成之后再继续生产；</li>
</ul>
<h2 id="1-生产者消费者基本程序模型"><a href="#1-生产者消费者基本程序模型" class="headerlink" title="1. 生产者消费者基本程序模型"></a>1. 生产者消费者基本程序模型</h2><p>将生产者与消费者定义为两个独立的线程类对象，对于生产的数据可以使用如下的组成</p>
<ul>
<li>数据一：</li>
<li>数据二：</li>
</ul>
<p>两个线程独立，那么两个线程之间需要有一个存放数据的地方</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200622110829449.png" alt="image-20200622110829449"></p>
<blockquote>
<p>范例：实现基本结构</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producter</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Message msg ;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Producter</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>;x&lt;<span class="number">100</span>;x++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (x%<span class="number">2</span>==<span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">this</span>.msg.setTitle(<span class="string">"小王"</span>);</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					Thread.sleep(<span class="number">100</span>);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">this</span>.msg.setContent(<span class="string">"宇宙大帅哥"</span>);	</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">this</span>.msg.setTitle(<span class="string">"小李"</span>);</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					Thread.sleep(<span class="number">100</span>);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">this</span>.msg.setContent(<span class="string">"猥琐第一人"</span>);	</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Consumer</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Message msg ;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Consumer</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>;x&lt;<span class="number">100</span>;x++) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">10</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(<span class="keyword">this</span>.msg.getTitle()+<span class="string">" - "</span>+<span class="keyword">this</span>.msg.getContent());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="keyword">private</span> String content;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> content;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setContent</span><span class="params">(String content)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.content = content;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Message msg = <span class="keyword">new</span> Message();</span><br><span class="line">		<span class="keyword">new</span> Thread(<span class="keyword">new</span> Producter(msg)).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(<span class="keyword">new</span> Consumer(msg)).start();</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">小王 - null</span></span><br><span class="line"><span class="comment">小王 - null</span></span><br><span class="line"><span class="comment">小王 - null</span></span><br><span class="line"><span class="comment">小王 - null</span></span><br><span class="line"><span class="comment">小王 - null</span></span><br><span class="line"><span class="comment">小王 - null</span></span><br><span class="line"><span class="comment">小王 - 宇宙大帅哥</span></span><br><span class="line"><span class="comment">小李 - 宇宙大帅哥</span></span><br><span class="line"><span class="comment">小李 - 宇宙大帅哥</span></span><br><span class="line"><span class="comment">小李 - 宇宙大帅哥</span></span><br><span class="line"><span class="comment">小李 - 宇宙大帅哥</span></span><br><span class="line"><span class="comment">小李 - 宇宙大帅哥</span></span><br><span class="line"><span class="comment">小李 - 宇宙大帅哥</span></span><br><span class="line"><span class="comment">小李 - 宇宙大帅哥</span></span><br><span class="line"><span class="comment">小李 - 宇宙大帅哥</span></span><br><span class="line"><span class="comment">小李 - 宇宙大帅哥</span></span><br><span class="line"><span class="comment">小王 - 猥琐第一人</span></span><br><span class="line"><span class="comment">小王 - 猥琐第一人</span></span><br><span class="line"><span class="comment">小王 - 猥琐第一人</span></span><br><span class="line"><span class="comment">小王 - 猥琐第一人</span></span><br><span class="line"><span class="comment">小王 - 猥琐第一人</span></span><br><span class="line"><span class="comment">小王 - 猥琐第一人</span></span><br><span class="line"><span class="comment">小王 - 猥琐第一人</span></span><br><span class="line"><span class="comment">小王 - 猥琐第一人</span></span><br><span class="line"><span class="comment">小王 - 猥琐第一人</span></span><br><span class="line"><span class="comment">小李 - 宇宙大帅哥</span></span><br><span class="line"><span class="comment">小李 - 宇宙大帅哥</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>通过程序执行法系拿了两个问题：</p>
<ul>
<li>问题一：数据不同步；</li>
<li>问题二：应该生产一个取走一个，但发现有了重复生产，重复取出的问题</li>
</ul>
</blockquote>
<h2 id="2-解决消费者-生产者同步问题"><a href="#2-解决消费者-生产者同步问题" class="headerlink" title="2. 解决消费者-生产者同步问题"></a>2. 解决消费者-生产者同步问题</h2><p>最简单的解决同步使用<code>synchronized</code>关键字；</p>
<p>把数据的set与get的同步交给Message类来处理；</p>
<blockquote>
<p>范例：解决同步</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producter</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Message msg ;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Producter</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>;x&lt;<span class="number">100</span>;x++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (x%<span class="number">2</span>==<span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">this</span>.msg.set(<span class="string">"小王"</span>,<span class="string">"宇宙大帅哥"</span>,x);	</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">this</span>.msg.set(<span class="string">"小李"</span>,<span class="string">"猥琐第一人"</span>,x);	</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Consumer</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Message msg ;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Consumer</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>;x&lt;<span class="number">100</span>;x++) &#123;</span><br><span class="line">			System.out.println(<span class="string">"第"</span> + x + <span class="string">"次取值： "</span>+ <span class="keyword">this</span>.msg.get());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="keyword">private</span> String content;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;	<span class="comment">//	生产批号</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(String title,String content,<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Thread.sleep(<span class="number">100</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">this</span>.content = content;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> String <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Thread.sleep(<span class="number">10</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.title+<span class="string">" - "</span>+<span class="keyword">this</span>.content+<span class="string">" -id- "</span>+<span class="keyword">this</span>.id;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Message msg = <span class="keyword">new</span> Message();</span><br><span class="line">		<span class="keyword">new</span> Thread(<span class="keyword">new</span> Producter(msg)).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(<span class="keyword">new</span> Consumer(msg)).start();</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第0次取值： 小王 - 宇宙大帅哥 -id- 0</span></span><br><span class="line"><span class="comment">第1次取值： 小李 - 猥琐第一人 -id- 1</span></span><br><span class="line"><span class="comment">第2次取值： 小王 - 宇宙大帅哥 -id- 2</span></span><br><span class="line"><span class="comment">第3次取值： 小王 - 宇宙大帅哥 -id- 14</span></span><br><span class="line"><span class="comment">第4次取值： 小王 - 宇宙大帅哥 -id- 28</span></span><br><span class="line"><span class="comment">第5次取值： 小李 - 猥琐第一人 -id- 33</span></span><br><span class="line"><span class="comment">第6次取值： 小李 - 猥琐第一人 -id- 37</span></span><br><span class="line"><span class="comment">第7次取值： 小王 - 宇宙大帅哥 -id- 40</span></span><br><span class="line"><span class="comment">第8次取值： 小王 - 宇宙大帅哥 -id- 42</span></span><br><span class="line"><span class="comment">第9次取值： 小李 - 猥琐第一人 -id- 45</span></span><br><span class="line"><span class="comment">第10次取值： 小李 - 猥琐第一人 -id- 47</span></span><br><span class="line"><span class="comment">第11次取值： 小李 - 猥琐第一人 -id- 49</span></span><br><span class="line"><span class="comment">第12次取值： 小李 - 猥琐第一人 -id- 53</span></span><br><span class="line"><span class="comment">第13次取值： 小王 - 宇宙大帅哥 -id- 56</span></span><br><span class="line"><span class="comment">第14次取值： 小李 - 猥琐第一人 -id- 57</span></span><br><span class="line"><span class="comment">第15次取值： 小李 - 猥琐第一人 -id- 59</span></span><br><span class="line"><span class="comment">第16次取值： 小王 - 宇宙大帅哥 -id- 62</span></span><br><span class="line"><span class="comment">第17次取值： 小王 - 宇宙大帅哥 -id- 64</span></span><br><span class="line"><span class="comment">第18次取值： 小李 - 猥琐第一人 -id- 65</span></span><br><span class="line"><span class="comment">第19次取值： 小王 - 宇宙大帅哥 -id- 66</span></span><br><span class="line"><span class="comment">第20次取值： 小王 - 宇宙大帅哥 -id- 68</span></span><br><span class="line"><span class="comment">第21次取值： 小李 - 猥琐第一人 -id- 69</span></span><br><span class="line"><span class="comment">第22次取值： 小王 - 宇宙大帅哥 -id- 70</span></span><br><span class="line"><span class="comment">第23次取值： 小李 - 猥琐第一人 -id- 71</span></span><br><span class="line"><span class="comment">第24次取值： 小王 - 宇宙大帅哥 -id- 78</span></span><br><span class="line"><span class="comment">第25次取值： 小王 - 宇宙大帅哥 -id- 84</span></span><br><span class="line"><span class="comment">第26次取值： 小李 - 猥琐第一人 -id- 85</span></span><br><span class="line"><span class="comment">第27次取值： 小李 - 猥琐第一人 -id- 87</span></span><br><span class="line"><span class="comment">第28次取值： 小王 - 宇宙大帅哥 -id- 88</span></span><br><span class="line"><span class="comment">第29次取值： 小李 - 猥琐第一人 -id- 89</span></span><br><span class="line"><span class="comment">第30次取值： 小李 - 猥琐第一人 -id- 91</span></span><br><span class="line"><span class="comment">第31次取值： 小王 - 宇宙大帅哥 -id- 92</span></span><br><span class="line"><span class="comment">第32次取值： 小李 - 猥琐第一人 -id- 99</span></span><br><span class="line"><span class="comment">第33次取值： 小李 - 猥琐第一人 -id- 99</span></span><br><span class="line"><span class="comment">第34次取值： 小李 - 猥琐第一人 -id- 99</span></span><br><span class="line"><span class="comment">第35次取值： 小李 - 猥琐第一人 -id- 99</span></span><br><span class="line"><span class="comment">第36次取值： 小李 - 猥琐第一人 -id- 99</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>可以看出他们的信息同步了，但是生产者-消费者之间的协作还不够；存在消费者重复操作的问题；</p>
</blockquote>
<h2 id="3-利用Object类解决重复操作：线程等待与唤醒机制"><a href="#3-利用Object类解决重复操作：线程等待与唤醒机制" class="headerlink" title="3. 利用Object类解决重复操作：线程等待与唤醒机制"></a>3. 利用Object类解决重复操作：线程等待与唤醒机制</h2><p>等待与唤醒利用Object类中的三个方法：</p>
<ul>
<li><p>等待机制：</p>
<ul>
<li>死等：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">wait</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException</span></span><br></pre></td></tr></table></figure>
<ul>
<li>设置等待时间</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">wait</span><span class="params">(<span class="keyword">long</span> timeout)</span> <span class="keyword">throws</span> InterruptedException</span></span><br></pre></td></tr></table></figure>
<ul>
<li>设置等待时间：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">wait</span><span class="params">(<span class="keyword">long</span> timeout, <span class="keyword">int</span> nanos)</span> <span class="keyword">throws</span> InterruptedException</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>唤醒机制</p>
<ul>
<li>唤醒第一个等待进程</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">notify</span><span class="params">()</span>	<span class="comment">//	有若干个等待线程，唤醒其中的的第一个等待的；</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>唤醒全部等待线程</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">notify</span><span class="params">()</span>	<span class="comment">// 唤醒所有的等待进程</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>范例：修改Message类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producter</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Message msg ;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Producter</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>;x&lt;<span class="number">100</span>;x++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (x%<span class="number">2</span>==<span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">this</span>.msg.set(<span class="string">"小王"</span>,<span class="string">"宇宙大帅哥"</span>,x);	</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">this</span>.msg.set(<span class="string">"小李"</span>,<span class="string">"猥琐第一人"</span>,x);	</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Consumer</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Message msg ;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Consumer</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>;x&lt;<span class="number">100</span>;x++) &#123;</span><br><span class="line">			System.out.println(<span class="string">"第"</span> + x + <span class="string">"次取值： "</span>+ <span class="keyword">this</span>.msg.get());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="keyword">private</span> String content;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;	<span class="comment">//	生产批号</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">	<span class="comment">// flag = True 允许生产，不许消费</span></span><br><span class="line">	<span class="comment">// flag = False 允许消费不许生产</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(String title,String content,<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(!<span class="keyword">this</span>.flag) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="keyword">super</span>.wait();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Thread.sleep(<span class="number">100</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">this</span>.content = content;</span><br><span class="line">		<span class="keyword">this</span>.flag = <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">super</span>.notify();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> String <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.flag) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="keyword">super</span>.wait();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Thread.sleep(<span class="number">10</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.title+<span class="string">" - "</span>+<span class="keyword">this</span>.content+<span class="string">" -id- "</span>+<span class="keyword">this</span>.id;</span><br><span class="line">		&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.flag = <span class="keyword">true</span>;</span><br><span class="line">			<span class="keyword">super</span>.notify();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDeme</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Message msg = <span class="keyword">new</span> Message();</span><br><span class="line">		<span class="keyword">new</span> Thread(<span class="keyword">new</span> Producter(msg)).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(<span class="keyword">new</span> Consumer(msg)).start();</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第0次取值： 小王 - 宇宙大帅哥 -id- 0</span></span><br><span class="line"><span class="comment">第1次取值： 小李 - 猥琐第一人 -id- 1</span></span><br><span class="line"><span class="comment">第2次取值： 小王 - 宇宙大帅哥 -id- 2</span></span><br><span class="line"><span class="comment">第3次取值： 小李 - 猥琐第一人 -id- 3</span></span><br><span class="line"><span class="comment">第4次取值： 小王 - 宇宙大帅哥 -id- 4</span></span><br><span class="line"><span class="comment">第5次取值： 小李 - 猥琐第一人 -id- 5</span></span><br><span class="line"><span class="comment">第6次取值： 小王 - 宇宙大帅哥 -id- 6</span></span><br><span class="line"><span class="comment">第7次取值： 小李 - 猥琐第一人 -id- 7</span></span><br><span class="line"><span class="comment">第8次取值： 小王 - 宇宙大帅哥 -id- 8</span></span><br><span class="line"><span class="comment">第9次取值： 小李 - 猥琐第一人 -id- 9</span></span><br><span class="line"><span class="comment">第10次取值： 小王 - 宇宙大帅哥 -id- 10</span></span><br><span class="line"><span class="comment">第11次取值： 小李 - 猥琐第一人 -id- 11</span></span><br><span class="line"><span class="comment">第12次取值： 小王 - 宇宙大帅哥 -id- 12</span></span><br><span class="line"><span class="comment">第13次取值： 小李 - 猥琐第一人 -id- 13</span></span><br><span class="line"><span class="comment">第14次取值： 小王 - 宇宙大帅哥 -id- 14</span></span><br><span class="line"><span class="comment">第15次取值： 小李 - 猥琐第一人 -id- 15</span></span><br><span class="line"><span class="comment">第16次取值： 小王 - 宇宙大帅哥 -id- 16</span></span><br><span class="line"><span class="comment">第17次取值： 小李 - 猥琐第一人 -id- 17</span></span><br><span class="line"><span class="comment">第18次取值： 小王 - 宇宙大帅哥 -id- 18</span></span><br><span class="line"><span class="comment">第19次取值： 小李 - 猥琐第一人 -id- 19</span></span><br><span class="line"><span class="comment">第20次取值： 小王 - 宇宙大帅哥 -id- 20</span></span><br><span class="line"><span class="comment">第21次取值： 小李 - 猥琐第一人 -id- 21</span></span><br><span class="line"><span class="comment">第22次取值： 小王 - 宇宙大帅哥 -id- 22</span></span><br><span class="line"><span class="comment">第23次取值： 小李 - 猥琐第一人 -id- 23</span></span><br><span class="line"><span class="comment">第24次取值： 小王 - 宇宙大帅哥 -id- 24</span></span><br><span class="line"><span class="comment">第25次取值： 小李 - 猥琐第一人 -id- 25</span></span><br><span class="line"><span class="comment">第26次取值： 小王 - 宇宙大帅哥 -id- 26</span></span><br><span class="line"><span class="comment">第27次取值： 小李 - 猥琐第一人 -id- 27</span></span><br><span class="line"><span class="comment">第28次取值： 小王 - 宇宙大帅哥 -id- 28</span></span><br><span class="line"><span class="comment">第29次取值： 小李 - 猥琐第一人 -id- 29</span></span><br><span class="line"><span class="comment">第30次取值： 小王 - 宇宙大帅哥 -id- 30</span></span><br><span class="line"><span class="comment">第31次取值： 小李 - 猥琐第一人 -id- 31</span></span><br><span class="line"><span class="comment">第32次取值： 小王 - 宇宙大帅哥 -id- 32</span></span><br><span class="line"><span class="comment">第33次取值： 小李 - 猥琐第一人 -id- 33</span></span><br><span class="line"><span class="comment">第34次取值： 小王 - 宇宙大帅哥 -id- 34</span></span><br><span class="line"><span class="comment">第35次取值： 小李 - 猥琐第一人 -id- 35</span></span><br><span class="line"><span class="comment">第36次取值： 小王 - 宇宙大帅哥 -id- 36</span></span><br><span class="line"><span class="comment">第37次取值： 小李 - 猥琐第一人 -id- 37</span></span><br><span class="line"><span class="comment">第38次取值： 小王 - 宇宙大帅哥 -id- 38</span></span><br><span class="line"><span class="comment">第39次取值： 小李 - 猥琐第一人 -id- 39</span></span><br><span class="line"><span class="comment">第40次取值： 小王 - 宇宙大帅哥 -id- 40</span></span><br><span class="line"><span class="comment">第41次取值： 小李 - 猥琐第一人 -id- 41</span></span><br><span class="line"><span class="comment">第42次取值： 小王 - 宇宙大帅哥 -id- 42</span></span><br><span class="line"><span class="comment">第43次取值： 小李 - 猥琐第一人 -id- 43</span></span><br><span class="line"><span class="comment">第44次取值： 小王 - 宇宙大帅哥 -id- 44</span></span><br><span class="line"><span class="comment">第45次取值： 小李 - 猥琐第一人 -id- 45</span></span><br><span class="line"><span class="comment">第46次取值： 小王 - 宇宙大帅哥 -id- 46</span></span><br><span class="line"><span class="comment">第47次取值： 小李 - 猥琐第一人 -id- 47</span></span><br><span class="line"><span class="comment">第48次取值： 小王 - 宇宙大帅哥 -id- 48</span></span><br><span class="line"><span class="comment">第49次取值： 小李 - 猥琐第一人 -id- 49</span></span><br><span class="line"><span class="comment">第50次取值： 小王 - 宇宙大帅哥 -id- 50</span></span><br><span class="line"><span class="comment">第51次取值： 小李 - 猥琐第一人 -id- 51</span></span><br><span class="line"><span class="comment">第52次取值： 小王 - 宇宙大帅哥 -id- 52</span></span><br><span class="line"><span class="comment">第53次取值： 小李 - 猥琐第一人 -id- 53</span></span><br><span class="line"><span class="comment">第54次取值： 小王 - 宇宙大帅哥 -id- 54</span></span><br><span class="line"><span class="comment">第55次取值： 小李 - 猥琐第一人 -id- 55</span></span><br><span class="line"><span class="comment">第56次取值： 小王 - 宇宙大帅哥 -id- 56</span></span><br><span class="line"><span class="comment">第57次取值： 小李 - 猥琐第一人 -id- 57</span></span><br><span class="line"><span class="comment">第58次取值： 小王 - 宇宙大帅哥 -id- 58</span></span><br><span class="line"><span class="comment">第59次取值： 小李 - 猥琐第一人 -id- 59</span></span><br><span class="line"><span class="comment">第60次取值： 小王 - 宇宙大帅哥 -id- 60</span></span><br><span class="line"><span class="comment">第61次取值： 小李 - 猥琐第一人 -id- 61</span></span><br><span class="line"><span class="comment">第62次取值： 小王 - 宇宙大帅哥 -id- 62</span></span><br><span class="line"><span class="comment">第63次取值： 小李 - 猥琐第一人 -id- 63</span></span><br><span class="line"><span class="comment">第64次取值： 小王 - 宇宙大帅哥 -id- 64</span></span><br><span class="line"><span class="comment">第65次取值： 小李 - 猥琐第一人 -id- 65</span></span><br><span class="line"><span class="comment">第66次取值： 小王 - 宇宙大帅哥 -id- 66</span></span><br><span class="line"><span class="comment">第67次取值： 小李 - 猥琐第一人 -id- 67</span></span><br><span class="line"><span class="comment">第68次取值： 小王 - 宇宙大帅哥 -id- 68</span></span><br><span class="line"><span class="comment">第69次取值： 小李 - 猥琐第一人 -id- 69</span></span><br><span class="line"><span class="comment">第70次取值： 小王 - 宇宙大帅哥 -id- 70</span></span><br><span class="line"><span class="comment">第71次取值： 小李 - 猥琐第一人 -id- 71</span></span><br><span class="line"><span class="comment">第72次取值： 小王 - 宇宙大帅哥 -id- 72</span></span><br><span class="line"><span class="comment">第73次取值： 小李 - 猥琐第一人 -id- 73</span></span><br><span class="line"><span class="comment">第74次取值： 小王 - 宇宙大帅哥 -id- 74</span></span><br><span class="line"><span class="comment">第75次取值： 小李 - 猥琐第一人 -id- 75</span></span><br><span class="line"><span class="comment">第76次取值： 小王 - 宇宙大帅哥 -id- 76</span></span><br><span class="line"><span class="comment">第77次取值： 小李 - 猥琐第一人 -id- 77</span></span><br><span class="line"><span class="comment">第78次取值： 小王 - 宇宙大帅哥 -id- 78</span></span><br><span class="line"><span class="comment">第79次取值： 小李 - 猥琐第一人 -id- 79</span></span><br><span class="line"><span class="comment">第80次取值： 小王 - 宇宙大帅哥 -id- 80</span></span><br><span class="line"><span class="comment">第81次取值： 小李 - 猥琐第一人 -id- 81</span></span><br><span class="line"><span class="comment">第82次取值： 小王 - 宇宙大帅哥 -id- 82</span></span><br><span class="line"><span class="comment">第83次取值： 小李 - 猥琐第一人 -id- 83</span></span><br><span class="line"><span class="comment">第84次取值： 小王 - 宇宙大帅哥 -id- 84</span></span><br><span class="line"><span class="comment">第85次取值： 小李 - 猥琐第一人 -id- 85</span></span><br><span class="line"><span class="comment">第86次取值： 小王 - 宇宙大帅哥 -id- 86</span></span><br><span class="line"><span class="comment">第87次取值： 小李 - 猥琐第一人 -id- 87</span></span><br><span class="line"><span class="comment">第88次取值： 小王 - 宇宙大帅哥 -id- 88</span></span><br><span class="line"><span class="comment">第89次取值： 小李 - 猥琐第一人 -id- 89</span></span><br><span class="line"><span class="comment">第90次取值： 小王 - 宇宙大帅哥 -id- 90</span></span><br><span class="line"><span class="comment">第91次取值： 小李 - 猥琐第一人 -id- 91</span></span><br><span class="line"><span class="comment">第92次取值： 小王 - 宇宙大帅哥 -id- 92</span></span><br><span class="line"><span class="comment">第93次取值： 小李 - 猥琐第一人 -id- 93</span></span><br><span class="line"><span class="comment">第94次取值： 小王 - 宇宙大帅哥 -id- 94</span></span><br><span class="line"><span class="comment">第95次取值： 小李 - 猥琐第一人 -id- 95</span></span><br><span class="line"><span class="comment">第96次取值： 小王 - 宇宙大帅哥 -id- 96</span></span><br><span class="line"><span class="comment">第97次取值： 小李 - 猥琐第一人 -id- 97</span></span><br><span class="line"><span class="comment">第98次取值： 小王 - 宇宙大帅哥 -id- 98</span></span><br><span class="line"><span class="comment">第99次取值： 小李 - 猥琐第一人 -id- 99</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>注意初始的flag应设置为true让它能够生产</p>
</blockquote>
<h1 id="多线程深入话题"><a href="#多线程深入话题" class="headerlink" title="多线程深入话题"></a>多线程深入话题</h1><h2 id="1-优雅的停止线程"><a href="#1-优雅的停止线程" class="headerlink" title="1. 优雅的停止线程"></a>1. 优雅的停止线程</h2><p>原本提供了stop方法，destory方法，suspend方法，resume方法（回复挂起线程执行）；需要一种柔和的方式在进行线程停止；</p>
<blockquote>
<p>范例：实现柔和的停止</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDemo</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">			<span class="keyword">long</span> num = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">while</span>(flag) &#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					Thread.sleep(<span class="number">10</span>);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(Thread.currentThread().getName()+<span class="string">" 正在运行"</span>+ num++);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,<span class="string">"执行线程"</span>).start();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Thread.sleep(<span class="number">200</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		flag = <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其他线程控制这个flag，也不是说立马就能停止，而是根据flag的内容来判断的；</p>
</blockquote>
<h2 id="2-后台守护线程"><a href="#2-后台守护线程" class="headerlink" title="2. 后台守护线程"></a>2. 后台守护线程</h2><p>所以多线程里可以进行守护线程</p>
<p>在Thread类里提供的守护线程的操作方法：</p>
<ul>
<li>设置为守护线程：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">setDaemon</span><span class="params">(<span class="keyword">boolean</span> on)</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>判断是否为守护线程</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">isDaemon</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>范例：使用守护线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDemo</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Thread userThread = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>;x&lt;<span class="number">10</span>;x++) &#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					Thread.sleep(<span class="number">100</span>);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(Thread.currentThread().getName()+<span class="string">" 正在运行"</span>+ x);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,<span class="string">"用户线程"</span>);	<span class="comment">// 完成核心业务</span></span><br><span class="line">		Thread daemonThread = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>;x&lt;Integer.MAX_VALUE;x++) &#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					Thread.sleep(<span class="number">100</span>);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(Thread.currentThread().getName()+<span class="string">" 正在运行"</span>+ x);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,<span class="string">"守护线程"</span>);</span><br><span class="line">		daemonThread.setDaemon(<span class="keyword">true</span>);</span><br><span class="line">		userThread.start();</span><br><span class="line">		daemonThread.start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">守护线程 正在运行0</span></span><br><span class="line"><span class="comment">用户线程 正在运行0</span></span><br><span class="line"><span class="comment">守护线程 正在运行1</span></span><br><span class="line"><span class="comment">用户线程 正在运行1</span></span><br><span class="line"><span class="comment">守护线程 正在运行2</span></span><br><span class="line"><span class="comment">用户线程 正在运行2</span></span><br><span class="line"><span class="comment">守护线程 正在运行3</span></span><br><span class="line"><span class="comment">用户线程 正在运行3</span></span><br><span class="line"><span class="comment">用户线程 正在运行4</span></span><br><span class="line"><span class="comment">守护线程 正在运行4</span></span><br><span class="line"><span class="comment">用户线程 正在运行5</span></span><br><span class="line"><span class="comment">守护线程 正在运行5</span></span><br><span class="line"><span class="comment">守护线程 正在运行6</span></span><br><span class="line"><span class="comment">用户线程 正在运行6</span></span><br><span class="line"><span class="comment">守护线程 正在运行7</span></span><br><span class="line"><span class="comment">用户线程 正在运行7</span></span><br><span class="line"><span class="comment">用户线程 正在运行8</span></span><br><span class="line"><span class="comment">守护线程 正在运行8</span></span><br><span class="line"><span class="comment">用户线程 正在运行9</span></span><br><span class="line"><span class="comment">守护线程 正在运行9</span></span><br><span class="line"><span class="comment"> * */</span></span><br></pre></td></tr></table></figure>
<p>用户线程完毕了，守护线程也就消失了。java程序中最大的守护线程就是GC线程；</p>
</blockquote>
<h2 id="3-volatile关键字"><a href="#3-volatile关键字" class="headerlink" title="3. volatile关键字"></a>3. volatile关键字</h2><p>volatile关键字是在属性定义上使用的，表示此属性为直接数据操作，而不进行副本的拷贝处理；但是他不是同步操作；</p>
<p>在进行变量处理的时候会进行如下几个步骤：</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200622125513284.png" alt="image-20200622125513284"></p>
<ul>
<li>获取变量原有的数据内容副本</li>
<li>利用副本为变量及逆行数学计算</li>
<li>将计算后的变量保存到原始空间中</li>
</ul>
<p>如果属性加了 volatile关键字，表示就是不使用副本，而是直接在原变量上操作’；</p>
<blockquote>
<p><strong>面试题</strong>：volatile关键字与sychronized的区别：</p>
<ul>
<li>volatile在属性，sychronized在代码块与方法上使用；</li>
<li>volatile无法描述同步处理，只是一种直接内存的处理</li>
</ul>
</blockquote>
<h1 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h1><p>所谓的线程池就是多个线程封装在一起进行操作</p>
<h2 id="1-线程池简介"><a href="#1-线程池简介" class="headerlink" title="1. 线程池简介"></a>1. 线程池简介</h2><p>用来处理问题的线程池不同情况下：</p>
<ul>
<li>要解决的活很大有多少人来多少人</li>
<li>活很大，但要求只招聘10个人</li>
<li>活虽然很大，但只允许一个人做</li>
</ul>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200622174935708.png" alt="image-20200622174935708"></p>
<p>JDK 1.5后追加了一并发访问的程序包：<code>java.util.concurrent</code>，对于线程池操作的核心类和接口就定义在此包之中，这里面有两个核心的接口：</p>
<ul>
<li>普通的执行线程池定义</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.util.concurrent.ExecutorService</span><br></pre></td></tr></table></figure>
<ul>
<li>调度线程池：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.util.concurrent.ScheduledExecutorService</span><br></pre></td></tr></table></figure>
<p>要进行线程池的创建，一般可以使用<code>java.util.concurrent.Executors</code> 类完成，有以下几个方法：</p>
<ul>
<li>创建无大小限制的线程池：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newCachedThreadPool</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>创建固定大小的线性池：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newFixedThreadPool</span><span class="params">(<span class="keyword">int</span> nThreads,ThreadFactorythreadFactory)</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>单线程池：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ScheduledExecutorService <span class="title">newSingleThreadScheduledExecutor</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>创建定时调度池</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ScheduledExecutorService <span class="title">newScheduledThreadPool</span><span class="params">(<span class="keyword">int</span> corePoolSize)</span></span></span><br></pre></td></tr></table></figure>
<h2 id="2-线程池的实现"><a href="#2-线程池的实现" class="headerlink" title="2. 线程池的实现"></a>2. 线程池的实现</h2><ol>
<li><p>无限大小的线程池</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="comment">//	创建了线程池模型，但里面没有线程</span></span><br><span class="line">		ExecutorService newCachedThreadPool = Executors.newCachedThreadPool();<span class="comment">//核心</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>;x&lt;<span class="number">10</span>;x++) &#123;</span><br><span class="line">			Thread.sleep(<span class="number">200</span>);</span><br><span class="line">			<span class="keyword">int</span> index = x;</span><br><span class="line">			newCachedThreadPool.submit(() -&gt; &#123;</span><br><span class="line">				System.out.println(Thread.currentThread().getName() + <span class="string">",x = "</span>+ index);</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		newCachedThreadPool.shutdown();	<span class="comment">//	 关闭线程池</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>创建单线程线程池</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="comment">//	创建了线程池模型，但里面没有线程</span></span><br><span class="line">		ExecutorService newCachedThreadPool = Executors.newSingleThreadScheduledExecutor();	<span class="comment">//核心</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>;x&lt;<span class="number">10</span>;x++) &#123;</span><br><span class="line">			<span class="keyword">int</span> index = x;</span><br><span class="line">			newCachedThreadPool.submit(() -&gt; &#123;</span><br><span class="line">				System.out.println(Thread.currentThread().getName() + <span class="string">",x = "</span>+ index);</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		newCachedThreadPool.shutdown();	<span class="comment">//	 关闭线程池</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>创建固定大小的线程池</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="comment">//	创建了线程池模型，但里面没有线程</span></span><br><span class="line">		ExecutorService newCachedThreadPool = Executors.newFixedThreadPool(<span class="number">3</span>);	<span class="comment">//核心</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>;x&lt;<span class="number">10</span>;x++) &#123;</span><br><span class="line">			<span class="keyword">int</span> index = x;</span><br><span class="line">			newCachedThreadPool.submit(() -&gt; &#123;</span><br><span class="line">				System.out.println(Thread.currentThread().getName() + <span class="string">",x = "</span>+ index);</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		newCachedThreadPool.shutdown();	<span class="comment">//	 关闭线程池</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>定时调度池</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ScheduledExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="comment">//	三个大小的定时调度池</span></span><br><span class="line">		ScheduledExecutorService newCachedThreadPool = Executors.newScheduledThreadPool(<span class="number">1</span>);</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>;x&lt;<span class="number">10</span>;x++) &#123;</span><br><span class="line">			<span class="keyword">int</span> index = x;</span><br><span class="line">			newCachedThreadPool.scheduleAtFixedRate(<span class="keyword">new</span> Runnable()&#123;</span><br><span class="line"></span><br><span class="line">				<span class="meta">@Override</span></span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">					System.out.println(Thread.currentThread().getName() + <span class="string">",x = "</span>+ index);</span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">			&#125;, <span class="number">3</span>, <span class="number">2</span>, TimeUnit.SECONDS); <span class="comment">// 使用的是秒的单位，表示3秒后执行，而后每2秒执行一次</span></span><br><span class="line">		&#125;</span><br><span class="line">		newCachedThreadPool.shutdown();	<span class="comment">//	 关闭线程池</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="多线程综合案例"><a href="#多线程综合案例" class="headerlink" title="多线程综合案例"></a>多线程综合案例</h1><h2 id="1-数字加减"><a href="#1-数字加减" class="headerlink" title="1. 数字加减"></a>1. 数字加减</h2><p>设计4个线程对象，两个线程执行减操作，两个线程执行加操作；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Resource res = <span class="keyword">new</span> Resource();</span><br><span class="line">		AddThread at = <span class="keyword">new</span> AddThread(res);</span><br><span class="line">		SubThread st = <span class="keyword">new</span> SubThread(res);</span><br><span class="line">		<span class="keyword">new</span> Thread(at,<span class="string">"加法线程 - A"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(at,<span class="string">"加法线程 - B"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(st,<span class="string">"减法线程 - X"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(st,<span class="string">"减法线程 - Y"</span>).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Resource resource;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">AddThread</span><span class="params">(Resource resource)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.resource = resource;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">50</span>; x++) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="keyword">this</span>.resource.add();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Resource resource;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">SubThread</span><span class="params">(Resource resource)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.resource = resource;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">50</span>; x++) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="keyword">this</span>.resource.sub();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Resource</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">	<span class="comment">// flag : true 	可加 不可减</span></span><br><span class="line">	<span class="comment">// flag : false 可减不可加</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.flag == <span class="keyword">false</span>) &#123;</span><br><span class="line">			<span class="keyword">super</span>.wait();</span><br><span class="line">		&#125;</span><br><span class="line">		Thread.sleep(<span class="number">100</span>);</span><br><span class="line">		<span class="keyword">this</span>.num++;</span><br><span class="line">		System.out.println(<span class="string">"【加法操作- "</span>+Thread.currentThread().getName()+<span class="string">"】 num = "</span>+<span class="keyword">this</span>.num );</span><br><span class="line">		<span class="keyword">this</span>.flag = <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">super</span>.notifyAll();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">sub</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.flag == <span class="keyword">true</span>) &#123;</span><br><span class="line">			<span class="keyword">super</span>.wait();</span><br><span class="line">		&#125;</span><br><span class="line">		Thread.sleep(<span class="number">200</span>);</span><br><span class="line">		<span class="keyword">this</span>.num--;</span><br><span class="line">		System.out.println(<span class="string">"【减法操作- "</span>+Thread.currentThread().getName()+<span class="string">"】 num = "</span>+<span class="keyword">this</span>.num );</span><br><span class="line">		<span class="keyword">this</span>.flag = <span class="keyword">true</span>;</span><br><span class="line">		<span class="keyword">super</span>.notifyAll();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-生产电脑"><a href="#2-生产电脑" class="headerlink" title="2. 生产电脑"></a>2. 生产电脑</h2><p>要求生产出来一台电脑就搬走一台电脑；</p>
<p>如果没有新的电脑生产出来，搬运工要等电脑生产出来；</p>
<p>如果没有搬走则要等电脑搬走后再生产，并统计处生产的电脑数量；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Resource res = <span class="keyword">new</span> Resource();</span><br><span class="line">		<span class="keyword">new</span> Thread(<span class="keyword">new</span> Producer(res)).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(<span class="keyword">new</span> Remover(res)).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Remover</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Resource res;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Remover</span><span class="params">(Resource res)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.res = res;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x&lt;<span class="number">50</span>;x++) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				res.get();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Resource res;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Producer</span><span class="params">(Resource res)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.res = res;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">50</span>; x++) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				res.make();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Resource</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Computer computer;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">make</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.computer != <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">super</span>.wait();</span><br><span class="line">		&#125;</span><br><span class="line">		Thread.sleep(<span class="number">200</span>);</span><br><span class="line">		<span class="keyword">this</span>.computer = <span class="keyword">new</span> Computer(<span class="string">"联想牌"</span>,<span class="number">1.1</span>);</span><br><span class="line">		System.out.println(<span class="string">"【生产电脑】： "</span>+<span class="keyword">this</span>.computer);</span><br><span class="line">		<span class="keyword">super</span>.notifyAll();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.computer == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">super</span>.wait();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"【取走电脑】： "</span>+<span class="keyword">this</span>.computer);</span><br><span class="line">		<span class="keyword">this</span>.computer = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">super</span>.notifyAll();</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Computer</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>;	<span class="comment">//	生产个数</span></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> price;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Computer</span><span class="params">(String name, <span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.price = price;</span><br><span class="line">		<span class="keyword">this</span>.count ++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"第"</span>+count+<span class="string">"台电脑"</span>+<span class="string">"Coumputer [name="</span> + name + <span class="string">", price="</span> + price + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-竞争抢答"><a href="#3-竞争抢答" class="headerlink" title="3. 竞争抢答"></a>3. 竞争抢答</h2><p>有三个抢答者。同时发出抢答指令，抢答成功者给出成功提示，未抢答成功的给出失败提示；</p>
<p>这是看到有返回，则用Callable是比较合适的；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.jubingyi.Demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.FutureTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException</span>&#123;</span><br><span class="line">		MyThread mt = <span class="keyword">new</span> MyThread();</span><br><span class="line">		FutureTask&lt;String&gt; taskA = <span class="keyword">new</span> FutureTask&lt;String&gt;(mt);</span><br><span class="line">		FutureTask&lt;String&gt; taskB = <span class="keyword">new</span> FutureTask&lt;String&gt;(mt);</span><br><span class="line">		FutureTask&lt;String&gt; taskC = <span class="keyword">new</span> FutureTask&lt;String&gt;(mt);</span><br><span class="line">		<span class="keyword">new</span> Thread(taskA,<span class="string">"竞赛者 - A"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(taskB,<span class="string">"竞赛者 - B"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(taskC,<span class="string">"竞赛者 - C"</span>).start();</span><br><span class="line">		System.out.println(taskA.get());</span><br><span class="line">		System.out.println(taskB.get());</span><br><span class="line">		System.out.println(taskC.get());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">String</span>&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">synchronized</span>(<span class="keyword">this</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">this</span>.flag == <span class="keyword">false</span>) &#123;</span><br><span class="line">				<span class="keyword">this</span>.flag = <span class="keyword">true</span>;</span><br><span class="line">				<span class="keyword">return</span> Thread.currentThread().getName() + <span class="string">" 抢答成功！!"</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">return</span> Thread.currentThread().getName() + <span class="string">" 抢答失败！!"</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">竞赛者 - A 抢答失败！!</span></span><br><span class="line"><span class="comment">竞赛者 - B 抢答成功！!</span></span><br><span class="line"><span class="comment">竞赛者 - C 抢答失败！!</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>只返回一个信息的结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.jubingyi.Demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.FutureTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException</span>&#123;</span><br><span class="line">		MyThread mt = <span class="keyword">new</span> MyThread();</span><br><span class="line">		FutureTask&lt;String&gt; taskA = <span class="keyword">new</span> FutureTask&lt;String&gt;(mt);</span><br><span class="line">		<span class="keyword">new</span> Thread(taskA,<span class="string">"竞赛者 - A"</span>).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(taskA,<span class="string">"竞赛者 - B"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(taskA,<span class="string">"竞赛者 - C"</span>).start();</span><br><span class="line"></span><br><span class="line">		System.out.println(taskA.get());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">String</span>&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">synchronized</span>(<span class="keyword">this</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">this</span>.flag == <span class="keyword">false</span>) &#123;</span><br><span class="line">				<span class="keyword">this</span>.flag = <span class="keyword">true</span>;</span><br><span class="line">				<span class="keyword">return</span> Thread.currentThread().getName() + <span class="string">" 抢答成功！!"</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">return</span> Thread.currentThread().getName() + <span class="string">" 抢答失败！!"</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">竞赛者 - B 抢答成功！!</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h1 id="java基础类库"><a href="#java基础类库" class="headerlink" title="java基础类库"></a>java基础类库</h1><h2 id="1-StringBuffer类"><a href="#1-StringBuffer类" class="headerlink" title="1. StringBuffer类"></a>1. StringBuffer类</h2><p>String类是所有项目开发中，一定会使用到的一个功能类，这个类有如下的特点：</p>
<ul>
<li>每个字符串常量都属于String类的匿名对象，并且不可更改；</li>
<li>String有两个常量池：静态常量池，运行时常量池；</li>
<li>String实例化建议直接使用赋值的形式完成，这样可以把对象保存在常量池中，方便下次重用；</li>
</ul>
<p>字符串目前所能看到的最大的弊端就是字符串不允许修改；</p>
<p>为了解决此问题，专门提供了一个<code>StringBuffer</code>类可以使用String字符串内容的处理；</p>
<blockquote>
<p>范例：观察String与StringBuffer类</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">String类引用传递</th>
<th style="text-align:center">StringBuffer类应用传递</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.jubingyi.Demo;</span><br><span class="line"><span class="comment">// String类引用传递</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		String str = <span class="string">"Hello "</span>;</span><br><span class="line">		change(str);</span><br><span class="line">		System.out.println(str);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(String temp)</span> </span>&#123;	<span class="comment">// 内容没有发生改变</span></span><br><span class="line">		temp += <span class="string">"world!"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Hello </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p><code>StringBuffer</code>没有String类的两种对象实例化方式，StringBuffer得像普通类对象一样先对象实例化，再调用方法执行处理</p>
<ul>
<li><p>构造方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">StringBuffer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">StringBuffer</span><span class="params">(String str)</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>数据追加：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">StringBuffer <span class="title">append</span><span class="params">(<span class="keyword">float</span> f)</span></span></span><br><span class="line"><span class="function">StringBuffer <span class="title">append</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 有各种类型参数的此方法</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.jubingyi.Demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">		sb.append(<span class="string">"Hello "</span>);</span><br><span class="line">		change(sb);</span><br><span class="line">		System.out.println(sb);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(StringBuffer temp)</span> </span>&#123;	</span><br><span class="line">		temp.append(<span class="string">"world!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实际上，大部分情况下，很少会出现字符串内容的改变，改变指的并不是针对静态常量池的改变</p>
<blockquote>
<p> 范例：分析已有问题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		String strA = <span class="string">"Hello world"</span>;</span><br><span class="line">		String strB = <span class="string">"Hello "</span> + <span class="string">"world"</span>;</span><br><span class="line">		System.out.println(strA == strB);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这时候strB对象的内容并不算是改变；对于strB再程序编译后会变成如下形式</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>String strB = “Hello “ + “world”;</th>
<th>StringBuffer buf = new StringBuffer();<br>buf.append(“Hello “).append(“world”);</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>String 方法的”+“在编译之后都变为了StringBuffer里的append方法；StringBuffer和String类之间可以相互转换；</p>
</blockquote>
<ul>
<li>String类变为StringBuffer类：StringBuffer类的构造方法或者使用append</li>
<li>所有的类通过<code>toString</code>方法将其变为<code>String</code>类型；</li>
</ul>
<p>其他方法：</p>
<ul>
<li><p>插入数据：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> StringBuffer <span class="title">insert</span><span class="params">(<span class="keyword">int</span> offset, 数据类型 b)</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> class JavaApiDemo </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		StringBuffer buf = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">		buf.append(<span class="string">"miao"</span>).insert(<span class="number">0</span>,<span class="string">"Hello"</span>).insert(<span class="number">5</span>, <span class="string">" "</span>);</span><br><span class="line">		System.out.println(buf);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除指定范围</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> StringBuffer <span class="title">delete</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> class JavaApiDemo </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		StringBuffer buf = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">		buf.append(<span class="string">"Hello world"</span>).delete(<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line">		System.out.println(buf);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Hlo world</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串反转</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> StringBuffer <span class="title">reverse</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> class JavaApiDemo </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		StringBuffer buf = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">		buf.append(<span class="string">"Hello world"</span>);</span><br><span class="line">		System.out.println(buf.reverse());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">dlrow olleH</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>与<code>StringBuffer</code>类有一个类似的功能类：<code>StringBuilder</code>：提供的方法与<code>StringBuffer</code>有相同的方法；</p>
<p><code>StringBuffer</code>属于线程安全的，全部使用了<code>synchronnized</code>关键字；<code>StringBuffer</code>没有这个；</p>
<h2 id="2-CharSequence接口"><a href="#2-CharSequence接口" class="headerlink" title="2. CharSequence接口"></a>2. CharSequence接口</h2><p>这个接口描述字符串接口的接口，实现了这个接口的有三个常用子类：String,StringBuffer,StringBuilder</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">String</th>
<th style="text-align:center">StringBuffer</th>
<th style="text-align:center">StringBuilder</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>public final class String extends Object implements Serializable, Comparable&lt;String&gt;, CharSequence</code></td>
<td style="text-align:center"><code>public final class StringBuffer extends Object implements Serializable, CharSequence</code></td>
<td style="text-align:center"><code>public final class StringBuilder extends Object implements Serializable, CharSequence</code></td>
</tr>
</tbody>
</table>
</div>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200623094532493.png" alt="image-20200623094532493"></p>
<p>现在只要有字符串就可以为<code>CharSequence</code>接口实例化</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		CharSequence str = <span class="string">"Hello world"</span>;	<span class="comment">// 子类实例向父接口转型</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>CharSequence</code>中定义的操作方法如下：</p>
<ul>
<li><p>获取指定索引字符：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">charAt</span><span class="params">(<span class="keyword">int</span> index)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取字符串长度：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">length</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>截取部分字符串</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> CharSequence <span class="title">subSequence</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>范例：字符串截取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		CharSequence str = <span class="string">"Hello world"</span>;	<span class="comment">// 子类实例向父接口转型</span></span><br><span class="line">		System.out.println(str.subSequence(<span class="number">0</span>, <span class="number">5</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><code>CharSequence</code>描述的就是一个字符串</p>
<h2 id="3-AutoCloseable接口"><a href="#3-AutoCloseable接口" class="headerlink" title="3. AutoCloseable接口"></a>3. AutoCloseable接口</h2><p>用于资源开发的处理，以实现资源的自动关闭；</p>
<p>更好的说明资源问题，通过一个消息的发送处理来完成；</p>
<blockquote>
<p>范例：手工实现资源处理:反正就是调用close函数关闭资源；</p>
</blockquote>
<p>这个接口只提供了一个方法：</p>
<ul>
<li>关闭方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200623102242087.png" alt="image-20200623102242087"></p>
<p>要想使用自动关闭除了AutoCloseable之外，还需要结合异常处理语句才可以；</p>
<blockquote>
<p>范例：实现自动关闭:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> (NetMessage nm = <span class="keyword">new</span> NetMessage(<span class="string">"Hello world"</span>))&#123;</span><br><span class="line">			nm.send();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetMessage</span> <span class="keyword">implements</span> <span class="title">IMessage</span>, <span class="title">AutoCloseable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String msg ;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">NetMessage</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">open</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"【open】获取消息发送连接资源"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">"【close】关闭消息发送通道"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.open()) &#123;</span><br><span class="line">			System.out.println(<span class="string">"【*** 发送消息 ***】 "</span>+<span class="keyword">this</span>.msg);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>以后接触到资源关闭时经常会遇到AutoCloseable</p>
<h2 id="4-Runtime类"><a href="#4-Runtime类" class="headerlink" title="4. Runtime类"></a>4. Runtime类</h2><p>描述运行时的状态；Runtime是唯一一个与JVM运行状态有关的类，并且默认提供一个该类的实例化对象；</p>
<p>由于JVM运行时只有一个Runtime类对象，所以这个类的构造方法私有化了。也就是单例设计模式；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200623104048946.png" alt="image-20200623104048946"></p>
<p>Runtime类负责描述系统信息，由JVM维护，所以就只有一个；</p>
<p>如果想获取这个对象可以使用Runtime类中的<code>getRuntime</code>方法获得；</p>
<ul>
<li><p>获取实例化对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Runtime <span class="title">getRuntime</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>范例：获取Runtime对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		Runtime run = Runtime.getRuntime();</span><br><span class="line">        <span class="comment">// 获取内核数availableProcessors()</span></span><br><span class="line">		System.out.println(<span class="string">"可用的进程数量："</span>+run.availableProcessors());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><p>获取最大内存空间：默认为本机系统内存的四分之一</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">maxMemory</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>获取内存空间：默认为本机系统内存的64分之一</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">totalMemory</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>获取空闲内存空间：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">freeMemory</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>手工进行垃圾回收处理：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">gc</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>范例：观察内存状态</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		Runtime run = Runtime.getRuntime();</span><br><span class="line">		System.out.println(<span class="string">"可用的进程数量："</span>+run.availableProcessors());</span><br><span class="line">		System.out.println(<span class="string">"最大内存空间"</span>+run.maxMemory());</span><br><span class="line">		System.out.println(<span class="string">"空闲内存空间"</span>+run.freeMemory());</span><br><span class="line">		System.out.println(<span class="string">"获取内存空间"</span>+run.totalMemory());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="5-system类"><a href="#5-system类" class="headerlink" title="5. system类"></a>5. system类</h2><p>其他方法：</p>
<ul>
<li>数组拷贝</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">arraycopy</span><span class="params">(Object src,<span class="keyword">int</span> srcPos,Object dest,<span class="keyword">int</span> destPos,<span class="keyword">int</span> length)</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>获取当前日期时间数值</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">currentTimeMillis</span><span class="params">()</span>	<span class="comment">// 计算程序耗时</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>垃圾回收</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">gc</span><span class="params">()</span></span>&#123;	<span class="comment">//	和Runtime.getRuntime().gc()是一样的；</span></span><br><span class="line">    Runtime.getRuntime().gc()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-cleaner类"><a href="#6-cleaner类" class="headerlink" title="6. cleaner类"></a>6. cleaner类</h2><p>对象清理操作，主要功能是进行<code>finalize()</code>方法的替代；</p>
<p>C++类中的函数：构造函数，析构函数（对象手工回收）；java中由垃圾回收机制不太用这类析构函数；</p>
<p>Java给提供了用户收尾操作，Object类中的<code>finalized()</code>；JDK 9 之后不建议使用了；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Deprecated</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable</span></span><br></pre></td></tr></table></figure>
<p>这个类最大特征是抛出<code>Throwable</code>异常类型； 这个异常类型分为两个子类型：<code>Error</code>，<code>Exception</code>，平常都是<code>Exception</code>;</p>
<blockquote>
<p>范例：观察传统回收</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Member</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Member</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"【构造】你诞生了！！"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"【回收】凡人终有一死"</span>);</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"哎，我还想活500年"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		Member m = <span class="keyword">new</span> Member();</span><br><span class="line">		m = <span class="keyword">null</span>;</span><br><span class="line">		System.gc();</span><br><span class="line">		System.out.println(<span class="string">"太阳照常升起"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">【构造】你诞生了！！</span></span><br><span class="line"><span class="comment">太阳照常升起</span></span><br><span class="line"><span class="comment">【回收】凡人终有一死</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>JDK 1.9开始finalize已经不建议使用了；建议使用 <code>java.lang.ref.Cleaner</code>类进行回收处理；（Cleaner也支持AutoCloseable接口处理）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.ref.Cleaner;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Member</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Member</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"【构造】你诞生了！！"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">"【回收】凡人终有一死"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MemberCleaning</span> <span class="keyword">implements</span> <span class="title">AutoCloseable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Cleaner cleaner = Cleaner.create();</span><br><span class="line">	<span class="keyword">private</span> Member member;</span><br><span class="line">    <span class="keyword">private</span> Cleaner.Cleanable cleanable;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MemberCleaning</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="keyword">this</span>.member = <span class="keyword">new</span> Member();</span><br><span class="line">    	<span class="keyword">this</span>.cleanable = <span class="keyword">this</span>.cleaner.register(<span class="keyword">this</span>, <span class="keyword">this</span>.member);	<span class="comment">//注册使用的对象</span></span><br><span class="line">    &#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">this</span>.cleanable.clean();	<span class="comment">//	启动多线程</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> (MemberCleaning mc = <span class="keyword">new</span> MemberCleaning())&#123;</span><br><span class="line">			</span><br><span class="line">		&#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-对象克隆"><a href="#7-对象克隆" class="headerlink" title="7. 对象克隆"></a>7. 对象克隆</h2><p>要使用Object类里的<code>clone()</code>方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException</span></span><br></pre></td></tr></table></figure>
<p>所有的类都会继承这个方法，但不是所有类都可以被克隆；要实现克隆就要实现一个接口<code>Cloneable</code>，这个接口没有任何方法提供；它只描述一种能力</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">**Throws:**</span></span><br><span class="line"></span><br><span class="line"><span class="code">`CloneNotSupportedException`</span> - if the object's class does not support the <span class="code">`Cloneable`</span> interface. Subclasses that override the <span class="code">`clone`</span> method can also throw this exception to indicate that an instance cannot be cloned</span><br></pre></td></tr></table></figure>
<blockquote>
<p>范例：实现clone</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Member</span> <span class="keyword">implements</span> <span class="title">Cloneable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Member</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"【"</span>+<span class="keyword">super</span>.toString()+<span class="string">"】 Member [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.clone();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		Member mem = <span class="keyword">new</span> Member(<span class="string">"小王"</span>,<span class="number">23</span>);</span><br><span class="line">		Member mem_clone = (Member)mem.clone();</span><br><span class="line">		System.out.println(mem);</span><br><span class="line">		System.out.println(mem_clone);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">【cn.jubingyi.Demo.Member@54bedef2】 Member [name=小王, age=23]</span></span><br><span class="line"><span class="comment">【cn.jubingyi.Demo.Member@5caf905d】 Member [name=小王, age=23]</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>不覆写clone方法的话就会报错：<code>The method clone() from the type Object is not visible</code></p>
<p>不实现<code>Cloneable</code>接口就会抛出<code>CloneNotSupportedException</code>异常：</p>
<p>调用clone后返回的是一个Object类方法，还需要向下转</p>
<h1 id="数学操作类"><a href="#数学操作类" class="headerlink" title="数学操作类"></a>数学操作类</h1><h2 id="1-Math数学计算类"><a href="#1-Math数学计算类" class="headerlink" title="1. Math数学计算类"></a>1. Math数学计算类</h2><p>这个类构造方法被私有化了，但不是单例；</p>
<p>其中很多方法都是static，可以直接通过类名称调用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		System.out.println(Math.abs(-<span class="number">10</span>));</span><br><span class="line">		System.out.println(Math.max(<span class="number">10.4</span>, <span class="number">19</span>));</span><br><span class="line">		System.out.println(Math.log(<span class="number">0.75</span>));	<span class="comment">// -0.2876820724517809</span></span><br><span class="line">		System.out.println(Math.log(<span class="number">0.5</span>));	<span class="comment">// -0.6931471805599453</span></span><br><span class="line">		System.out.println(Math.log(<span class="number">0.25</span>)); <span class="comment">// -1.3862943611198906</span></span><br><span class="line">		System.out.println(Math.round(<span class="number">15.51</span>));	<span class="comment">// 四舍五入，返回最接近的long</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>范例：实现自定义的四舍五入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		System.out.println(MathUtil.round(<span class="number">19.562</span>, -<span class="number">2</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MathUtil</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">MathUtil</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 	实现四舍五入操作</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> num：要进行的数字</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> scale：四舍五入保留的位数</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span>	四舍五入处理后的结果</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">round</span><span class="params">(<span class="keyword">double</span> num,<span class="keyword">int</span> scale )</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> Math.round(num * Math.pow(<span class="number">10</span>, scale)) / Math.pow(<span class="number">10</span>, scale);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="2-Random随机数生成类"><a href="#2-Random随机数生成类" class="headerlink" title="2. Random随机数生成类"></a>2. Random随机数生成类</h2><p><code>java.util.Random</code>类，这个类主要靠内部提供的方法来完成：</p>
<ul>
<li><p>产生一个不大于边界的随机非负整数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">nextInt</span><span class="params">(<span class="keyword">int</span> bound)</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Random a = <span class="keyword">new</span> Random();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">20</span>; x++) &#123;</span><br><span class="line">			System.out.print(a.nextInt(<span class="number">5</span>)+<span class="string">" "</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>有一款彩票叫做36选7，利用Random实现随机生成彩票号：</p>
<blockquote>
<p>范例：随机生成彩票号：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		<span class="keyword">int</span> data []  = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">7</span>];</span><br><span class="line">		Random rand = <span class="keyword">new</span> Random();</span><br><span class="line">		<span class="keyword">int</span> foot = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span> (foot&lt;<span class="number">7</span>) &#123;</span><br><span class="line">			<span class="keyword">int</span> num = rand.nextInt(<span class="number">37</span>);</span><br><span class="line">			<span class="keyword">if</span> (isUsable(num, data)) &#123;</span><br><span class="line">				data[foot++] = num;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		java.util.Arrays.sort(data);</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> t:data) &#123;</span><br><span class="line">			System.out.print(t+<span class="string">" "</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 判断传入的数组是否为0以及是否在数组中中存在</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> num	要判断的数字</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> temp	已经存在的数据</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span>	判断是否可用</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isUsable</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">int</span> temp[])</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (num == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x:temp) &#123;</span><br><span class="line">			<span class="keyword">if</span> (x == num) &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="3-大数字处理类"><a href="#3-大数字处理类" class="headerlink" title="3. 大数字处理类"></a>3. 大数字处理类</h2><p>海量数字计算（基础计算）；在<code>java.math</code>包里提供了<code>BigInteger</code>,<code>BigDecimal</code>；他们继承自<code>Number</code>类；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200623155100322.png" alt="image-20200623155100322"></p>
<p>观察两个大数字操作类的构造方法</p>
<ul>
<li><p>BigInteger类构造</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">BigInteger</span><span class="params">(String val)</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>BigDecimal类构造： </p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">BigDecimal</span><span class="params">(String val)</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>范例：使用BIgInteger实现四则运算</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		BigInteger bigA = <span class="keyword">new</span> BigInteger(<span class="string">"234234234234234234243242678678678676786883432"</span>);</span><br><span class="line">		BigInteger bigB = <span class="keyword">new</span> BigInteger(<span class="string">"23423423"</span>);</span><br><span class="line">		System.out.println(<span class="string">"加法操作"</span>+bigA.add(bigB));</span><br><span class="line">		System.out.println(<span class="string">"减法操作"</span>+bigA.subtract(bigB));</span><br><span class="line">		System.out.println(<span class="string">"除法操作"</span>+bigA.divide(bigB));</span><br><span class="line">		System.out.println(<span class="string">"乘法操作"</span>+bigA.multiply(bigB));</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>虽然可以但还是要考虑性能问题</p>
<p>范例：观察性能问题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>这种计算是非常缓慢的，任何电脑都是有极限的；</p>
</blockquote>
<ul>
<li><p>求余：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> BigInteger[] divideAndRemainder​(BigInteger val)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>范例：求余除法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		BigInteger bigA = <span class="keyword">new</span> BigInteger(<span class="string">"234234234234234234243242678678678676786883432"</span>);</span><br><span class="line">		BigInteger bigB = <span class="keyword">new</span> BigInteger(<span class="string">"23423423"</span>);</span><br><span class="line">		BigInteger result [] = bigA.divideAndRemainder(bigB);</span><br><span class="line">		System.out.println(<span class="string">"商： "</span>+result[<span class="number">0</span>]+<span class="string">"、余数"</span>+result[<span class="number">1</span>]);	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>BigDicimal都是非常类似的，都有基础的数学支持；</p>
<blockquote>
<p>范例：使用BigDecimal计算</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		BigDecimal bigA = <span class="keyword">new</span> BigDecimal(<span class="string">"234234234234234234243242678678678676786883432"</span>);</span><br><span class="line">		BigDecimal bigB = <span class="keyword">new</span> BigDecimal(<span class="string">"23423423"</span>);</span><br><span class="line">		System.out.println(<span class="string">"加法操作"</span>+bigA.add(bigB));</span><br><span class="line">		System.out.println(<span class="string">"减法操作"</span>+bigA.subtract(bigB));</span><br><span class="line">		System.out.println(<span class="string">"除法操作"</span>+bigA.divide(bigB,<span class="number">6</span>,BigDecimal.ROUND_HALF_UP));</span><br><span class="line">		System.out.println(<span class="string">"乘法操作"</span>+bigA.multiply(bigB));</span><br><span class="line">		BigDecimal result [] = bigA.divideAndRemainder(bigB);</span><br><span class="line">		System.out.println(<span class="string">"除法计算：商： "</span>+ result[<span class="number">0</span>] + <span class="string">"、 余数："</span> + result[<span class="number">1</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中除法操作：第二个参数表示精度，第三个表示进位模式；但是已经被废弃了；</p>
</blockquote>
<h1 id="日期操作类"><a href="#日期操作类" class="headerlink" title="日期操作类"></a>日期操作类</h1><p>因为java的设计来自于数据表中的结构，数据表中的字符，数字都学了；现在就差日期了；</p>
<p>java提供了一个<code>java.util.Data</code>类，直接实例化就可以获取当前的日期时间；</p>
<blockquote>
<p>范例：观察<code>java.util.Data</code>类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Date date = <span class="keyword">new</span> Date();</span><br><span class="line">		System.out.println(date);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>观察：Data构造：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Date</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(System.currentTimeMillis());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Date</span><span class="params">(<span class="keyword">long</span> date)</span> </span>&#123;</span><br><span class="line">        fastTime = date; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>结论：Data类只不过是对long数据的一种包装；所以Data类中一定有所谓的日期与long之间的转换的方法：</p>
<ul>
<li><p>将long转为日期：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Date</span><span class="params">(<span class="keyword">long</span> date)</span> </span>&#123;</span><br><span class="line">        fastTime = date; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将日期转为Long：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getTime</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>范例：观察Data与long之间的转换：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Date date = <span class="keyword">new</span> Date();</span><br><span class="line">		<span class="keyword">long</span> current = date.getTime();</span><br><span class="line">		current += <span class="number">864000000</span>;</span><br><span class="line">		Date date2 = <span class="keyword">new</span> Date(current);</span><br><span class="line">		System.out.println(date);</span><br><span class="line">		System.out.println(date2);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="2-日期的格式化处理"><a href="#2-日期的格式化处理" class="headerlink" title="2. 日期的格式化处理"></a>2. 日期的格式化处理</h2><p>Data类输出的日期结构不习惯，进行格式化日期使用：<code>java.text.SimpleDateFormat</code>类；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200623172221564.png" alt="image-20200623172221564"></p>
<p>这个类是<code>DateFormat</code>类的子类，在这个类中提供有如下的方法：</p>
<ul>
<li><p>【DateFormat继承】将日期格式化：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">format</span><span class="params">(Date date)</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>【DateFormat继承】将字符串转为日期：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Date <span class="title">parse</span><span class="params">(String source)</span> <span class="keyword">throws</span> ParseException</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>【SimpleDateFormat】构造方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">SimpleDateFormat</span><span class="params">(String pattern)</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>日期格式描述：年（yyyy）、月（MM）、日（dd）、时（H,h）、分（m）、秒（ss）、毫秒（SSS）；</li>
</ul>
</li>
</ul>
<p><table class="striped"></table></p>
<p><thead>
     <tr>
         <th style="text-align:left">Letter
         </th><th style="text-align:left">Date or Time Component
         </th><th style="text-align:left">Presentation
         </th><th style="text-align:left">Examples
 </th></tr></thead><br> <tbody>
     <tr>
         <td><code>G</code>
         </td><td>Era designator
         </td><td><a href="#text">Text</a>
         </td><td><code>AD</code>
     </td></tr><tr>
         <td><code>y</code>
         </td><td>Year
         </td><td><a href="#year">Year</a>
         </td><td><code>1996</code>; <code>96</code>
     </td></tr><tr>
         <td><code>Y</code>
         </td><td>Week year
         </td><td><a href="#year">Year</a>
         </td><td><code>2009</code>; <code>09</code>
     </td></tr><tr>
         <td><code>M</code>
         </td><td>Month in year (context sensitive)
         </td><td><a href="#month">Month</a>
         </td><td><code>July</code>; <code>Jul</code>; <code>07</code>
     </td></tr><tr>
         <td><code>L</code>
         </td><td>Month in year (standalone form)
         </td><td><a href="#month">Month</a>
         </td><td><code>July</code>; <code>Jul</code>; <code>07</code>
     </td></tr><tr>
         <td><code>w</code>
         </td><td>Week in year
         </td><td><a href="#number">Number</a>
         </td><td><code>27</code>
     </td></tr><tr>
         <td><code>W</code>
         </td><td>Week in month
         </td><td><a href="#number">Number</a>
         </td><td><code>2</code>
     </td></tr><tr>
         <td><code>D</code>
         </td><td>Day in year
         </td><td><a href="#number">Number</a>
         </td><td><code>189</code>
     </td></tr><tr>
         <td><code>d</code>
         </td><td>Day in month
         </td><td><a href="#number">Number</a>
         </td><td><code>10</code>
     </td></tr><tr>
         <td><code>F</code>
         </td><td>Day of week in month
         </td><td><a href="#number">Number</a>
         </td><td><code>2</code>
     </td></tr><tr>
         <td><code>E</code>
         </td><td>Day name in week
         </td><td><a href="#text">Text</a>
         </td><td><code>Tuesday</code>; <code>Tue</code>
     </td></tr><tr>
         <td><code>u</code>
         </td><td>Day number of week (1 = Monday, ..., 7 = Sunday)
         </td><td><a href="#number">Number</a>
         </td><td><code>1</code>
     </td></tr><tr>
         <td><code>a</code>
         </td><td>Am/pm marker
         </td><td><a href="#text">Text</a>
         </td><td><code>PM</code>
     </td></tr><tr>
         <td><code>H</code>
         </td><td>Hour in day (0-23)
         </td><td><a href="#number">Number</a>
         </td><td><code>0</code>
     </td></tr><tr>
         <td><code>k</code>
         </td><td>Hour in day (1-24)
         </td><td><a href="#number">Number</a>
         </td><td><code>24</code>
     </td></tr><tr>
         <td><code>K</code>
         </td><td>Hour in am/pm (0-11)
         </td><td><a href="#number">Number</a>
         </td><td><code>0</code>
     </td></tr><tr>
         <td><code>h</code>
         </td><td>Hour in am/pm (1-12)
         </td><td><a href="#number">Number</a>
         </td><td><code>12</code>
     </td></tr><tr>
         <td><code>m</code>
         </td><td>Minute in hour
         </td><td><a href="#number">Number</a>
         </td><td><code>30</code>
     </td></tr><tr>
         <td><code>s</code>
         </td><td>Second in minute
         </td><td><a href="#number">Number</a>
         </td><td><code>55</code>
     </td></tr><tr>
         <td><code>S</code>
         </td><td>Millisecond
         </td><td><a href="#number">Number</a>
         </td><td><code>978</code>
     </td></tr><tr>
         <td><code>z</code>
         </td><td>Time zone
         </td><td><a href="#timezone">General time zone</a>
         </td><td><code>Pacific Standard Time</code>; <code>PST</code>; <code>GMT-08:00</code>
     </td></tr><tr>
         <td><code>Z</code>
         </td><td>Time zone
         </td><td><a href="#rfc822timezone">RFC 822 time zone</a>
         </td><td><code>-0800</code>
     </td></tr><tr>
         <td><code>X</code>
         </td><td>Time zone
         </td><td><a href="#iso8601timezone">ISO 8601 time zone</a>
         </td><td><code>-08</code>; <code>-0800</code>;  <code>-08:00</code>
 </td></tr></tbody><br>&lt;/table&gt;&gt;</p>
<p><table class="striped">
 <thead>
     <tr>
         <th style="text-align:left">Date and Time Pattern
         </th><th style="text-align:left">Result
 </th></tr></thead>
 <tbody>
     <tr>
         <td><code>"yyyy.MM.dd G 'at' HH:mm:ss z"</code>
         </td><td><code>2001.07.04 AD at 12:08:56 PDT</code>
     </td></tr><tr>
         <td><code>"EEE, MMM d, ''yy"</code>
         </td><td><code>Wed, Jul 4, '01</code>
     </td></tr><tr>
         <td><code>"h:mm a"</code>
         </td><td><code>12:08 PM</code>
     </td></tr><tr>
         <td><code>"hh 'o''clock' a, zzzz"</code>
         </td><td><code>12 o'clock PM, Pacific Daylight Time</code>
     </td></tr><tr>
         <td><code>"K:mm a, z"</code>
         </td><td><code>0:08 PM, PDT</code>
     </td></tr><tr>
         <td><code>"yyyyy.MMMMM.dd GGG hh:mm aaa"</code>
         </td><td><code>02001.July.04 AD 12:08 PM</code>
     </td></tr><tr>
         <td><code>"EEE, d MMM yyyy HH:mm:ss Z"</code>
         </td><td><code>Wed, 4 Jul 2001 12:08:56 -0700</code>
     </td></tr><tr>
         <td><code>"yyMMddHHmmssZ"</code>
         </td><td><code>010704120856-0700</code>
     </td></tr><tr>
         <td><code>"yyyy-MM-dd'T'HH:mm:ss.SSSZ"</code>
         </td><td><code>2001-07-04T12:08:56.235-0700</code>
     </td></tr><tr>
         <td><code>"yyyy-MM-dd'T'HH:mm:ss.SSSXXX"</code>
         </td><td><code>2001-07-04T12:08:56.235-07:00</code>
     </td></tr><tr>
         <td><code>"YYYY-'W'ww-u"</code>
         </td><td><code>2001-W27-3</code>
 </td></tr></tbody>
 </table></p>
<blockquote>
<p>范例: 格式化日期显示<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Date date = <span class="keyword">new</span> Date();</span><br><span class="line">		SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss.SSS"</span>);</span><br><span class="line">		String str = sdf.format(date);</span><br><span class="line">		System.out.println(str);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2020-06-23 17:15:08.686</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>​    </p>
<blockquote>
<p>范例: 接下来实现字符串转为date;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">		String birthday = <span class="string">"1995-09-24 00:40:00.000"</span>;</span><br><span class="line">		SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss.SSS"</span>);</span><br><span class="line">		Date date = sdf.parse(birthday); </span><br><span class="line">		System.out.println(date);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Sun Sep 24 00:40:00 CST 1995</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
<p>范例:数字格式化<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>到目前可以发现字符串可以向所有类型转换：基本类型，日期类型；</p>
<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><h2 id="1-认识正则表达式"><a href="#1-认识正则表达式" class="headerlink" title="1. 认识正则表达式"></a>1. 认识正则表达式</h2><p>基本数用户输入的信息用String表示，为了转换的正确性需要进行一些复杂的验证处理；</p>
<p>给一个字符串判断是否由数字所组成，如果为数字所组成，就把它变为数字进行乘法计算</p>
<blockquote>
<p>范例：字符串转数字<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">		String str = <span class="string">"123"</span>;</span><br><span class="line">		<span class="keyword">if</span> (str.matches(<span class="string">"\\d+"</span>)) &#123;</span><br><span class="line">			<span class="keyword">int</span> num = Integer.parseInt(str);</span><br><span class="line">			System.out.println(num * <span class="number">2</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">246</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>有开发包<code>java.util.regex</code>,也有String类里的直接支持</p>
<p>正则方便进行验证处理，方便机型复杂字符串的修改处理；</p>
<h2 id="2-常用正则标记"><a href="#2-常用正则标记" class="headerlink" title="2. 常用正则标记"></a>2. 常用正则标记</h2><p>在<code>java.util.regex</code>有一个pattern类，这个程序类定义所有支持的正则标记；</p>
<ol>
<li><p>【数量：单个】字符匹配</p>
<ul>
<li><p>任意字符：表示有任意字符组成</p>
<blockquote>
<p>范例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">		String str = <span class="string">"a"</span>;</span><br></pre></td></tr></table></figure>
<pre><code>            String regex = &quot;a&quot;;
            System.out.println(str.matches(regex));
        }
    }
    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">		</span><br></pre></td></tr></table></figure>
</code></pre></blockquote>
</li>
<li><p>\ \: 匹配 ” \ “</p>
</li>
<li>\n :匹配换行</li>
<li>\t : 匹配制表符</li>
</ul>
</li>
<li><p>【数量：单个】字符集（可以从其中选一个字符）</p>
<ul>
<li><p>[ abc ] : 表示其中任意一个 </p>
</li>
<li><p>[ ^abc ] : 不是a、b、c</p>
</li>
<li>[ a-zA-Z ] : 表示所有字母步在意大小写</li>
<li>[ 0-9 ] : 数字 </li>
</ul>
</li>
<li><p>【数量：单个】简化字符集</p>
<ul>
<li>”.” : 任意的一个字符</li>
<li>”\d“ : 表示一个数字等价于[ 0-9 ]</li>
<li>”\D“ : 不是一个数字等价于[ ^0-9 ]</li>
<li>“\s” : 匹配任意的一位空格，可能是空格、换行、制表符；</li>
<li>“\S” : 匹配任意的一位非（空格，可能是空格、换行、制表符）；</li>
<li>”\w“ : 匹配字母与数字下划线</li>
<li>”\W“ ： 求反</li>
</ul>
</li>
<li><p>边界匹配</p>
<ul>
<li>^ : 匹配边界开始</li>
<li>$ :匹配边界结束</li>
</ul>
</li>
<li><p>数量表达：默认情况下只有添加上了数量单位才可以匹配多位字符</p>
<ul>
<li>表达式？： 该表达式可以出现0次或1次</li>
<li>表达式* ： 该正则可以出现0次、1次或多次；</li>
<li>表达式+ ： 该正则可以出现1次或多次</li>
<li>表达式{n} ：表达式长度为n次</li>
<li>表达式{n,} ：表达式长度为n次及以上</li>
<li>表达式{n,m} ：表达式长度为n~m次</li>
</ul>
</li>
<li><p>逻辑表达式</p>
<ul>
<li>表达式X表达式Y ： X表达式后紧跟Y表达式；</li>
<li>表达式X|表达式Y ： X表达式 或 Y表达式；</li>
<li>(表达式) ： 为表达式设置一个整体描述，可以为整体描述设置数量单位；</li>
</ul>
</li>
</ol>
<h2 id="3-String类对正则的支持"><a href="#3-String类对正则的支持" class="headerlink" title="3. String类对正则的支持"></a>3. String类对正则的支持</h2><p>String类里提供有如下方法：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">No</th>
<th style="text-align:center">方法名称</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center"><code>public boolean matches(String regex)</code></td>
<td style="text-align:center">普通</td>
<td style="text-align:center">与指定字符串进行正则判断</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center"><code>public String replaceAll(String regex,  String replacement)</code></td>
<td style="text-align:center">普通</td>
<td style="text-align:center">替换全部</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center"><code>public String replacefirst(String regex,  String replacement)</code></td>
<td style="text-align:center">普通</td>
<td style="text-align:center">替换首个</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center"><code>public String[] split(String regex,int limit)</code></td>
<td style="text-align:center">普通</td>
<td style="text-align:center">正则拆分</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center"><code>public String[] split(String regex)</code></td>
<td style="text-align:center">普通</td>
<td style="text-align:center">正则拆分</td>
</tr>
</tbody>
</table>
</div>
<p>接下来范例说</p>
<blockquote>
<p>范例：实现字符串替换（删除掉非字母和数组）<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">		String str = <span class="string">"jfds91$%38&amp;4fh&amp;*931h&amp;**((NKN$%^nununouuiu*(*(non^&amp;*nfwqonf"</span>;</span><br><span class="line">		String regex = <span class="string">"\\W+"</span>;</span><br><span class="line">		System.out.println(str.replaceAll(regex, <span class="string">""</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">jfds91384fh931hNKNnununouuiunonnfwqonf</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
<p>范例：实现字符串的拆分 ：一个含有字母和数字的字符串，把字母取出来<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">		String str = <span class="string">"a1b22c333d4444e5555f666666"</span>;</span><br><span class="line">		String regex = <span class="string">"\\d+"</span>;</span><br><span class="line">		System.out.println(str.replaceAll(regex, <span class="string">""</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">abcdef</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
<p>范例：判断一个数据是不是小数如果是小数则把它转换为double类型<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">		String str = <span class="string">"100."</span>;</span><br><span class="line">		String regex = <span class="string">"\\d+(\\.\\d+)?"</span>;</span><br><span class="line">		System.out.println(str.matches(regex));</span><br><span class="line">		<span class="keyword">if</span> (str.matches(regex)) &#123;</span><br><span class="line">			System.out.println(Double.parseDouble(str));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>范例：判断一个字符串是否由日期所组成，如果是由日子所组成，则将其转成Date类型<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">		String str = <span class="string">"2007-02-13"</span>;</span><br><span class="line">		String regex = <span class="string">"\\d&#123;4&#125;-\\d&#123;2&#125;-\\d&#123;2&#125;"</span>;</span><br><span class="line">		System.out.println(str.matches(regex));</span><br><span class="line">		<span class="keyword">if</span> (str.matches(regex)) &#123;</span><br><span class="line">			System.out.println(<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>).parseObject(str));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>范例：判定给定的电话号码是否正确</p>
<ul>
<li>电话号码：52518590</li>
<li>电话号码：01052518590</li>
<li>电话号码：(010)-52518590</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">		String str = <span class="string">"(010)-51283346"</span>;</span><br><span class="line">		String regex = <span class="string">"((\\d&#123;3,4&#125;)|(\\(\\d&#123;3,4&#125;\\)-))?\\d&#123;7,8&#125;"</span>;</span><br><span class="line">		System.out.println(str.matches(regex));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>范例：实现一个email地址格式的验证</p>
<ul>
<li>email的用户名可以由字母、数字、下划线_、中划线- 所组成（不能用下划线开头）</li>
<li>Email的域名由字母、数字、下划线_、中划线-；</li>
<li>后缀必须是：.cn   .com   .net   .com.cn   .gov</li>
</ul>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200623185632111.png" alt="image-20200623185632111"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">		String str = <span class="string">"juyi006@163.com"</span>;</span><br><span class="line">		String regex = <span class="string">"[a-zA-Z0-9]\\w*@\\w+\\.(cn|com|com.cn|gov)"</span>;</span><br><span class="line">		System.out.println(str.matches(regex));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="3-java-util-regex包支持"><a href="#3-java-util-regex包支持" class="headerlink" title="3. java.util.regex包支持"></a>3. java.util.regex包支持</h2><p>这个包有两个类：Pattern（正则表达式编译），Matcher（匹配）</p>
<ol>
<li><p>pattern类提供有正则表达式的编译处理：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Pattern <span class="title">compile</span><span class="params">(String regex,<span class="keyword">int</span> flags)</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>同时也有字符串拆分支持：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String[] split(CharSequence input,<span class="keyword">int</span> limit)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>范例：Pattern的使用<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">		String str = <span class="string">"juyi006@1jif_.com"</span>;</span><br><span class="line">		String regex = <span class="string">"[^a-zA-Z]+"</span>;</span><br><span class="line">		Pattern pat = Pattern.compile(regex);</span><br><span class="line">		String[] split = pat.split(str);</span><br><span class="line">		<span class="keyword">for</span> (String temp:split) &#123;</span><br><span class="line">			System.out.println(temp);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<ol>
<li><p>Matcher类：实现了正则匹配的处理类，这个类的实例化对象依靠Pattern类完成；</p>
<p>Pattern类提供的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Matcher <span class="title">matcher</span><span class="params">(CharSequence input)</span></span></span><br></pre></td></tr></table></figure>
<p>当获取了Matcher类的对象之后就可以利用该类中的方法进行如下操作：</p>
<ul>
<li><p>正则匹配：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串替换</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">replaceAll</span><span class="params">(String replacement)</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<blockquote>
<p>范例：字符串匹配<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		String str = <span class="string">"juyi006@1jif_.com"</span>;</span><br><span class="line">		String regex = <span class="string">"[^a-zA-Z]+"</span>;</span><br><span class="line">		Pattern pat = Pattern.compile(regex);</span><br><span class="line">		Matcher mat = pat.matcher(str);</span><br><span class="line">		System.out.println(mat.matches());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>之前的拆分，匹配，替换都根本用不到这个开发包；但有一些正则是String不具备的：Matcher类里有一个分组的功能，这个功能时Matcher不具备的；</p>
<blockquote>
<p>范例：用于分组把<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		<span class="comment">// 要求取出 #&#123;&#125;中的内容</span></span><br><span class="line">		String str = <span class="string">"INSERT INTO dept(deptno,dname,loc) VALUES (#&#123;deptno&#125;，#&#123;dname&#125;，#&#123;loc&#125;)"</span>;</span><br><span class="line">		String regex = <span class="string">"#\\&#123;\\w+\\&#125;"</span>;</span><br><span class="line">		Pattern pat = Pattern.compile(regex);</span><br><span class="line">		Matcher mat = pat.matcher(str);</span><br><span class="line">		<span class="keyword">while</span>(mat.find()) &#123;</span><br><span class="line">			System.out.println(mat.group(<span class="number">0</span>).replaceAll(<span class="string">"#|\\&#123;|\\&#125;"</span>, <span class="string">""</span>));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这个开发包不是很复杂的正则处理也很难用到；</p>
</blockquote>
<h1 id="国际化程序实现"><a href="#国际化程序实现" class="headerlink" title="国际化程序实现"></a>国际化程序实现</h1><p>同一个代码可以更具不同的国家实现不同的语言描述，但是程序处理的核心业务是相同的</p>
<h2 id="1-国际化程序实现原理"><a href="#1-国际化程序实现原理" class="headerlink" title="1.国际化程序实现原理"></a>1.国际化程序实现原理</h2><p>语言环境不同；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200624130022432.png" alt="image-20200624130022432"></p>
<p>通过分析，可以发现，想实现这个国际化程序开发，就要解决以下两点：</p>
<ul>
<li>如何可以保存文字的文件信息；</li>
<li>如何可以根据不同的区域语言的编码读取指定的资源信息；</li>
</ul>
<h2 id="2-locale类"><a href="#2-locale类" class="headerlink" title="2. locale类"></a>2. locale类</h2><p>首先需要解决的就是不同国家用户的区域和语言编码问题，而在<code>java.util.Locale</code>类中就提供类似的功能；而后可以利用Locale类中的两个构造方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Locale​(String language)</span><br><span class="line"><span class="keyword">public</span> Locale​(String language,String country)</span><br></pre></td></tr></table></figure>
<p>此时需要知道国家和语言的代码：中文代码：<code>zh_CN</code>;    美国英语：<code>en_US</code>;</p>
<p>获取这些信息的方式：网上搜吧</p>
<blockquote>
<p>范例：实例化Locale类对象<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Locale locale = <span class="keyword">new</span> Locale(<span class="string">"zh"</span>, <span class="string">"CN"</span>);	<span class="comment">//中文环境</span></span><br><span class="line">		System.out.println(locale);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">zh_CN</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>如果现在像自动获得当前的环境，就可以利用Locale类本身默认方法进行实例化：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Locale getDefault​()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>范例：当地的环境；<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Locale locale = Locale.getDefault();</span><br><span class="line">		System.out.println(locale);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">zh_CN</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>在开发中并不关心国家和语言的编码，把著名的这些设置为了常量：</p>
<blockquote>
<p>范例：读取常量<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Locale locale = Locale.CHINA;</span><br><span class="line">		Locale loc = Locale.CHINESE;</span><br><span class="line">		System.out.println(locale);</span><br><span class="line">		System.out.println(loc);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">zh_CN</span></span><br><span class="line"><span class="comment">zh</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="3-ResourceBundle读取资源文件"><a href="#3-ResourceBundle读取资源文件" class="headerlink" title="3. ResourceBundle读取资源文件"></a>3. ResourceBundle读取资源文件</h2><p>现在已经准备好了资源文件，那么随后就需要进行资源文件；读取资源文件依靠：<code>java.util.ResourceBundle</code>类完成；此类定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ResourceBundle</span> <span class="keyword">extends</span> <span class="title">Object</span></span></span><br></pre></td></tr></table></figure>
<p>·ResourceBundle是一个抽象类，如果说要想进行此类的实例化可以直接·利用该类中提供的一个<code>static</code>方法来完成；</p>
<ul>
<li><p>获取ResourceBundle类对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResourceBundle getBundle​(String baseName)</span><br></pre></td></tr></table></figure>
<ul>
<li>baseName：描述资源文件的名称，但是没有后缀</li>
</ul>
</li>
<li><p>根据key读取读取资源内容：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> String getString​(String key)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>范例：使用ResourceBundle类读取内容</p>
<p>在<code>cn.jubingyi.message</code>下</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">info</span>=<span class="string">\u5F88\u9AD8\u5174\u89C1\u5230\u4F60</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		ResourceBundle resource = ResourceBundle.getBundle(<span class="string">"cn.jubingyi.message.Message"</span>);</span><br><span class="line">		String val = resource.getString(<span class="string">"info"</span>);</span><br><span class="line">		System.out.println(val);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>在进行数据读取时，key一定要存在，如果不存在会出现异常；</p>
<h2 id="4-实现国际化程序开发"><a href="#4-实现国际化程序开发" class="headerlink" title="4. 实现国际化程序开发"></a>4. 实现国际化程序开发</h2><ol>
<li><p>在CLASSPATH下建立：cn.jubingyi.message.Message_zh_CN.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">info</span>=<span class="string">\u5F88\u9AD8\u5174\u89C1\u5230\u4F60</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在CLASSPATH下建立：cn.jubingyi.message.Message_en_US.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">info</span>=<span class="string">Welcome !</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>通过程序进行指定区域的资源信息加载</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		ResourceBundle resource = ResourceBundle.getBundle(<span class="string">"cn.jubingyi.message.Message"</span>);</span><br><span class="line">		String val = resource.getString(<span class="string">"info"</span>);</span><br><span class="line">		System.out.println(val);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">欢迎你的到来</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>这时没有指定locale对象，但是<code>Message_zh_CN.properties</code>起作用了;</p>
<p><code>getBundle</code>这个方法默认获取当前本地Locale的资源；</p>
</li>
</ol>
<ol>
<li><p>如果有需要也可以修改当前的<code>locale</code>环境，则可以使用<code>ResourceBundle.getBundle</code>的重载：</p>
<ul>
<li>获取ResourceBundle</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ResourceBundle getBundle​(String baseName,Locale locale)</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Locale locale = <span class="keyword">new</span> Locale(<span class="string">"en"</span>,<span class="string">"US"</span>);</span><br><span class="line">		ResourceBundle resource = ResourceBundle.getBundle(<span class="string">"cn.jubingyi.message.Message"</span>,locale);</span><br><span class="line">		String val = resource.getString(<span class="string">"info"</span>);</span><br><span class="line">		System.out.println(val);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Welcome !</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果资源包中没有德国但是设置了德国，则会读取本地的那一项：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Locale locale = Locale.GERMAN;</span><br><span class="line">		ResourceBundle resource = ResourceBundle.getBundle(<span class="string">"cn.jubingyi.message.Message"</span>,locale);</span><br><span class="line">		String val = resource.getString(<span class="string">"info"</span>);</span><br><span class="line">		System.out.println(val);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">欢迎您的访问</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果本地都没有（把<code>zh-CN</code>文件去掉了），则显示<code>Message.properties</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Locale locale = Locale.GERMAN;</span><br><span class="line">		ResourceBundle resource = ResourceBundle.getBundle(<span class="string">"cn.jubingyi.message.Message"</span>,locale);</span><br><span class="line">		String val = resource.getString(<span class="string">"info"</span>);</span><br><span class="line">		System.out.println(val);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">TaDaYiMaSi!</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>读取顺序：读取指定区域的资源文件 &gt; 默认本地资源 &gt; 公共的资源（没有区域设置的）</p>
<h2 id="5-格式化文本显示"><a href="#5-格式化文本显示" class="headerlink" title="5.  格式化文本显示"></a>5.  格式化文本显示</h2><p>某一位用户登录成功：显示“xxx，欢迎您”；这样的信息保存在资源文件里就需要用占位符来描述；对于读取出来的数据进行消息格式化</p>
<blockquote>
<p>范例：修改资源文件</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>【中文资源】<strong>cn.jubingyi.message.Message_zh_CN.properties</strong></th>
<th>info=欢迎{0}的访问，日期{1}</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>【英文资源】cn.jubingyi.message.Message_en_US.properties</strong></td>
<td><strong>info=Welcome{0}, data:{1} !</strong></td>
</tr>
</tbody>
</table>
</div>
</blockquote>
<p> 如果有需要可增加{n}之类的内容；</p>
<p> 如果要进行资源读取会将占位符的信息一起读取，所以此时就需要利用MessageFormat类进行格式化处理</p>
<p> <img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200624185030139.png" alt="image-20200624185030139"></p>
<p> 在<code>MessageFormat</code>里提供了一个格式化文本的方法：</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String format​(String pattern,Object... arguments)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>范例：格式化国际化程序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.MessageFormat;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Locale locale = Locale.US;</span><br><span class="line">		ResourceBundle resource = ResourceBundle.getBundle(<span class="string">"cn.jubingyi.message.Message"</span>,locale);</span><br><span class="line">		String val = resource.getString(<span class="string">"info"</span>);</span><br><span class="line">		System.out.println(MessageFormat.format(val, <span class="string">"zenner"</span>,<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>).format(<span class="keyword">new</span> Date())));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Welcome zenner, data: 2020-06-24 !</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>日后见到资源文件里的<code>{0}</code>，<code>{1}</code>的结构表示，要实现相应的格式化文本</p>
<h1 id="开发支持类库"><a href="#开发支持类库" class="headerlink" title="开发支持类库"></a>开发支持类库</h1><p>UUID生成无重复字符串的程序类，根据时间戳实现一个自动的无重复的字符串定义；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		System.out.println(UUID.randomUUID());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-UUID类"><a href="#1-UUID类" class="headerlink" title="1. UUID类"></a>1. UUID类</h2><p>A UUID represents a 128-bit value. There exist different variants of these global identifiers. </p>
<ul>
<li><p>获取UUID对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> UUID randomUUID​()</span><br></pre></td></tr></table></figure>
</li>
<li><p>根据字符串获取UUID内容</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> UUID fromString​(String name)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>在对一些文件进行自动命名处理的情况下，UUID非常好用；</p>
<h2 id="2-Optional类"><a href="#2-Optional类" class="headerlink" title="2. Optional类"></a>2. Optional类</h2><p>Optional类主要功能进行null的相关处理；在以前进行程序开发的时候，如果为了防止程序之中出现空指向异常往往可以追加有null的验证；</p>
<p>一般情况下都是在引用接收方被动进行判断，所以为了解决这种被动处理操作，在java中提供的Optional类；这个类提供的操作方法：</p>
<ul>
<li><p>返回空的数据：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Optional&lt;T&gt; empty​()</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取数据：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> T get​()</span><br></pre></td></tr></table></figure></li>
<li><p>保存数据，但是不允许出现null：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Optional&lt;T&gt; of​(T value)</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果保存数据的时候存在有null，则会抛出NullPointerException异常</p>
</li>
<li><p>保存数据，允许为空</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Optional&lt;T&gt; ofNullable​(T value)</span><br></pre></td></tr></table></figure></li>
<li><p>空的时候，返回其他数据：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> T orElse​(T other)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200625151325238.png" alt="image-20200625151325238"></p>
<blockquote>
<p>范例：修改程序，按照正规结构完成<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		IMessage temp = MessageUtil.getMessage().get();</span><br><span class="line">		MessageUtil.useMessage(temp);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageUtil</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">MessageUtil</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Optional&lt;IMessage&gt; <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> Optional.of(<span class="keyword">new</span> MessageImpl());</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">useMessage</span><span class="params">(IMessage msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (msg != <span class="keyword">null</span>) &#123;</span><br><span class="line">			System.out.println(msg.getContent());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageImpl</span> <span class="keyword">implements</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">"www.get.cn"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>如果说现在数据保存的内容是null，则就会在<u>保存处</u>出现异常；</p>
<blockquote>
<p>范例：修改 getMessage() 给他返回一个null<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageUtil</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">MessageUtil</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Optional&lt;IMessage&gt; <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> Optional.of(<span class="keyword">null</span>);	<span class="comment">// 修改处</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">useMessage</span><span class="params">(IMessage msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (msg != <span class="keyword">null</span>) &#123;</span><br><span class="line">			System.out.println(msg.getContent());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">Exception in thread <span class="string">"main"</span> java.lang.NullPointerException</span><br><span class="line">	at java.base/java.util.Objects.requireNonNull(Objects.java:<span class="number">222</span>)</span><br><span class="line">	at java.base/java.util.Optional.of(Optional.java:<span class="number">111</span>)</span><br><span class="line">	at cn.jubingyi.Demo.MessageUtil.getMessage(JavaApiDemo.java:<span class="number">14</span>)	<span class="comment">// 报错了</span></span><br><span class="line">	at cn.jubingyi.Demo.JavaApiDemo.main(JavaApiDemo.java:<span class="number">7</span>)</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>由于Optional类中允许保存有null的内容，所以在数据获取的时候也可以进行null的处理；但是如果为空，使用get获取对象时就会报错；</p>
<blockquote>
<p>范例：处理空<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		IMessage temp = MessageUtil.getMessage().get();	<span class="comment">// get时就会报错</span></span><br><span class="line">		MessageUtil.useMessage(temp);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageUtil</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">MessageUtil</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Optional&lt;IMessage&gt; <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> Optional.ofNullable(<span class="keyword">null</span>);	<span class="comment">// 修改为可以接受null的方法</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">useMessage</span><span class="params">(IMessage msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (msg != <span class="keyword">null</span>) &#123;</span><br><span class="line">			System.out.println(msg.getContent());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageImpl</span> <span class="keyword">implements</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">"www.get.cn"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">Exception in thread <span class="string">"main"</span> java.util.NoSuchElementException: No value present</span><br><span class="line">	at java.base/java.util.Optional.get(Optional.java:<span class="number">141</span>)</span><br><span class="line">	at cn.jubingyi.Demo.JavaApiDemo.main(JavaApiDemo.java:<span class="number">7</span>)</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>再把get换掉换成<code>orelse</code>，在为null时返回null或设定值；</p>
<blockquote>
<p>范例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		IMessage temp = MessageUtil.getMessage().orElse(<span class="keyword">new</span> Message_send_Impl());</span><br><span class="line">		MessageUtil.useMessage(temp);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageUtil</span></span>&#123;</span><br><span class="line">	MessageUtil() &#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Optional&lt;IMessage&gt; <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> Optional.ofNullable(<span class="keyword">null</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">useMessage</span><span class="params">(IMessage msg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (msg != <span class="keyword">null</span>) &#123;</span><br><span class="line">			System.out.println(msg.getContent());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageImpl</span> <span class="keyword">implements</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">"www.get.cn"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message_send_Impl</span> <span class="keyword">implements</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">"www.send.cn"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">www.send.cn</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>在所有的引用数据类型的操作处理之中null是一个重要的问题</p>
<h2 id="3-ThreadLocal类"><a href="#3-ThreadLocal类" class="headerlink" title="3. ThreadLocal类"></a>3. ThreadLocal类</h2><p>解决了核心资源与多线程并发访问的处理情况</p>
<blockquote>
<p>范例：定义一个消息发送结构：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Message msg = <span class="keyword">new</span> Message();	<span class="comment">// 实例化消息对象</span></span><br><span class="line">		msg.setInfo(<span class="string">"www.zenner.com"</span>);	<span class="comment">// 设置要发送的内容</span></span><br><span class="line">		Channel.setMsg(msg);	<span class="comment">//	通道中设置要发送的消息</span></span><br><span class="line">		Channel.send();	<span class="comment">// 发送消息</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Channel</span></span>&#123;	<span class="comment">//消息发送通道</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Message msg;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Channel</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Message <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> msg;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">		Channel.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"【消息发送】"</span>+msg.getInfo());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String info;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> info;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInfo</span><span class="params">(String info)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.info = info;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200628103908525.png" alt="image-20200628103908525"></p>
<p>当前的程序实际上采用的是一种单线程的模式处理的；那么在多线程的状态下能否实现完全一致的效果呢？</p>
<blockquote>
<p>范例：多线程影响<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		<span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">			Message msg = <span class="keyword">new</span> Message();	<span class="comment">// 实例化消息对象</span></span><br><span class="line">			msg.setInfo(<span class="string">"The 1-th Thread's MESSAGE"</span>);	<span class="comment">// 设置要发送的内容</span></span><br><span class="line">			Channel.setMsg(msg);	<span class="comment">//	通道中设置要发送的消息</span></span><br><span class="line">			Channel.send();	<span class="comment">// 发送消息</span></span><br><span class="line">		&#125;,<span class="string">"消息发送者A"</span>).start();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">			Message msg = <span class="keyword">new</span> Message();	<span class="comment">// 实例化消息对象</span></span><br><span class="line">			msg.setInfo(<span class="string">"The 2-th Thread's MESSAGE"</span>);	<span class="comment">// 设置要发送的内容</span></span><br><span class="line">			Channel.setMsg(msg);	<span class="comment">//	通道中设置要发送的消息</span></span><br><span class="line">			Channel.send();	<span class="comment">// 发送消息</span></span><br><span class="line">		&#125;,<span class="string">"消息发送者B"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">			Message msg = <span class="keyword">new</span> Message();	<span class="comment">// 实例化消息对象</span></span><br><span class="line">			msg.setInfo(<span class="string">"The 3-th Thread's MESSAGE"</span>);	<span class="comment">// 设置要发送的内容</span></span><br><span class="line">			Channel.setMsg(msg);	<span class="comment">//	通道中设置要发送的消息</span></span><br><span class="line">			Channel.send();	<span class="comment">// 发送消息</span></span><br><span class="line">		&#125;,<span class="string">"消息发送者C"</span>).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Channel</span></span>&#123;	<span class="comment">//消息发送通道</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Message msg;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Channel</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Message <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> msg;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">		Channel.msg = msg;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"【"</span>+Thread.currentThread().getName()+<span class="string">"、消息发送】"</span>+msg.getInfo());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String info;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> info;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInfo</span><span class="params">(String info)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.info = info;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">【消息发送者A、消息发送】The 2-th Thread's MESSAGE</span></span><br><span class="line"><span class="comment">【消息发送者B、消息发送】The 2-th Thread's MESSAGE</span></span><br><span class="line"><span class="comment">【消息发送者C、消息发送】The 3-th Thread's MESSAGE</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>这个时候消息的处理产生了影响，出现了数据覆盖</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200628105010956.png" alt="image-20200628105010956"></p>
<p>在保持Channel（所有发送的通道）核心结构不改变的情况下，需要考虑到每个线程的独立操作问题；在这种情况下，对于Channel类而言除了要保留有发送的消息之外，还应该对存放有每一个线程的标记（当前线程），那么我们就可以通过ThreadLocal类存放数据；在ThreadLocal里提供有如下的方法：</p>
<ul>
<li><p>构造方法：创建有新的ThreadLocal类对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ThreadLocal​()</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> set​(T value)</span><br></pre></td></tr></table></figure>
</li>
<li><p>取出数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public T get​()</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void remove​()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200628110527647.png" alt="image-20200628110527647"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200628110845248.png" alt="image-20200628110845248"></p>
<blockquote>
<p>范例：使用ThreadLocal解决核心资源与多线程的问题<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		<span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">			Message msg = <span class="keyword">new</span> Message();	<span class="comment">// 实例化消息对象</span></span><br><span class="line">			msg.setInfo(<span class="string">"The 1-th Thread's MESSAGE"</span>);	<span class="comment">// 设置要发送的内容</span></span><br><span class="line">			Channel.setMsg(msg);	<span class="comment">//	通道中设置要发送的消息</span></span><br><span class="line">			Channel.send();	<span class="comment">// 发送消息</span></span><br><span class="line">		&#125;,<span class="string">"消息发送者A"</span>).start();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">			Message msg = <span class="keyword">new</span> Message();	<span class="comment">// 实例化消息对象</span></span><br><span class="line">			msg.setInfo(<span class="string">"The 2-th Thread's MESSAGE"</span>);	<span class="comment">// 设置要发送的内容</span></span><br><span class="line">			Channel.setMsg(msg);	<span class="comment">//	通道中设置要发送的消息</span></span><br><span class="line">			Channel.send();	<span class="comment">// 发送消息</span></span><br><span class="line">		&#125;,<span class="string">"消息发送者B"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">			Message msg = <span class="keyword">new</span> Message();	<span class="comment">// 实例化消息对象</span></span><br><span class="line">			msg.setInfo(<span class="string">"The 3-th Thread's MESSAGE"</span>);	<span class="comment">// 设置要发送的内容</span></span><br><span class="line">			Channel.setMsg(msg);	<span class="comment">//	通道中设置要发送的消息</span></span><br><span class="line">			Channel.send();	<span class="comment">// 发送消息</span></span><br><span class="line">		&#125;,<span class="string">"消息发送者C"</span>).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Channel</span></span>&#123;	<span class="comment">//消息发送通道</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;Message&gt; ThreadLocalMsg = <span class="keyword">new</span> ThreadLocal&lt;Message&gt;();</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Channel</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">		Channel.ThreadLocalMsg.set(msg);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"【"</span>+Thread.currentThread().getName()+<span class="string">"、消息发送】"</span>+ThreadLocalMsg.get().getInfo());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String info;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> info;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInfo</span><span class="params">(String info)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.info = info;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">【消息发送者C、消息发送】The 3-th Thread's MESSAGE</span></span><br><span class="line"><span class="comment">【消息发送者A、消息发送】The 1-th Thread's MESSAGE</span></span><br><span class="line"><span class="comment">【消息发送者B、消息发送】The 2-th Thread's MESSAGE</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>每一个线程通过ThreaLocal只允许保存一个数据</p>
<h2 id="4-定时调度"><a href="#4-定时调度" class="headerlink" title="4.定时调度"></a>4.定时调度</h2><p>定时器的主要操作就是进行定时任务的处理，像闹钟一样；在java中有定时任务的支持，但是这种任务的处理只是实现了一种间隔触发的操作；如果要想实现定时的处理操作需要有一个定时操作的主体类，以及一个定时任务的控制； 可使用两个类实现:： <code>Timer</code>，<code>TimeTask</code>;</p>
<ul>
<li><p><code>java.util.TimerTask</code> 类：实现定时任务处理</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200628113338547.png" alt="image-20200628113338547"></p>
</li>
<li><p><code>java.util.Timer</code> 类：进行任务的启动，启动的方法：</p>
<ul>
<li><p>任务启动</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> schedule​(TimerTask task,<span class="keyword">long</span> delay)	<span class="comment">// 延迟单位是毫秒</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>间隔触发：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> scheduleAtFixedRate​(TimerTask task, <span class="keyword">long</span> delay, <span class="keyword">long</span> period)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200628231249732.png" alt="image-20200628231249732"></p>
<blockquote>
<p>范例：实现定时任务处理<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Timer;</span><br><span class="line"><span class="keyword">import</span> java.util.TimerTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.crypto.Data;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTask</span> <span class="keyword">extends</span> <span class="title">TimerTask</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(Thread.currentThread().getName()+<span class="string">"、当前时间为: "</span>+<span class="keyword">new</span> Date(System.currentTimeMillis()));</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="keyword">new</span> Date());</span><br><span class="line">		Timer timer = <span class="keyword">new</span> Timer();</span><br><span class="line">		timer.schedule(<span class="keyword">new</span> MyTask(), <span class="number">3000</span>);	<span class="comment">//	修改点位</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Sun Jun 28 23:17:23 CST 2020</span></span><br><span class="line"><span class="comment">Timer-0、当前时间为: Sun Jun 28 23:17:26 CST 2020</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
<p>范例：间隔启动任务<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Timer;</span><br><span class="line"><span class="keyword">import</span> java.util.TimerTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.crypto.Data;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTask</span> <span class="keyword">extends</span> <span class="title">TimerTask</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(Thread.currentThread().getName()+<span class="string">"、当前时间为: "</span>+<span class="keyword">new</span> Date(System.currentTimeMillis()));</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="keyword">new</span> Date());</span><br><span class="line">		Timer timer = <span class="keyword">new</span> Timer();</span><br><span class="line">		timer.scheduleAtFixedRate(<span class="keyword">new</span> MyTask(), <span class="number">3000</span>, period);	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Sun Jun 28 23:17:23 CST 2020</span></span><br><span class="line"><span class="comment">Timer-0、当前时间为: Sun Jun 28 23:17:26 CST 2020</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="5-Base64-加密与解密"><a href="#5-Base64-加密与解密" class="headerlink" title="5. Base64 加密与解密"></a>5. Base64 加密与解密</h2><p>正常来说加密永远伴随着解密；加密与解密都伴随着一定的规则；提供的加密加密操作类：<code>Base64</code>，这个类里面有两个类：</p>
<ul>
<li><p>Base64 Encoder：进行加密处理</p>
<ul>
<li><p>加密处理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">byte</span>[] encode​(<span class="keyword">byte</span>[] src)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>Base64 Decoder ：进行解密处理</p>
<ul>
<li><p>解密处理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">byte</span>[] decode​(<span class="keyword">byte</span>[] src)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>范例：实现加密与解密操作<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		String msg = <span class="string">"www.zenner.com"</span>;	<span class="comment">// 要发送的信息内容</span></span><br><span class="line">		String encMsg = <span class="keyword">new</span> String(Base64.getEncoder().encode(msg.getBytes()));</span><br><span class="line">		System.out.println(encMsg);</span><br><span class="line">		String oldMsg = <span class="keyword">new</span> String(Base64.getDecoder().decode(encMsg));</span><br><span class="line">		System.out.println(oldMsg);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">d3d3Lnplbm5lci5jb20=</span></span><br><span class="line"><span class="comment">www.zenner.com</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>目前这个只是对一个字符串进行加密加密；是一个公版算法，用这个加密不安全，那么最好的做法是使用盐值操作·</p>
<blockquote>
<p>范例：盐值操作<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		String salt = <span class="string">"zennerJBY"</span>;</span><br><span class="line">		String msg = <span class="string">"www.zenner.com"</span>+<span class="string">"&#123;"</span>+salt+<span class="string">"&#125;"</span>;	<span class="comment">// 要发送的信息内容</span></span><br><span class="line">		String encMsg = <span class="keyword">new</span> String(Base64.getEncoder().encode(msg.getBytes()));</span><br><span class="line">		System.out.println(encMsg);</span><br><span class="line">		String oldMsg = <span class="keyword">new</span> String(Base64.getDecoder().decode(encMsg));</span><br><span class="line">		System.out.println(oldMsg);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">d3d3Lnplbm5lci5jb217emVubmVySkJZfQ==</span></span><br><span class="line"><span class="comment">www.zenner.com&#123;zennerJBY&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>即便有盐值但加密的效果也不是很好；可以用多次加密；</p>
<ul>
<li><p>范例：多层加密</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StringUtil</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String SALT = <span class="string">"zennerJBY"</span>;	<span class="comment">// 公共盐值</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> REPEAT = <span class="number">3</span>;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 加密处理</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> str</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> repeat</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">encode</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">		String temp = str +<span class="string">"&#123;"</span>+SALT+<span class="string">"&#125;"</span>;	<span class="comment">// 盐值对外不公布</span></span><br><span class="line">		<span class="keyword">byte</span> data[] = temp.getBytes();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>;x &lt; REPEAT;x++) &#123;</span><br><span class="line">			data = Base64.getEncoder().encode(data);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> String(data);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 解密处理</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">decode</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">byte</span> data [] = str.getBytes();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>;x &lt; REPEAT; x++) &#123;</span><br><span class="line">			data = Base64.getDecoder().decode(data);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> String(data).replaceAll(<span class="string">"\\&#123;\\w+\\&#125;"</span>, <span class="string">""</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		String str = StringUtil.encode(<span class="string">"www.zenner.com"</span>);</span><br><span class="line">		System.out.println(str);</span><br><span class="line">		System.out.println(StringUtil.decode(str));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">WkROa00weHVjR3hpYlRWc1kyazFhbUl5TVRkbGJWWjFZbTFXZVZOclNscG1VVDA5</span></span><br><span class="line"><span class="comment">www.zenner.com</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="比较器"><a href="#比较器" class="headerlink" title="比较器"></a>比较器</h1><p>所谓的比较器就是进行大小关系的确定判断，分析比较器存在的意义是什么；</p>
<h2 id="1-比较器问题的引出"><a href="#1-比较器问题的引出" class="headerlink" title="1. 比较器问题的引出"></a>1. 比较器问题的引出</h2><p>若要进行数组操作，肯定是用<code>java.util.Arrays</code> 的操作完成，这个类一定是提供有绝大部分的数组操作；这个类还提供了对象数组的排序支持；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> sort​(Object[] a)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>范例：实现对象数组得排序<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Integer data [] = <span class="keyword">new</span> Integer [] &#123;<span class="number">10</span>,<span class="number">9</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">20</span>&#125;;</span><br><span class="line">		Arrays.sort(data);	<span class="comment">// 进行对象数组的排序</span></span><br><span class="line">		System.out.println(Arrays.toString(data));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[3, 6, 9, 10, 20]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>同样，如果数现在给定的是一个String型的对象数组，那么也是可以进行排序处理的；</p>
<blockquote>
<p>范例：String 对象数组排序<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		String data [] = <span class="keyword">new</span> String [] &#123;<span class="string">"X"</span>,<span class="string">"B"</span>,<span class="string">"A"</span>,<span class="string">"E"</span>,<span class="string">"G"</span>&#125;;</span><br><span class="line">		Arrays.sort(data);	<span class="comment">// 进行对象数组的排序</span></span><br><span class="line">		System.out.println(Arrays.toString(data));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[A, B, E, G, X]</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>接下来看看自定义的类如何进行比较</p>
<blockquote>
<p>范例：采用自定义类型进行排序<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"【Person】 [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">"]\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Person per [] = <span class="keyword">new</span> Person [] &#123;</span><br><span class="line">				<span class="keyword">new</span> Person(<span class="string">"小强-A"</span>,<span class="number">89</span>),</span><br><span class="line">				<span class="keyword">new</span> Person(<span class="string">"小强-B"</span>,<span class="number">50</span>),</span><br><span class="line">				<span class="keyword">new</span> Person(<span class="string">"小强-C"</span>,<span class="number">100</span>),</span><br><span class="line">		&#125;;</span><br><span class="line">		Arrays.sort(per);</span><br><span class="line">		System.out.println(Arrays.toString(per));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Exception in thread "main" java.lang.ClassCastException: class cn.jubingyi.Demo.Person cannot be cast to class java.lang.Comparable (cn.jubingyi.Demo.Person is in unnamed module of loader 'app'; java.lang.Comparable is in module java.base of loader 'bootstrap')</span></span><br><span class="line"><span class="comment">	at java.base/java.util.ComparableTimSort.countRunAndMakeAscending(ComparableTimSort.java:320)</span></span><br><span class="line"><span class="comment">	at java.base/java.util.ComparableTimSort.sort(ComparableTimSort.java:188)</span></span><br><span class="line"><span class="comment">	at java.base/java.util.Arrays.sort(Arrays.java:1040)</span></span><br><span class="line"><span class="comment">	at cn.jubingyi.Demo.JavaApiDemo.main(JavaApiDemo.java:25)</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>任意一个类默认情况下是无法使用系统内部的类实现数组排序或比较需求的，是因为我们没有明确指出自定义类该如何比较（没有比较规则），所以提供有比较器的接口：Comparable接口</p>
<h2 id="2-Comparable比较器"><a href="#2-Comparable比较器" class="headerlink" title="2. Comparable比较器"></a>2. Comparable比较器</h2><p>要实现对象的比较肯定需要有比较器来制定规则，而比较的规则则需要comparable来实现；对于Comparable需要清楚其定义的结构；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 	实现对象的比较处理操作</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> o	要比较的对象</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span>	当数据比传入的对象小返回负数，如果大于返回正数，等于返回0</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> compareTo​(T o);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200702155322434.png" alt="image-20200702155322434"></p>
<blockquote>
<p>范例：实现自定义对象数组排序<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Person</span>&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"【Person】 [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">"]\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Person o)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.age - o.age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Person per [] = <span class="keyword">new</span> Person [] &#123;</span><br><span class="line">				<span class="keyword">new</span> Person(<span class="string">"小强-A"</span>,<span class="number">89</span>),</span><br><span class="line">				<span class="keyword">new</span> Person(<span class="string">"小强-B"</span>,<span class="number">50</span>),</span><br><span class="line">				<span class="keyword">new</span> Person(<span class="string">"小强-C"</span>,<span class="number">100</span>),</span><br><span class="line">		&#125;;</span><br><span class="line">		Arrays.sort(per);</span><br><span class="line">		System.out.println(Arrays.toString(per));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[【Person】 [name=小强-B, age=50]</span></span><br><span class="line"><span class="comment">, 【Person】 [name=小强-A, age=89]</span></span><br><span class="line"><span class="comment">, 【Person】 [name=小强-C, age=100]</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>排序里面只需要有一个<code>comparaTo()</code>方法进行排序规则的定义，而后整个java系统里面就可以为其实现排序处理了；</p>
<h2 id="3-Comparator比较器"><a href="#3-Comparator比较器" class="headerlink" title="3. Comparator比较器"></a>3. Comparator比较器</h2><p><code>Comparator</code>是一种挽救的比较器支持，其主要目的是解决一些没有使用<code>Comparable</code>排序的类的对象数组；</p>
<blockquote>
<p>范例：已开发完成的程序项目，并且先期设计没有考虑到所谓的比较器功能；<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"【Person】 [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">"]\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>就是上一版没有加入<code>Comparable</code>的 Person 类；后来需要进行对Person类进行排序处理，但是又不能修改Person类。此时就需要一种挽救的方法来实现比较，在Arrays类里排序有另外一种实现</p>
<ul>
<li><p>基于<code>Comparator</code>的排序处理（这是一个接口）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="keyword">void</span> sort​(T[] a, Comparator&lt;? <span class="keyword">super</span> T&gt; c)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200702162340499.png" alt="image-20200702162340499"></p>
<p>在排序类里引入一个要排序类的辅助类用来实现比较器；</p>
<p>在<code>java.util.Comparator</code>里最初只定义有一个排序的<code>compare</code>方法（<code>int compare(T o1,T o2)</code>）后来添加了很多static方法</p>
<blockquote>
<p>范例：定义排序规则类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PersonComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Person</span>&gt;</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Person p1, Person p2)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> p1.getAge() - p2.getAge();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>在测试类进行测序处理时就可以利用排序规则实现操作。</p>
<blockquote>
<p>范例：排序<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Person per [] = <span class="keyword">new</span> Person [] &#123;</span><br><span class="line">				<span class="keyword">new</span> Person(<span class="string">"小强-A"</span>,<span class="number">89</span>),</span><br><span class="line">				<span class="keyword">new</span> Person(<span class="string">"小强-B"</span>,<span class="number">50</span>),</span><br><span class="line">				<span class="keyword">new</span> Person(<span class="string">"小强-C"</span>,<span class="number">100</span>),</span><br><span class="line">		&#125;;</span><br><span class="line">		Arrays.sort(per,<span class="keyword">new</span> PersonComparator());	<span class="comment">// 使用了自定义的比较类</span></span><br><span class="line">		System.out.println(Arrays.toString(per));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"【Person】 [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">"]\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PersonComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Person</span>&gt;</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Person p1, Person p2)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> p1.getAge() - p2.getAge();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[【Person】 [name=小强-B, age=50]</span></span><br><span class="line"><span class="comment">, 【Person】 [name=小强-A, age=89]</span></span><br><span class="line"><span class="comment">, 【Person】 [name=小强-C, age=100]</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
<p><strong>面试题</strong>：请解释 Comparable 和 Comparator的区别？</p>
<ul>
<li><code>java.lang.Comparable</code> 是在类定义的时候实现的父接口，主要用于定于排序规则，里面只有一个<code>compareTo()</code> 方法</li>
<li><code>java.util.Comparator</code> 是挽救的比较器操作，需要设置单独的比较器规则类实现排序，里面有<code>compare</code>方法</li>
</ul>
</blockquote>
<h1 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h1><h2 id="1-二叉树结构简介"><a href="#1-二叉树结构简介" class="headerlink" title="1. 二叉树结构简介"></a>1. 二叉树结构简介</h2><p>数据的存储形式，在二叉树的实现之中其基本的实现原理如下：取第一个数据为保存的根节点，小于等于根节点的数据放在节点的左子树，大于的数组放在右子树；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200702165622679.png" alt="image-20200702165622679"></p>
<p>要进行信息检索，就需要进行每个节点的判断。他的时间复杂度是O(logn)</p>
<p>再有三种遍历方式：前序遍历，中序遍历，后序遍历</p>
<h2 id="2-二叉树基础实现"><a href="#2-二叉树基础实现" class="headerlink" title="2. 二叉树基础实现"></a>2. 二叉树基础实现</h2><p>实现二叉树的处理中最为关键的问题在于数据的保存，而数据由于牵扯到对象比较的问题，这就需要到了比较器的支持，而且比较器首选Comparable，所以本次将保存Person类</p>
<blockquote>
<p>范例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		BinaryTree&lt;Person&gt; bt = <span class="keyword">new</span> BinaryTree&lt;Person&gt;();</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-80"</span>,<span class="number">80</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-30"</span>,<span class="number">30</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-50"</span>,<span class="number">50</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-60"</span>,<span class="number">60</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-90"</span>,<span class="number">90</span>));</span><br><span class="line">		System.out.println(Arrays.toString(bt.toArray()));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinaryTree</span> &lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">		<span class="keyword">private</span> Comparable &lt;T&gt; data;</span><br><span class="line">		<span class="keyword">private</span> Node parent;</span><br><span class="line">		<span class="keyword">private</span> Node left;</span><br><span class="line">		<span class="keyword">private</span> Node right;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Comparable&lt;T&gt; data)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.data = data;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 实现节点数据的适当位置的存储</span></span><br><span class="line"><span class="comment">		 * <span class="doctag">@param</span> newNode	创建的新节点</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addNode</span><span class="params">(Node newNode)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">if</span> (newNode.data.compareTo((T)<span class="keyword">this</span>.data) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">this</span>.left == <span class="keyword">null</span>) &#123;</span><br><span class="line">					<span class="keyword">this</span>.left = newNode;</span><br><span class="line">					<span class="keyword">this</span>.parent = <span class="keyword">this</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">this</span>.left.addNode(newNode);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">this</span>.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">					<span class="keyword">this</span>.right = newNode;</span><br><span class="line">					newNode.parent = <span class="keyword">this</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">this</span>.right.addNode(newNode);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 实现所有数据的获取处理，按照中序遍历的形式来完成</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">toArrayNode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">this</span>.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">				<span class="keyword">this</span>.left.toArrayNode();</span><br><span class="line">			&#125;</span><br><span class="line">			BinaryTree.<span class="keyword">this</span>.returnData[BinaryTree.<span class="keyword">this</span>.foot++] = <span class="keyword">this</span>.data;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">this</span>.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">				<span class="keyword">this</span>.right.toArrayNode();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// ------------------- 以下为二叉树的功能实现 ---------</span></span><br><span class="line">	<span class="keyword">private</span> Node root;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> count; </span><br><span class="line">	<span class="keyword">private</span> Object [] returnData;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> foot = <span class="number">0</span>;	<span class="comment">// 角标控制</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Comparable&lt;T&gt; data)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (data == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">"保存的数据不允许为空"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 所有的数据本身不具有节点关系的匹配，一定要将其包装在Node类中；</span></span><br><span class="line">		Node newNode = <span class="keyword">new</span> Node(data);</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.root == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">this</span>.root = newNode;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;	<span class="comment">//保存到合适的位置</span></span><br><span class="line">			<span class="keyword">this</span>.root.addNode(newNode);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">this</span>.count ++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/**	</span></span><br><span class="line"><span class="comment">	 * 以对象数组的形式返回全部数据，如果没有数据返回null</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> Object[] toArray() &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.count == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">this</span>.returnData = <span class="keyword">new</span> Object [<span class="keyword">this</span>.count];</span><br><span class="line">		<span class="keyword">this</span>.foot = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">this</span>.root.toArrayNode();	<span class="comment">// 直接由Node类来负责</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.returnData;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Person</span>&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"【Person】 [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">"]\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Person o)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.age - o.age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[【Person】 [name=小强-30, age=30]</span></span><br><span class="line"><span class="comment">, 【Person】 [name=小强-50, age=50]</span></span><br><span class="line"><span class="comment">, 【Person】 [name=小强-60, age=60]</span></span><br><span class="line"><span class="comment">, 【Person】 [name=小强-80, age=80]</span></span><br><span class="line"><span class="comment">, 【Person】 [name=小强-90, age=90]</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>在进行数据添加的时候只是实现了节点关系的保存，而这种关系保存后的结果就是所有的数据都是有序排列；</p>
<h2 id="3-数据删除"><a href="#3-数据删除" class="headerlink" title="3. 数据删除"></a>3. 数据删除</h2><p>二叉树的节点删除非常复杂，要考虑的情况是非常多的。</p>
<ul>
<li><p>情况一：如果待删除的节点没有子节点，那么直接删除；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200702175100493.png" alt="image-20200702175100493"></p>
</li>
</ul>
<ul>
<li><p>情况二：如果待删除节点只有一个子节点，那么直接删除，并用其子节点去顶替它</p>
<ul>
<li><p>只有左子树</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200702175311288.png" alt="image-20200702175311288"></p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>只有右子树</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200702175415864.png" alt="image-20200702175415864"></p>
</li>
</ul>
<ul>
<li><p>情况三：如果待删除的节点有两个子节点，首选找出它的后继节点，然后处理“后继节点” 和“被删节点的父节点”的关系</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200702175751215.png" alt="image-20200702175751215"></p>
</li>
</ul>
<blockquote>
<p>范例：在Node类中追加由新的处理功能<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取要删除的节点</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> data 比较的对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>	要删除的节点对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> BinaryTree&lt;T&gt;.<span class="function">Node <span class="title">getRemoveNode</span><span class="params">(Comparable&lt;T&gt; data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (data.compareTo((T)<span class="keyword">this</span>.data) == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (data.compareTo((T)<span class="keyword">this</span>.data) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.left.getRemoveNode(data);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.right.getRemoveNode(data);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>范例：在BinaryTree 里面进行节点的处理<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 执行数据删除处理</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> data	要删除的数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(Comparable&lt;T&gt; data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.root == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.root.data.compareTo((T)data)==<span class="number">0</span>) &#123;	<span class="comment">// 要删除的是根节点</span></span><br><span class="line">            Node moveNode = root.right;</span><br><span class="line">            <span class="keyword">while</span> (moveNode.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">                moveNode = moveNode.left;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (moveNode.parent.left.data.compareTo((T)moveNode.data)==<span class="number">0</span>) &#123;</span><br><span class="line">                moveNode.parent.left = <span class="keyword">null</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                moveNode.parent.right = <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            moveNode.parent = root.parent;</span><br><span class="line">            System.out.println(moveNode.toString());</span><br><span class="line">            moveNode.right = root.right;</span><br><span class="line">            moveNode.left = root.left;</span><br><span class="line">            <span class="keyword">this</span>.root = moveNode;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            Node removeNode = <span class="keyword">this</span>.root.getRemoveNode(data);</span><br><span class="line">            <span class="keyword">if</span> (removeNode != <span class="keyword">null</span>) &#123;	<span class="comment">// 找到要删除的对象信息</span></span><br><span class="line">                System.out.println(removeNode.toString());</span><br><span class="line">                <span class="comment">// 情况一：没有任何的子节点</span></span><br><span class="line">                <span class="keyword">if</span> (removeNode.left == <span class="keyword">null</span> &amp;&amp; removeNode.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    removeNode.parent.left = <span class="keyword">null</span>;</span><br><span class="line">                    removeNode.parent.right = <span class="keyword">null</span>;</span><br><span class="line">                    removeNode.parent = <span class="keyword">null</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span> (removeNode.left != <span class="keyword">null</span> &amp;&amp; removeNode.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (removeNode.parent.left.data.compareTo((T)removeNode.data)==<span class="number">0</span>) &#123;</span><br><span class="line">                        removeNode.parent.left = removeNode.left;</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        removeNode.parent.right = removeNode.left;</span><br><span class="line">                    &#125;</span><br><span class="line">                    removeNode.left.parent = removeNode.parent;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span> (removeNode.left == <span class="keyword">null</span> &amp;&amp; removeNode.right != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span> (removeNode.parent.left.data.compareTo((T)removeNode.data)==<span class="number">0</span>) &#123;</span><br><span class="line">                        removeNode.parent.left = removeNode.right;</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        removeNode.parent.right = removeNode.right;</span><br><span class="line">                    &#125;</span><br><span class="line">                    removeNode.right.parent = removeNode.parent;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    Node moveNode = removeNode.right;</span><br><span class="line">                    <span class="keyword">while</span> (moveNode.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        moveNode = moveNode.left;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (moveNode.parent.left.data.compareTo((T)moveNode.data)==<span class="number">0</span>) &#123;</span><br><span class="line">                        moveNode.parent.left = <span class="keyword">null</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        moveNode.parent.right = <span class="keyword">null</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    moveNode.parent = removeNode.parent;</span><br><span class="line">                    System.out.println(moveNode.toString());</span><br><span class="line">                    <span class="keyword">if</span> (removeNode.parent.left.data.compareTo((T)removeNode.data)==<span class="number">0</span>) &#123;</span><br><span class="line">                        removeNode.parent.left = moveNode;</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        removeNode.parent.right = moveNode;</span><br><span class="line">                    &#125;</span><br><span class="line">                    moveNode.right = removeNode.right;</span><br><span class="line">                    moveNode.left = removeNode.left;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.count --;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>范例：全代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		BinaryTree&lt;Person&gt; bt = <span class="keyword">new</span> BinaryTree&lt;Person&gt;();</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-80"</span>,<span class="number">80</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-50"</span>,<span class="number">50</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-60"</span>,<span class="number">60</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-30"</span>,<span class="number">30</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-90"</span>,<span class="number">90</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-10"</span>,<span class="number">10</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-55"</span>,<span class="number">55</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-70"</span>,<span class="number">70</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-85"</span>,<span class="number">85</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Person(<span class="string">"小强-95"</span>,<span class="number">95</span>));</span><br><span class="line">		bt.remove(<span class="keyword">new</span> Person(<span class="string">"小强-61"</span>,<span class="number">61</span>));</span><br><span class="line">		System.out.println(Arrays.toString(bt.toArray()));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinaryTree</span> &lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">		<span class="keyword">private</span> Comparable &lt;T&gt; data;</span><br><span class="line">		<span class="keyword">private</span> Node parent;</span><br><span class="line">		<span class="keyword">private</span> Node left;</span><br><span class="line">		<span class="keyword">private</span> Node right;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Comparable&lt;T&gt; data)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.data = data;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"Node [data="</span> + data + <span class="string">"]"</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 实现节点数据的适当位置的存储</span></span><br><span class="line"><span class="comment">		 * <span class="doctag">@param</span> newNode	创建的新节点</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addNode</span><span class="params">(Node newNode)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">if</span> (newNode.data.compareTo((T)<span class="keyword">this</span>.data) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">this</span>.left == <span class="keyword">null</span>) &#123;</span><br><span class="line">					<span class="keyword">this</span>.left = newNode;</span><br><span class="line">					newNode.parent = <span class="keyword">this</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">this</span>.left.addNode(newNode);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">this</span>.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">					<span class="keyword">this</span>.right = newNode;</span><br><span class="line">					newNode.parent = <span class="keyword">this</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">this</span>.right.addNode(newNode);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 实现所有数据的获取处理，按照中序遍历的形式来完成</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">toArrayNode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">this</span>.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">				<span class="keyword">this</span>.left.toArrayNode();</span><br><span class="line">			&#125;</span><br><span class="line">			BinaryTree.<span class="keyword">this</span>.returnData[BinaryTree.<span class="keyword">this</span>.foot++] = <span class="keyword">this</span>.data;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">this</span>.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">				<span class="keyword">this</span>.right.toArrayNode();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 判断节点是否存在给定的数据</span></span><br><span class="line"><span class="comment">		 * <span class="doctag">@param</span> data	给定的数据</span></span><br><span class="line"><span class="comment">		 * <span class="doctag">@return</span>	存在返回true，不存在返回false</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containsNode</span><span class="params">(Comparable&lt;T&gt; data)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">if</span> (data.compareTo((T)<span class="keyword">this</span>.data) == <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span> (data.compareTo((T)<span class="keyword">this</span>.data) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">this</span>.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">this</span>.left.containsNode(data);</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">this</span>.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">this</span>.right.containsNode(data);</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 获取要删除的节点</span></span><br><span class="line"><span class="comment">		 * <span class="doctag">@param</span> data 比较的对象</span></span><br><span class="line"><span class="comment">		 * <span class="doctag">@return</span>	要删除的节点对象</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="keyword">public</span> BinaryTree&lt;T&gt;.<span class="function">Node <span class="title">getRemoveNode</span><span class="params">(Comparable&lt;T&gt; data)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">if</span> (data.compareTo((T)<span class="keyword">this</span>.data) == <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span> (data.compareTo((T)<span class="keyword">this</span>.data) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">this</span>.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">this</span>.left.getRemoveNode(data);</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">this</span>.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">this</span>.right.getRemoveNode(data);</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// ------------------- 以下为二叉树的功能实现 ---------</span></span><br><span class="line">	<span class="keyword">private</span> Node root;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> count; </span><br><span class="line">	<span class="keyword">private</span> Object [] returnData;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> foot = <span class="number">0</span>;	<span class="comment">// 角标控制</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">Contains</span><span class="params">(Comparable&lt;T&gt; data)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.count == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.root.containsNode(data);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Comparable&lt;T&gt; data)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (data == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">"保存的数据不允许为空"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 所有的数据本身不具有节点关系的匹配，一定要将其包装在Node类中；</span></span><br><span class="line">		Node newNode = <span class="keyword">new</span> Node(data);</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.root == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">this</span>.root = newNode;</span><br><span class="line">			newNode.parent = <span class="keyword">null</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;	<span class="comment">//保存到合适的位置</span></span><br><span class="line">			<span class="keyword">this</span>.root.addNode(newNode);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">this</span>.count ++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/**	</span></span><br><span class="line"><span class="comment">	 * 以对象数组的形式返回全部数据，如果没有数据返回null</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> Object[] toArray() &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.count == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">this</span>.returnData = <span class="keyword">new</span> Object [<span class="keyword">this</span>.count];</span><br><span class="line">		<span class="keyword">this</span>.foot = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">this</span>.root.toArrayNode();	<span class="comment">// 直接由Node类来负责</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.returnData;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 执行数据删除处理</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> data	要删除的数据</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(Comparable&lt;T&gt; data)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.root == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> ;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">this</span>.root.data.compareTo((T)data)==<span class="number">0</span>) &#123;	<span class="comment">// 要删除的是根节点</span></span><br><span class="line">				Node moveNode = root.right;</span><br><span class="line">				<span class="keyword">while</span> (moveNode.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">					moveNode = moveNode.left;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> (moveNode.parent.left.data.compareTo((T)moveNode.data)==<span class="number">0</span>) &#123;</span><br><span class="line">					moveNode.parent.left = <span class="keyword">null</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					moveNode.parent.right = <span class="keyword">null</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				moveNode.parent = root.parent;</span><br><span class="line">				System.out.println(moveNode.toString());</span><br><span class="line">				moveNode.right = root.right;</span><br><span class="line">				moveNode.left = root.left;</span><br><span class="line">				<span class="keyword">this</span>.root = moveNode;</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				Node removeNode = <span class="keyword">this</span>.root.getRemoveNode(data);</span><br><span class="line">				<span class="keyword">if</span> (removeNode != <span class="keyword">null</span>) &#123;	<span class="comment">// 找到要删除的对象信息</span></span><br><span class="line">					System.out.println(removeNode.toString());</span><br><span class="line">					<span class="comment">// 情况一：没有任何的子节点</span></span><br><span class="line">					<span class="keyword">if</span> (removeNode.left == <span class="keyword">null</span> &amp;&amp; removeNode.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">						removeNode.parent.left = <span class="keyword">null</span>;</span><br><span class="line">						removeNode.parent.right = <span class="keyword">null</span>;</span><br><span class="line">						removeNode.parent = <span class="keyword">null</span>;</span><br><span class="line">					&#125;<span class="keyword">else</span> <span class="keyword">if</span> (removeNode.left != <span class="keyword">null</span> &amp;&amp; removeNode.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">						<span class="keyword">if</span> (removeNode.parent.left.data.compareTo((T)removeNode.data)==<span class="number">0</span>) &#123;</span><br><span class="line">							removeNode.parent.left = removeNode.left;</span><br><span class="line">						&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">							removeNode.parent.right = removeNode.left;</span><br><span class="line">						&#125;</span><br><span class="line">						removeNode.left.parent = removeNode.parent;</span><br><span class="line">					&#125;<span class="keyword">else</span> <span class="keyword">if</span> (removeNode.left == <span class="keyword">null</span> &amp;&amp; removeNode.right != <span class="keyword">null</span>)&#123;</span><br><span class="line">						<span class="keyword">if</span> (removeNode.parent.left.data.compareTo((T)removeNode.data)==<span class="number">0</span>) &#123;</span><br><span class="line">							removeNode.parent.left = removeNode.right;</span><br><span class="line">						&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">							removeNode.parent.right = removeNode.right;</span><br><span class="line">						&#125;</span><br><span class="line">						removeNode.right.parent = removeNode.parent;</span><br><span class="line">					&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">						Node moveNode = removeNode.right;</span><br><span class="line">						<span class="keyword">while</span> (moveNode.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">							moveNode = moveNode.left;</span><br><span class="line">						&#125;</span><br><span class="line">						<span class="keyword">if</span> (moveNode.parent.left.data.compareTo((T)moveNode.data)==<span class="number">0</span>) &#123;</span><br><span class="line">							moveNode.parent.left = <span class="keyword">null</span>;</span><br><span class="line">						&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">							moveNode.parent.right = <span class="keyword">null</span>;</span><br><span class="line">						&#125;</span><br><span class="line">						moveNode.parent = removeNode.parent;</span><br><span class="line">						System.out.println(moveNode.toString());</span><br><span class="line">						<span class="keyword">if</span> (removeNode.parent.left.data.compareTo((T)removeNode.data)==<span class="number">0</span>) &#123;</span><br><span class="line">							removeNode.parent.left = moveNode;</span><br><span class="line">						&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">							removeNode.parent.right = moveNode;</span><br><span class="line">						&#125;</span><br><span class="line">						moveNode.right = removeNode.right;</span><br><span class="line">						moveNode.left = removeNode.left;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">return</span> ;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">this</span>.count --;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Person</span>&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"【Person】 [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">"]\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Person o)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.age - o.age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="4-红黑树原理简介"><a href="#4-红黑树原理简介" class="headerlink" title="4. 红黑树原理简介"></a>4. 红黑树原理简介</h2><p>二叉树的主要特点：数据查询的时候可以提供更好的查询性能，这种原始的二叉树结构是有明显缺陷的。当改变二叉树结构的时候可能会产生树的不平衡</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703091438511.png" alt="image-20200703091438511"></p>
<p>成为了一个链表结构；要想达到最良好效果的二叉树，那么他应该是一个平衡二叉树，同时所有的节点层次深度应该不超过1；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703091729898.png" alt="image-20200703091729898"></p>
<p>这个时候二叉树的检索操作效率一定是最高的，并且树可以忍受着这些频繁的增加或者删除操作；所以针对二叉树有着进一步的设计要求：</p>
<p>​    红黑树本质上是一种二叉查找树，但它在二叉查找树的基础上额外添加了一个标记（颜色），同时具有一定的规则。这些规则是红黑树保证了一种平衡，插入，删除，查找的最坏时间复杂度都为O(logn);</p>
<p>​    红黑树本质上在节点上追加了一个表示颜色的操作信息而已；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color&#123;</span><br><span class="line">	RED,BLACK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinaryTree</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">		<span class="keyword">private</span> T data;</span><br><span class="line">		<span class="keyword">private</span> Node parent;</span><br><span class="line">		<span class="keyword">private</span> Node left;</span><br><span class="line">		<span class="keyword">private</span> Node right;</span><br><span class="line">		<span class="keyword">private</span> Color colo;	<span class="comment">// 多增加的一个属性</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>红黑树的不一定要用枚举，用true或者false来实现也可以；不一定非要用枚举类；</p>
<p>一个标准的红黑树的结构如下所示</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703092903184.png" alt="image-20200703092903184"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703092957642.png" alt="image-20200703092957642"></p>
<p>主要是利用这个红色节点和黑色节点实现均衡的控制；简单理解红黑树的结构就是为了实现左旋，右旋操作，已保证树的平衡；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703093842704.png" alt="image-20200703093842704"></p>
<p>但是对于平衡，还需要考虑数据增加的平衡以及数据删除的平衡，增加和删除都是需要对这颗树进行平衡修复的；</p>
<h3 id="数据插入的平衡修复"><a href="#数据插入的平衡修复" class="headerlink" title="数据插入的平衡修复"></a>数据插入的平衡修复</h3><p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703100930114.png" alt="image-20200703100930114"></p>
<p>在进行红黑树处理的时候为了方便操作都会将新的节点使用红色来描述。于是当设置根节点的时候就会违反规则2：根节点为黑色；那么这时候只需要将节点的颜色涂黑即可；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703101420358.png" alt="image-20200703101420358"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703101536770.png" alt="image-20200703101536770"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703101944620.png" alt="image-20200703101944620"></p>
<p>在红黑树进行修复处理中，他需要根据 当前节点 以及 当前节点的父节点 和 叔叔节点 的颜色来推断树是否需要修复处理；</p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703102522310.png" alt="image-20200703102522310"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703102542488.png" alt="image-20200703102542488"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703102609251.png" alt="image-20200703102609251"></p>
<h3 id="数据删除的平衡修复"><a href="#数据删除的平衡修复" class="headerlink" title="数据删除的平衡修复"></a>数据删除的平衡修复</h3><p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703103056376.png" alt="image-20200703103056376"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703103245195.png" alt="image-20200703103245195"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703103510803.png" alt="image-20200703103510803"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703103715408.png" alt="image-20200703103715408"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703103826585.png" alt="image-20200703103826585"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703104218170.png" alt="image-20200703104218170"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703104122403.png" alt="image-20200703104122403"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703104415382.png" alt="image-20200703104415382"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703104503801.png" alt="image-20200703104503801"></p>
<p><img src="/2020/05/11/java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/image-20200703104604553.png" alt="image-20200703104604553"></p>
<p>在红黑树之中修复的目的是为了保证树结构中的黑色节点的数量平衡，黑色节点的数量平衡了，那么才可能得到“O(logn)”的执行性能，但是修复的过程一方面是红黑的处理，另一方面就是子节点保存的层次。</p>
<h1 id="类库使用案例分析"><a href="#类库使用案例分析" class="headerlink" title="类库使用案例分析"></a>类库使用案例分析</h1><h2 id="1-StringBuffer使用"><a href="#1-StringBuffer使用" class="headerlink" title="1.StringBuffer使用"></a>1.StringBuffer使用</h2><p>​        定义一个StringBuffer类对象，然后通过<code>append()</code>方法向对象中添加26个小写字母，要求每次只添加一次，共添加26次，然后按照逆序的方式输出，并且可以删除前5个字符；</p>
<p>​        本操作只要是训练StringBuffer类中的处理方法，因为StringBuffer的主要特点是内容允许修改</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		StringBuffer buf = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> x = <span class="string">'a'</span>;x &lt;= <span class="string">'z'</span>;x++) &#123;</span><br><span class="line">			buf.append((<span class="keyword">char</span>)x);</span><br><span class="line">		&#125;</span><br><span class="line">		buf.reverse().delete(<span class="number">0</span>, <span class="number">5</span>);</span><br><span class="line">		System.out.println(buf);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">utsrqponmlkjihgfedcba</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="2-随机数组"><a href="#2-随机数组" class="headerlink" title="2. 随机数组"></a>2. 随机数组</h2><p>利用Random类产生5个1~30之间（包括1和30）的随机数组</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumberFactory</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Random random = <span class="keyword">new</span> Random();</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 通过随机数来生成一个数组的内容，该内容不包括有0</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> len：要开辟的数组大小</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span>	返回的数组</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> [] creat(<span class="keyword">int</span> len) &#123;</span><br><span class="line">		<span class="keyword">int</span> data [] = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">		<span class="keyword">int</span> foot = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span> (foot &lt; data.length) &#123;</span><br><span class="line">			<span class="keyword">int</span> num = random.nextInt(<span class="number">31</span>);</span><br><span class="line">			<span class="keyword">if</span> (num != <span class="number">0</span>) &#123;</span><br><span class="line">				data[foot++] = num;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> data;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		<span class="keyword">int</span> result [] = NumberFactory.creat(<span class="number">30</span>);</span><br><span class="line">		System.out.println(Arrays.toString(result));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-Email验证"><a href="#3-Email验证" class="headerlink" title="3. Email验证"></a>3. Email验证</h2><p>输入一个Email地址，然后使用正则表达式验证该Email地址是否正确</p>
<p>在这里设置一个单独的验证处理类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (args.length != <span class="number">1</span>) &#123;</span><br><span class="line">			System.out.println(<span class="string">"程序执行错误，没有输入初始化参数，正确格式为： java JavaApiDemo Email地址"</span>);</span><br><span class="line">			System.exit(<span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		String email = args[<span class="number">0</span>];</span><br><span class="line">		<span class="keyword">if</span> (Validator.isEmail(email)) &#123;</span><br><span class="line">			System.out.println(email+<span class="string">" 是一个email地址"</span>);</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			System.out.println(email+<span class="string">" 不符合格式！"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Validator</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Validator</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (email == <span class="keyword">null</span> || <span class="string">""</span>.equals(email))&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		String regex = <span class="string">"\\w+@\\w+\\.\\w+"</span>;</span><br><span class="line">		<span class="keyword">return</span> email.matches(regex);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-扔硬币"><a href="#4-扔硬币" class="headerlink" title="4. 扔硬币"></a>4. 扔硬币</h2><p>用0~1之间的随机数来模拟扔硬币试验，统计扔1000次后出现正、反面的次数并输出</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coin</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> front ;	<span class="comment">// 保存正面的次数</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> back;	<span class="comment">// 保存北面的次数</span></span><br><span class="line">	<span class="keyword">private</span> Random random = <span class="keyword">new</span> Random();</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 *	 扔硬币的处理</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> num	执行次数</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">throwCol</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; num; x++) &#123;</span><br><span class="line">			<span class="keyword">int</span> temp = random.nextInt(<span class="number">2</span>);</span><br><span class="line">			<span class="keyword">if</span> (temp == <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">this</span>.front ++;</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">this</span>.back ++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getFront</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> front;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> back;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Coin coin = <span class="keyword">new</span> Coin();</span><br><span class="line">		coin.throwCol(<span class="number">1000000</span>);</span><br><span class="line">		System.out.println(<span class="string">"正面次数： "</span>+coin.getFront() + <span class="string">"、背面出现次数： "</span>+coin.getBack());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-IP验证"><a href="#5-IP验证" class="headerlink" title="5. IP验证"></a>5. IP验证</h2><p>编写正则表达式，判断给定的是否是一个合法IP地址：第一位内容是无，1，或者2，后面的内容可以0-5，第三位0-9</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Validator</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">validateIP</span><span class="params">(String IP)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (IP == <span class="keyword">null</span>||<span class="string">""</span>.equals(IP)) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		String regex = <span class="string">"([12]?[0-9]?[0-9].)&#123;3&#125;[12]?[0-9]?[0-9]"</span>;</span><br><span class="line">		<span class="keyword">if</span> (IP.matches(regex)) &#123;</span><br><span class="line">			String result [] = IP.split(<span class="string">"\\."</span>);</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x&lt; result.length; x++) &#123;</span><br><span class="line">				<span class="keyword">int</span> temp = Integer.parseInt(result[x]);</span><br><span class="line">				<span class="keyword">if</span> (temp &gt; <span class="number">255</span>) &#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		String str = <span class="string">"252.168.122.2"</span>;</span><br><span class="line">		System.out.println(Validator.validateIP(str));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-HTML拆分"><a href="#6-HTML拆分" class="headerlink" title="6. HTML拆分"></a>6. HTML拆分</h2><p>给定下面的HTML代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"Arial,Serif"</span> <span class="attr">size</span>=<span class="string">"+2"</span> <span class="attr">color</span>=<span class="string">"red"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>要求对内容进行拆分，拆分之后的结果是：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">face Arial,Serif</span><br><span class="line">size +2</span><br><span class="line">color red</span><br></pre></td></tr></table></figure>
<p>对于此时最简单的方法就是进行分组处理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		String str = <span class="string">"&lt;font face=\"Arial,Serif\" size=\"+2\" color=\"red\"&gt;"</span>;</span><br><span class="line">		String regex = <span class="string">"\\w+=\"[a-zA-Z0-9,\\+]+\""</span>;</span><br><span class="line">		Matcher matcher = Pattern.compile(regex).matcher(str);</span><br><span class="line">		<span class="keyword">while</span> (matcher.find()) &#123;</span><br><span class="line">			String temp = matcher.group(<span class="number">0</span>);</span><br><span class="line">			String[] result = temp.split(<span class="string">"="</span>);</span><br><span class="line">			System.out.println(result[<span class="number">0</span>] + <span class="string">"\t"</span> + result[<span class="number">1</span>].replaceAll(<span class="string">"\""</span>,<span class="string">""</span>));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">face	Arial,Serif</span></span><br><span class="line"><span class="comment">size	+2</span></span><br><span class="line"><span class="comment">color	red</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h2 id="7-国家代码"><a href="#7-国家代码" class="headerlink" title="7. 国家代码"></a>7. 国家代码</h2><p>编写代码，实现国际化应用，从命令行输入国家的代码，例如：1代表中国，2代表美国，然后根据输入代码的不同调用不同的资源文件显示信息；</p>
<p>​    这个程序肯定要通过Locale类的对象来指定区域，然后利用ResourceBundle类来加载资源文件，而对于数据的输入可以继续使用初始化的参数形式来完成；</p>
<blockquote>
<ol>
<li>定义中文资源文件</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">info=感谢老铁刷的火箭！</span><br></pre></td></tr></table></figure>
<ol>
<li>定义英文资源文件</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">info=Thanks <span class="keyword">for</span> Mr.Tie<span class="string">'s Rocket!</span></span><br></pre></td></tr></table></figure>
<ol>
<li>定义程序类进行加载控制</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageUtil</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CHINA = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> USA = <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String KEY = <span class="string">"info"</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String BASENAME = <span class="string">"cn.jubingyi.message.Message"</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">		Locale loc = <span class="keyword">this</span>.getLocale(num);</span><br><span class="line">		<span class="keyword">if</span> (loc == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"Nothing"</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> ResourceBundle.getBundle(BASENAME, loc).getString(KEY);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> Locale <span class="title">getLocale</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (num) &#123;</span><br><span class="line">		<span class="keyword">case</span> CHINA:</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> Locale(<span class="string">"zh"</span>, <span class="string">"CN"</span>);</span><br><span class="line">		<span class="keyword">case</span> USA:</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> Locale(<span class="string">"en"</span>, <span class="string">"US"</span>);</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (args.length != <span class="number">1</span>) &#123;</span><br><span class="line">			System.out.println(<span class="string">"程序执行错误，没有设置地区编码"</span>);</span><br><span class="line">			System.exit(<span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">int</span> choose = Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line">		System.out.println(<span class="keyword">new</span> MessageUtil().getMessage(choose));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1	感谢老铁刷的火箭！</span></span><br><span class="line"><span class="comment">2	Thanks for Mr.Tie's Rocket!</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="8-学生信息比较"><a href="#8-学生信息比较" class="headerlink" title="8. 学生信息比较"></a>8. 学生信息比较</h2><p>按照“姓名：年龄：成绩|姓名：年龄：成绩”的格式定义字符串“张三：22：89|王五：20：70”，要求将每组值分别保存在student对象之中，并对这些对象进行排序，排序的原则为：按照成绩由高到低排列，如果成绩相同则按年龄由低向高排序。</p>
<p>是一个直接的做法按照比较器来完成</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaApiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		String input = <span class="string">"张三:21:89|李四:22:89|王五:20:70"</span>;</span><br><span class="line">		String result [] = input.split(<span class="string">"\\|"</span>);</span><br><span class="line">		Student students [] = <span class="keyword">new</span> Student [result.length];</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; result.length; x ++) &#123;</span><br><span class="line">			String [] temp = result[x].split(<span class="string">":"</span>);</span><br><span class="line">			students[x] = <span class="keyword">new</span> Student(temp[<span class="number">0</span>],Integer.parseInt(temp[<span class="number">1</span>]),Double.parseDouble(temp[<span class="number">2</span>])); </span><br><span class="line">		&#125;</span><br><span class="line">		Arrays.sort(students);</span><br><span class="line">		System.out.println(Arrays.toString(students));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Student</span>&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> score;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name, <span class="keyword">int</span> age, <span class="keyword">double</span> score)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">		<span class="keyword">this</span>.score = score;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Student [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">", score="</span> + score + <span class="string">"]\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Student o)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.score &lt; o.score) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.score &lt; o.score) &#123;</span><br><span class="line">			<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.age - o.age;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[Student [name=张三, age=21, score=89.0]</span></span><br><span class="line"><span class="comment">, Student [name=李四, age=22, score=89.0]</span></span><br><span class="line"><span class="comment">, Student [name=王五, age=20, score=70.0]</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/03/13/hello-world/" rel="next" title="Hello World">
                <i class="fa fa-chevron-left"></i> Hello World
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/06/11/leetcode/" rel="prev" title="leetcode">
                leetcode <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/header.jpg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description">Deep ploughing those days ​​​​</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">61</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">38</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">60</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/1956918893" target="_blank" title="微博">
                      
                        <i class="fa fa-fw fa-globe"></i>微博</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:juyi006@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://fivelike.xyz/" title="fivelike" target="_blank">fivelike</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.reachdong.cool/" title="ReachDong(dada)" target="_blank">ReachDong(dada)</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#eclipse"><span class="nav-text">eclipse</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-debug操作"><span class="nav-text">3. debug操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Junit测试工具"><span class="nav-text">4. Junit测试工具</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#java新特性"><span class="nav-text">java新特性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-可变参数"><span class="nav-text">1.可变参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-foreach-循环（增加for）"><span class="nav-text">2. foreach 循环（增加for）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-静态导入"><span class="nav-text">3.静态导入</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#泛型"><span class="nav-text">泛型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-泛型问题引出"><span class="nav-text">1. 泛型问题引出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-泛型基本定义"><span class="nav-text">2. 泛型基本定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-通配符（重点）"><span class="nav-text">3. 通配符（重点）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-泛型接口"><span class="nav-text">4. 泛型接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-泛型方法"><span class="nav-text">5. 泛型方法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#枚举"><span class="nav-text">枚举</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-多例与枚举"><span class="nav-text">1. 多例与枚举</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Enum类"><span class="nav-text">2. Enum类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-枚举中定义其他结构"><span class="nav-text">3. 枚举中定义其他结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-枚举应用"><span class="nav-text">4. 枚举应用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Annotation"><span class="nav-text">Annotation</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#代码开发逻辑"><span class="nav-text">代码开发逻辑</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-准确覆写-override"><span class="nav-text">1. 准确覆写  @override</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-过期声明-Deprecated"><span class="nav-text">2. 过期声明  @Deprecated</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-压制警告-SuppressWarnnings"><span class="nav-text">3. 压制警告  @SuppressWarnnings</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#接口定义加强"><span class="nav-text">接口定义加强</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#函数式编程"><span class="nav-text">函数式编程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-lambda表达式"><span class="nav-text">1. lambda表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-方法引用"><span class="nav-text">2.方法引用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-内建函数式接口"><span class="nav-text">3. 内建函数式接口</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#多线程编程"><span class="nav-text">多线程编程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-进程与线程"><span class="nav-text">1. 进程与线程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-继承Thread类实现多线程"><span class="nav-text">2. 继承Thread类实现多线程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-使用Runable接口实现多线程"><span class="nav-text">3. 使用Runable接口实现多线程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Thread和Runnable的区别"><span class="nav-text">4. Thread和Runnable的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-线程运行状态"><span class="nav-text">5. 线程运行状态</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-通过Callable实现多线程"><span class="nav-text">6. 通过Callable实现多线程</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#多线程常用操作方法"><span class="nav-text">多线程常用操作方法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-线程的命名及取得"><span class="nav-text">1. 线程的命名及取得</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-线程休眠"><span class="nav-text">2. 线程休眠</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-线程中断"><span class="nav-text">3. 线程中断</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-线程强制执行"><span class="nav-text">4. 线程强制执行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-线程礼让"><span class="nav-text">5.线程礼让</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-线程优先级"><span class="nav-text">6. 线程优先级</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#线程的同步与死锁"><span class="nav-text">线程的同步与死锁</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-同步问题的引出"><span class="nav-text">1.同步问题的引出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-线程同步处理"><span class="nav-text">2. 线程同步处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-线程死锁"><span class="nav-text">3. 线程死锁</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#综合实战：”生产者-消费者“模型"><span class="nav-text">综合实战：”生产者-消费者“模型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-生产者消费者基本程序模型"><span class="nav-text">1. 生产者消费者基本程序模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-解决消费者-生产者同步问题"><span class="nav-text">2. 解决消费者-生产者同步问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-利用Object类解决重复操作：线程等待与唤醒机制"><span class="nav-text">3. 利用Object类解决重复操作：线程等待与唤醒机制</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#多线程深入话题"><span class="nav-text">多线程深入话题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-优雅的停止线程"><span class="nav-text">1. 优雅的停止线程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-后台守护线程"><span class="nav-text">2. 后台守护线程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-volatile关键字"><span class="nav-text">3. volatile关键字</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#线程池"><span class="nav-text">线程池</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-线程池简介"><span class="nav-text">1. 线程池简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-线程池的实现"><span class="nav-text">2. 线程池的实现</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#多线程综合案例"><span class="nav-text">多线程综合案例</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-数字加减"><span class="nav-text">1. 数字加减</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-生产电脑"><span class="nav-text">2. 生产电脑</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-竞争抢答"><span class="nav-text">3. 竞争抢答</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#java基础类库"><span class="nav-text">java基础类库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-StringBuffer类"><span class="nav-text">1. StringBuffer类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-CharSequence接口"><span class="nav-text">2. CharSequence接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-AutoCloseable接口"><span class="nav-text">3. AutoCloseable接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Runtime类"><span class="nav-text">4. Runtime类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-system类"><span class="nav-text">5. system类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-cleaner类"><span class="nav-text">6. cleaner类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-对象克隆"><span class="nav-text">7. 对象克隆</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数学操作类"><span class="nav-text">数学操作类</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Math数学计算类"><span class="nav-text">1. Math数学计算类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Random随机数生成类"><span class="nav-text">2. Random随机数生成类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-大数字处理类"><span class="nav-text">3. 大数字处理类</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#日期操作类"><span class="nav-text">日期操作类</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-日期的格式化处理"><span class="nav-text">2. 日期的格式化处理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#正则表达式"><span class="nav-text">正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-认识正则表达式"><span class="nav-text">1. 认识正则表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-常用正则标记"><span class="nav-text">2. 常用正则标记</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-String类对正则的支持"><span class="nav-text">3. String类对正则的支持</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-java-util-regex包支持"><span class="nav-text">3. java.util.regex包支持</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#国际化程序实现"><span class="nav-text">国际化程序实现</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-国际化程序实现原理"><span class="nav-text">1.国际化程序实现原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-locale类"><span class="nav-text">2. locale类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-ResourceBundle读取资源文件"><span class="nav-text">3. ResourceBundle读取资源文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-实现国际化程序开发"><span class="nav-text">4. 实现国际化程序开发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-格式化文本显示"><span class="nav-text">5.  格式化文本显示</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#开发支持类库"><span class="nav-text">开发支持类库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-UUID类"><span class="nav-text">1. UUID类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Optional类"><span class="nav-text">2. Optional类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-ThreadLocal类"><span class="nav-text">3. ThreadLocal类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-定时调度"><span class="nav-text">4.定时调度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Base64-加密与解密"><span class="nav-text">5. Base64 加密与解密</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#比较器"><span class="nav-text">比较器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-比较器问题的引出"><span class="nav-text">1. 比较器问题的引出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Comparable比较器"><span class="nav-text">2. Comparable比较器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Comparator比较器"><span class="nav-text">3. Comparator比较器</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二叉树"><span class="nav-text">二叉树</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-二叉树结构简介"><span class="nav-text">1. 二叉树结构简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-二叉树基础实现"><span class="nav-text">2. 二叉树基础实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-数据删除"><span class="nav-text">3. 数据删除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-红黑树原理简介"><span class="nav-text">4. 红黑树原理简介</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#数据插入的平衡修复"><span class="nav-text">数据插入的平衡修复</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据删除的平衡修复"><span class="nav-text">数据删除的平衡修复</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#类库使用案例分析"><span class="nav-text">类库使用案例分析</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-StringBuffer使用"><span class="nav-text">1.StringBuffer使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-随机数组"><span class="nav-text">2. 随机数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Email验证"><span class="nav-text">3. Email验证</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-扔硬币"><span class="nav-text">4. 扔硬币</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-IP验证"><span class="nav-text">5. IP验证</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-HTML拆分"><span class="nav-text">6. HTML拆分</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-国家代码"><span class="nav-text">7. 国家代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-学生信息比较"><span class="nav-text">8. 学生信息比较</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"></span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




  <script src='https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize("");
    }
  </script>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
